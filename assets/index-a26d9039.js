var zP=Object.defineProperty;var UP=(t,e,n)=>e in t?zP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var O=(t,e,n)=>(UP(t,typeof e!="symbol"?e+"":e,n),n);function WP(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var HP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ub(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hb={exports:{}},qu={},db={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),$P=Symbol.for("react.portal"),KP=Symbol.for("react.fragment"),GP=Symbol.for("react.strict_mode"),YP=Symbol.for("react.profiler"),qP=Symbol.for("react.provider"),QP=Symbol.for("react.context"),XP=Symbol.for("react.forward_ref"),JP=Symbol.for("react.suspense"),ZP=Symbol.for("react.memo"),eI=Symbol.for("react.lazy"),Wy=Symbol.iterator;function tI(t){return t===null||typeof t!="object"?null:(t=Wy&&t[Wy]||t["@@iterator"],typeof t=="function"?t:null)}var fb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pb=Object.assign,mb={};function Qr(t,e,n){this.props=t,this.context=e,this.refs=mb,this.updater=n||fb}Qr.prototype.isReactComponent={};Qr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gb(){}gb.prototype=Qr.prototype;function Xp(t,e,n){this.props=t,this.context=e,this.refs=mb,this.updater=n||fb}var Jp=Xp.prototype=new gb;Jp.constructor=Xp;pb(Jp,Qr.prototype);Jp.isPureReactComponent=!0;var Hy=Array.isArray,yb=Object.prototype.hasOwnProperty,Zp={current:null},_b={key:!0,ref:!0,__self:!0,__source:!0};function vb(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)yb.call(e,i)&&!_b.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:el,type:t,key:r,ref:o,props:s,_owner:Zp.current}}function nI(t,e){return{$$typeof:el,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function em(t){return typeof t=="object"&&t!==null&&t.$$typeof===el}function iI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $y=/\/+/g;function Bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iI(""+t.key):e.toString(36)}function hc(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case el:case $P:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+Bh(o,0):i,Hy(s)?(n="",t!=null&&(n=t.replace($y,"$&/")+"/"),hc(s,e,n,"",function(c){return c})):s!=null&&(em(s)&&(s=nI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($y,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",Hy(t))for(var a=0;a<t.length;a++){r=t[a];var l=i+Bh(r,a);o+=hc(r,e,n,l,s)}else if(l=tI(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=i+Bh(r,a++),o+=hc(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cl(t,e,n){if(t==null)return t;var i=[],s=0;return hc(t,i,"","",function(r){return e.call(n,r,s++)}),i}function sI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var at={current:null},dc={transition:null},rI={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:dc,ReactCurrentOwner:Zp};function wb(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Cl,forEach:function(t,e,n){Cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cl(t,function(){e++}),e},toArray:function(t){return Cl(t,function(e){return e})||[]},only:function(t){if(!em(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Qr;H.Fragment=KP;H.Profiler=YP;H.PureComponent=Xp;H.StrictMode=GP;H.Suspense=JP;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rI;H.act=wb;H.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pb({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Zp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)yb.call(e,l)&&!_b.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:el,type:t.type,key:s,ref:r,props:i,_owner:o}};H.createContext=function(t){return t={$$typeof:QP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qP,_context:t},t.Consumer=t};H.createElement=vb;H.createFactory=function(t){var e=vb.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:XP,render:t}};H.isValidElement=em;H.lazy=function(t){return{$$typeof:eI,_payload:{_status:-1,_result:t},_init:sI}};H.memo=function(t,e){return{$$typeof:ZP,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=dc.transition;dc.transition={};try{t()}finally{dc.transition=e}};H.unstable_act=wb;H.useCallback=function(t,e){return at.current.useCallback(t,e)};H.useContext=function(t){return at.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return at.current.useDeferredValue(t)};H.useEffect=function(t,e){return at.current.useEffect(t,e)};H.useId=function(){return at.current.useId()};H.useImperativeHandle=function(t,e,n){return at.current.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return at.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return at.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return at.current.useMemo(t,e)};H.useReducer=function(t,e,n){return at.current.useReducer(t,e,n)};H.useRef=function(t){return at.current.useRef(t)};H.useState=function(t){return at.current.useState(t)};H.useSyncExternalStore=function(t,e,n){return at.current.useSyncExternalStore(t,e,n)};H.useTransition=function(){return at.current.useTransition()};H.version="18.3.1";db.exports=H;var k=db.exports;const wt=ub(k),oI=WP({__proto__:null,default:wt},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI=k,lI=Symbol.for("react.element"),cI=Symbol.for("react.fragment"),uI=Object.prototype.hasOwnProperty,hI=aI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dI={key:!0,ref:!0,__self:!0,__source:!0};function xb(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)uI.call(e,i)&&!dI.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:lI,type:t,key:r,ref:o,props:s,_owner:hI.current}}qu.Fragment=cI;qu.jsx=xb;qu.jsxs=xb;hb.exports=qu;var C=hb.exports,bb={exports:{}},At={},Sb={exports:{}},Eb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,N){var V=R.length;R.push(N);e:for(;0<V;){var ne=V-1>>>1,ae=R[ne];if(0<s(ae,N))R[ne]=N,R[V]=ae,V=ne;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var N=R[0],V=R.pop();if(V!==N){R[0]=V;e:for(var ne=0,ae=R.length,un=ae>>>1;ne<un;){var et=2*(ne+1)-1,Cn=R[et],tt=et+1,El=R[tt];if(0>s(Cn,V))tt<ae&&0>s(El,Cn)?(R[ne]=El,R[tt]=V,ne=tt):(R[ne]=Cn,R[et]=V,ne=et);else if(tt<ae&&0>s(El,V))R[ne]=El,R[tt]=V,ne=tt;else break e}}return N}function s(R,N){var V=R.sortIndex-N.sortIndex;return V!==0?V:R.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var N=n(c);N!==null;){if(N.callback===null)i(c);else if(N.startTime<=R)i(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function x(R){if(m=!1,v(R),!p)if(n(l)!==null)p=!0,we(w);else{var N=n(c);N!==null&&Y(x,N.startTime-R)}}function w(R,N){p=!1,m&&(m=!1,g(b),b=-1),f=!0;var V=d;try{for(v(N),h=n(l);h!==null&&(!(h.expirationTime>N)||R&&!M());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,d=h.priorityLevel;var ae=ne(h.expirationTime<=N);N=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(l)&&i(l),v(N)}else i(l);h=n(l)}if(h!==null)var un=!0;else{var et=n(c);et!==null&&Y(x,et.startTime-N),un=!1}return un}finally{h=null,d=V,f=!1}}var S=!1,E=null,b=-1,P=5,T=-1;function M(){return!(t.unstable_now()-T<P)}function B(){if(E!==null){var R=t.unstable_now();T=R;var N=!0;try{N=E(!0,R)}finally{N?ve():(S=!1,E=null)}}else S=!1}var ve;if(typeof y=="function")ve=function(){y(B)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,he=He.port2;He.port1.onmessage=B,ve=function(){he.postMessage(null)}}else ve=function(){_(B,0)};function we(R){E=R,S||(S=!0,ve())}function Y(R,N){b=_(function(){R(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,we(w))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(d){case 1:case 2:case 3:var N=3;break;default:N=d}var V=d;d=N;try{return R()}finally{d=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,N){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=d;d=R;try{return N()}finally{d=V}},t.unstable_scheduleCallback=function(R,N,V){var ne=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ne+V:ne):V=ne,R){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=V+ae,R={id:u++,callback:N,priorityLevel:R,startTime:V,expirationTime:ae,sortIndex:-1},V>ne?(R.sortIndex=V,e(c,R),n(l)===null&&R===n(c)&&(m?(g(b),b=-1):m=!0,Y(x,V-ne))):(R.sortIndex=ae,e(l,R),p||f||(p=!0,we(w))),R},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(R){var N=d;return function(){var V=d;d=N;try{return R.apply(this,arguments)}finally{d=V}}}})(Eb);Sb.exports=Eb;var fI=Sb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI=k,It=fI;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cb=new Set,ha={};function Us(t,e){Nr(t,e),Nr(t+"Capture",e)}function Nr(t,e){for(ha[t]=e,t=0;t<e.length;t++)Cb.add(e[t])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=Object.prototype.hasOwnProperty,mI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ky={},Gy={};function gI(t){return sf.call(Gy,t)?!0:sf.call(Ky,t)?!1:mI.test(t)?Gy[t]=!0:(Ky[t]=!0,!1)}function yI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _I(t,e,n,i){if(e===null||typeof e>"u"||yI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tm=/[\-:]([a-z])/g;function nm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tm,nm);We[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tm,nm);We[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tm,nm);We[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function im(t,e,n,i){var s=We.hasOwnProperty(e)?We[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_I(e,n,s,i)&&(n=null),i||s===null?gI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Jn=pI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tl=Symbol.for("react.element"),tr=Symbol.for("react.portal"),nr=Symbol.for("react.fragment"),sm=Symbol.for("react.strict_mode"),rf=Symbol.for("react.profiler"),Tb=Symbol.for("react.provider"),kb=Symbol.for("react.context"),rm=Symbol.for("react.forward_ref"),of=Symbol.for("react.suspense"),af=Symbol.for("react.suspense_list"),om=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),Pb=Symbol.for("react.offscreen"),Yy=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Object.assign,zh;function Po(t){if(zh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zh=e&&e[1]||""}return`
`+zh+t}var Uh=!1;function Wh(t,e){if(!t||Uh)return"";Uh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Uh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Po(t):""}function vI(t){switch(t.tag){case 5:return Po(t.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 2:case 15:return t=Wh(t.type,!1),t;case 11:return t=Wh(t.type.render,!1),t;case 1:return t=Wh(t.type,!0),t;default:return""}}function lf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nr:return"Fragment";case tr:return"Portal";case rf:return"Profiler";case sm:return"StrictMode";case of:return"Suspense";case af:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kb:return(t.displayName||"Context")+".Consumer";case Tb:return(t._context.displayName||"Context")+".Provider";case rm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case om:return e=t.displayName||null,e!==null?e:lf(t.type)||"Memo";case ri:e=t._payload,t=t._init;try{return lf(t(e))}catch{}}return null}function wI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lf(e);case 8:return e===sm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ib(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xI(t){var e=Ib(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kl(t){t._valueTracker||(t._valueTracker=xI(t))}function Ab(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ib(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Lc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cf(t,e){var n=e.checked;return _e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qy(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rb(t,e){e=e.checked,e!=null&&im(t,"checked",e,!1)}function uf(t,e){Rb(t,e);var n=Mi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hf(t,e.type,n):e.hasOwnProperty("defaultValue")&&hf(t,e.type,Mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hf(t,e,n){(e!=="number"||Lc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Io=Array.isArray;function br(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Mi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function df(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return _e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(Io(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mi(n)}}function Mb(t,e){var n=Mi(e.value),i=Mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Jy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Db(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ff(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Db(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pl,Ob=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bI=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(t){bI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bo[e]=Bo[t]})});function Nb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bo.hasOwnProperty(t)&&Bo[t]?(""+e).trim():e+"px"}function Lb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Nb(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var SI=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pf(t,e){if(e){if(SI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function mf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gf=null;function am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yf=null,Sr=null,Er=null;function Zy(t){if(t=il(t)){if(typeof yf!="function")throw Error(I(280));var e=t.stateNode;e&&(e=eh(e),yf(t.stateNode,t.type,e))}}function Fb(t){Sr?Er?Er.push(t):Er=[t]:Sr=t}function Vb(){if(Sr){var t=Sr,e=Er;if(Er=Sr=null,Zy(t),e)for(t=0;t<e.length;t++)Zy(e[t])}}function jb(t,e){return t(e)}function Bb(){}var Hh=!1;function zb(t,e,n){if(Hh)return t(e,n);Hh=!0;try{return jb(t,e,n)}finally{Hh=!1,(Sr!==null||Er!==null)&&(Bb(),Vb())}}function fa(t,e){var n=t.stateNode;if(n===null)return null;var i=eh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var _f=!1;if(Hn)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){_f=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{_f=!1}function EI(t,e,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var zo=!1,Fc=null,Vc=!1,vf=null,CI={onError:function(t){zo=!0,Fc=t}};function TI(t,e,n,i,s,r,o,a,l){zo=!1,Fc=null,EI.apply(CI,arguments)}function kI(t,e,n,i,s,r,o,a,l){if(TI.apply(this,arguments),zo){if(zo){var c=Fc;zo=!1,Fc=null}else throw Error(I(198));Vc||(Vc=!0,vf=c)}}function Ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ub(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e_(t){if(Ws(t)!==t)throw Error(I(188))}function PI(t){var e=t.alternate;if(!e){if(e=Ws(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return e_(s),t;if(r===i)return e_(s),e;r=r.sibling}throw Error(I(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==i)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function Wb(t){return t=PI(t),t!==null?Hb(t):null}function Hb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hb(t);if(e!==null)return e;t=t.sibling}return null}var $b=It.unstable_scheduleCallback,t_=It.unstable_cancelCallback,II=It.unstable_shouldYield,AI=It.unstable_requestPaint,Ce=It.unstable_now,RI=It.unstable_getCurrentPriorityLevel,lm=It.unstable_ImmediatePriority,Kb=It.unstable_UserBlockingPriority,jc=It.unstable_NormalPriority,MI=It.unstable_LowPriority,Gb=It.unstable_IdlePriority,Qu=null,gn=null;function DI(t){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Qu,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:LI,OI=Math.log,NI=Math.LN2;function LI(t){return t>>>=0,t===0?32:31-(OI(t)/NI|0)|0}var Il=64,Al=4194304;function Ao(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Ao(a):(r&=o,r!==0&&(i=Ao(r)))}else o=n&~s,o!==0?i=Ao(o):r!==0&&(i=Ao(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-en(e),s=1<<n,i|=t[n],e&=~s;return i}function FI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-en(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=FI(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yb(){var t=Il;return Il<<=1,!(Il&4194240)&&(Il=64),t}function $h(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=n}function jI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-en(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function cm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-en(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Z=0;function qb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qb,um,Xb,Jb,Zb,xf=!1,Rl=[],vi=null,wi=null,xi=null,pa=new Map,ma=new Map,ai=[],BI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n_(t,e){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function lo(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=il(e),e!==null&&um(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zI(t,e,n,i,s){switch(e){case"focusin":return vi=lo(vi,t,e,n,i,s),!0;case"dragenter":return wi=lo(wi,t,e,n,i,s),!0;case"mouseover":return xi=lo(xi,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return pa.set(r,lo(pa.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,ma.set(r,lo(ma.get(r)||null,t,e,n,i,s)),!0}return!1}function eS(t){var e=us(t.target);if(e!==null){var n=Ws(e);if(n!==null){if(e=n.tag,e===13){if(e=Ub(n),e!==null){t.blockedOn=e,Zb(t.priority,function(){Xb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);gf=i,n.target.dispatchEvent(i),gf=null}else return e=il(n),e!==null&&um(e),t.blockedOn=n,!1;e.shift()}return!0}function i_(t,e,n){fc(t)&&n.delete(e)}function UI(){xf=!1,vi!==null&&fc(vi)&&(vi=null),wi!==null&&fc(wi)&&(wi=null),xi!==null&&fc(xi)&&(xi=null),pa.forEach(i_),ma.forEach(i_)}function co(t,e){t.blockedOn===e&&(t.blockedOn=null,xf||(xf=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,UI)))}function ga(t){function e(s){return co(s,t)}if(0<Rl.length){co(Rl[0],t);for(var n=1;n<Rl.length;n++){var i=Rl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(vi!==null&&co(vi,t),wi!==null&&co(wi,t),xi!==null&&co(xi,t),pa.forEach(e),ma.forEach(e),n=0;n<ai.length;n++)i=ai[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ai.length&&(n=ai[0],n.blockedOn===null);)eS(n),n.blockedOn===null&&ai.shift()}var Cr=Jn.ReactCurrentBatchConfig,zc=!0;function WI(t,e,n,i){var s=Z,r=Cr.transition;Cr.transition=null;try{Z=1,hm(t,e,n,i)}finally{Z=s,Cr.transition=r}}function HI(t,e,n,i){var s=Z,r=Cr.transition;Cr.transition=null;try{Z=4,hm(t,e,n,i)}finally{Z=s,Cr.transition=r}}function hm(t,e,n,i){if(zc){var s=bf(t,e,n,i);if(s===null)td(t,e,i,Uc,n),n_(t,i);else if(zI(s,t,e,n,i))i.stopPropagation();else if(n_(t,i),e&4&&-1<BI.indexOf(t)){for(;s!==null;){var r=il(s);if(r!==null&&Qb(r),r=bf(t,e,n,i),r===null&&td(t,e,i,Uc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else td(t,e,i,null,n)}}var Uc=null;function bf(t,e,n,i){if(Uc=null,t=am(i),t=us(t),t!==null)if(e=Ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ub(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Uc=t,null}function tS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RI()){case lm:return 1;case Kb:return 4;case jc:case MI:return 16;case Gb:return 536870912;default:return 16}default:return 16}}var fi=null,dm=null,pc=null;function nS(){if(pc)return pc;var t,e=dm,n=e.length,i,s="value"in fi?fi.value:fi.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return pc=s.slice(t,1<i?1-i:void 0)}function mc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function s_(){return!1}function Rt(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ml:s_,this.isPropagationStopped=s_,this}return _e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fm=Rt(Xr),nl=_e({},Xr,{view:0,detail:0}),$I=Rt(nl),Kh,Gh,uo,Xu=_e({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(Kh=t.screenX-uo.screenX,Gh=t.screenY-uo.screenY):Gh=Kh=0,uo=t),Kh)},movementY:function(t){return"movementY"in t?t.movementY:Gh}}),r_=Rt(Xu),KI=_e({},Xu,{dataTransfer:0}),GI=Rt(KI),YI=_e({},nl,{relatedTarget:0}),Yh=Rt(YI),qI=_e({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),QI=Rt(qI),XI=_e({},Xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JI=Rt(XI),ZI=_e({},Xr,{data:0}),o_=Rt(ZI),eA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nA[t])?!!e[t]:!1}function pm(){return iA}var sA=_e({},nl,{key:function(t){if(t.key){var e=eA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pm,charCode:function(t){return t.type==="keypress"?mc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rA=Rt(sA),oA=_e({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a_=Rt(oA),aA=_e({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pm}),lA=Rt(aA),cA=_e({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),uA=Rt(cA),hA=_e({},Xu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dA=Rt(hA),fA=[9,13,27,32],mm=Hn&&"CompositionEvent"in window,Uo=null;Hn&&"documentMode"in document&&(Uo=document.documentMode);var pA=Hn&&"TextEvent"in window&&!Uo,iS=Hn&&(!mm||Uo&&8<Uo&&11>=Uo),l_=String.fromCharCode(32),c_=!1;function sS(t,e){switch(t){case"keyup":return fA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ir=!1;function mA(t,e){switch(t){case"compositionend":return rS(e);case"keypress":return e.which!==32?null:(c_=!0,l_);case"textInput":return t=e.data,t===l_&&c_?null:t;default:return null}}function gA(t,e){if(ir)return t==="compositionend"||!mm&&sS(t,e)?(t=nS(),pc=dm=fi=null,ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iS&&e.locale!=="ko"?null:e.data;default:return null}}var yA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yA[t.type]:e==="textarea"}function oS(t,e,n,i){Fb(i),e=Wc(e,"onChange"),0<e.length&&(n=new fm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Wo=null,ya=null;function _A(t){yS(t,0)}function Ju(t){var e=or(t);if(Ab(e))return t}function vA(t,e){if(t==="change")return e}var aS=!1;if(Hn){var qh;if(Hn){var Qh="oninput"in document;if(!Qh){var h_=document.createElement("div");h_.setAttribute("oninput","return;"),Qh=typeof h_.oninput=="function"}qh=Qh}else qh=!1;aS=qh&&(!document.documentMode||9<document.documentMode)}function d_(){Wo&&(Wo.detachEvent("onpropertychange",lS),ya=Wo=null)}function lS(t){if(t.propertyName==="value"&&Ju(ya)){var e=[];oS(e,ya,t,am(t)),zb(_A,e)}}function wA(t,e,n){t==="focusin"?(d_(),Wo=e,ya=n,Wo.attachEvent("onpropertychange",lS)):t==="focusout"&&d_()}function xA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ju(ya)}function bA(t,e){if(t==="click")return Ju(e)}function SA(t,e){if(t==="input"||t==="change")return Ju(e)}function EA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:EA;function _a(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!sf.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function f_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p_(t,e){var n=f_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f_(n)}}function cS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uS(){for(var t=window,e=Lc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lc(t.document)}return e}function gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CA(t){var e=uS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cS(n.ownerDocument.documentElement,n)){if(i!==null&&gm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=p_(n,r);var o=p_(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var TA=Hn&&"documentMode"in document&&11>=document.documentMode,sr=null,Sf=null,Ho=null,Ef=!1;function m_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ef||sr==null||sr!==Lc(i)||(i=sr,"selectionStart"in i&&gm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ho&&_a(Ho,i)||(Ho=i,i=Wc(Sf,"onSelect"),0<i.length&&(e=new fm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=sr)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rr={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},Xh={},hS={};Hn&&(hS=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function Zu(t){if(Xh[t])return Xh[t];if(!rr[t])return t;var e=rr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hS)return Xh[t]=e[n];return t}var dS=Zu("animationend"),fS=Zu("animationiteration"),pS=Zu("animationstart"),mS=Zu("transitionend"),gS=new Map,g_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wi(t,e){gS.set(t,e),Us(e,[t])}for(var Jh=0;Jh<g_.length;Jh++){var Zh=g_[Jh],kA=Zh.toLowerCase(),PA=Zh[0].toUpperCase()+Zh.slice(1);Wi(kA,"on"+PA)}Wi(dS,"onAnimationEnd");Wi(fS,"onAnimationIteration");Wi(pS,"onAnimationStart");Wi("dblclick","onDoubleClick");Wi("focusin","onFocus");Wi("focusout","onBlur");Wi(mS,"onTransitionEnd");Nr("onMouseEnter",["mouseout","mouseover"]);Nr("onMouseLeave",["mouseout","mouseover"]);Nr("onPointerEnter",["pointerout","pointerover"]);Nr("onPointerLeave",["pointerout","pointerover"]);Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Us("onBeforeInput",["compositionend","keypress","textInput","paste"]);Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function y_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,kI(i,e,void 0,t),t.currentTarget=null}function yS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;y_(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;y_(s,a,c),r=l}}}if(Vc)throw t=vf,Vc=!1,vf=null,t}function le(t,e){var n=e[If];n===void 0&&(n=e[If]=new Set);var i=t+"__bubble";n.has(i)||(_S(e,t,2,!1),n.add(i))}function ed(t,e,n){var i=0;e&&(i|=4),_S(n,t,i,e)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function va(t){if(!t[Ol]){t[Ol]=!0,Cb.forEach(function(n){n!=="selectionchange"&&(IA.has(n)||ed(n,!1,t),ed(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ol]||(e[Ol]=!0,ed("selectionchange",!1,e))}}function _S(t,e,n,i){switch(tS(e)){case 1:var s=WI;break;case 4:s=HI;break;default:s=hm}n=s.bind(null,e,n,t),s=void 0,!_f||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function td(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=us(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}zb(function(){var c=r,u=am(n),h=[];e:{var d=gS.get(t);if(d!==void 0){var f=fm,p=t;switch(t){case"keypress":if(mc(n)===0)break e;case"keydown":case"keyup":f=rA;break;case"focusin":p="focus",f=Yh;break;case"focusout":p="blur",f=Yh;break;case"beforeblur":case"afterblur":f=Yh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=r_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=GI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=lA;break;case dS:case fS:case pS:f=QI;break;case mS:f=uA;break;case"scroll":f=$I;break;case"wheel":f=dA;break;case"copy":case"cut":case"paste":f=JI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=a_}var m=(e&4)!==0,_=!m&&t==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var y=c,v;y!==null;){v=y;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,g!==null&&(x=fa(y,g),x!=null&&m.push(wa(y,x,v)))),_)break;y=y.return}0<m.length&&(d=new f(d,p,null,n,u),h.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==gf&&(p=n.relatedTarget||n.fromElement)&&(us(p)||p[$n]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?us(p):null,p!==null&&(_=Ws(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=r_,x="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=a_,x="onPointerLeave",g="onPointerEnter",y="pointer"),_=f==null?d:or(f),v=p==null?d:or(p),d=new m(x,y+"leave",f,n,u),d.target=_,d.relatedTarget=v,x=null,us(u)===c&&(m=new m(g,y+"enter",p,n,u),m.target=v,m.relatedTarget=_,x=m),_=x,f&&p)t:{for(m=f,g=p,y=0,v=m;v;v=Xs(v))y++;for(v=0,x=g;x;x=Xs(x))v++;for(;0<y-v;)m=Xs(m),y--;for(;0<v-y;)g=Xs(g),v--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=Xs(m),g=Xs(g)}m=null}else m=null;f!==null&&__(h,d,f,m,!1),p!==null&&_!==null&&__(h,_,p,m,!0)}}e:{if(d=c?or(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=vA;else if(u_(d))if(aS)w=SA;else{w=xA;var S=wA}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=bA);if(w&&(w=w(t,c))){oS(h,w,n,u);break e}S&&S(t,d,c),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&hf(d,"number",d.value)}switch(S=c?or(c):window,t){case"focusin":(u_(S)||S.contentEditable==="true")&&(sr=S,Sf=c,Ho=null);break;case"focusout":Ho=Sf=sr=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,m_(h,n,u);break;case"selectionchange":if(TA)break;case"keydown":case"keyup":m_(h,n,u)}var E;if(mm)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ir?sS(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(iS&&n.locale!=="ko"&&(ir||b!=="onCompositionStart"?b==="onCompositionEnd"&&ir&&(E=nS()):(fi=u,dm="value"in fi?fi.value:fi.textContent,ir=!0)),S=Wc(c,b),0<S.length&&(b=new o_(b,t,null,n,u),h.push({event:b,listeners:S}),E?b.data=E:(E=rS(n),E!==null&&(b.data=E)))),(E=pA?mA(t,n):gA(t,n))&&(c=Wc(c,"onBeforeInput"),0<c.length&&(u=new o_("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=E))}yS(h,e)})}function wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=fa(t,n),r!=null&&i.unshift(wa(t,r,s)),r=fa(t,e),r!=null&&i.push(wa(t,r,s))),t=t.return}return i}function Xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function __(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=fa(n,r),l!=null&&o.unshift(wa(n,l,a))):s||(l=fa(n,r),l!=null&&o.push(wa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AA=/\r\n?/g,RA=/\u0000|\uFFFD/g;function v_(t){return(typeof t=="string"?t:""+t).replace(AA,`
`).replace(RA,"")}function Nl(t,e,n){if(e=v_(e),v_(t)!==e&&n)throw Error(I(425))}function Hc(){}var Cf=null,Tf=null;function kf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pf=typeof setTimeout=="function"?setTimeout:void 0,MA=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,DA=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(OA)}:Pf;function OA(t){setTimeout(function(){throw t})}function nd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),ga(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);ga(e)}function bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),mn="__reactFiber$"+Jr,xa="__reactProps$"+Jr,$n="__reactContainer$"+Jr,If="__reactEvents$"+Jr,NA="__reactListeners$"+Jr,LA="__reactHandles$"+Jr;function us(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x_(t);t!==null;){if(n=t[mn])return n;t=x_(t)}return e}t=n,n=t.parentNode}return null}function il(t){return t=t[mn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function or(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function eh(t){return t[xa]||null}var Af=[],ar=-1;function Hi(t){return{current:t}}function ue(t){0>ar||(t.current=Af[ar],Af[ar]=null,ar--)}function re(t,e){ar++,Af[ar]=t.current,t.current=e}var Di={},Je=Hi(Di),pt=Hi(!1),Ts=Di;function Lr(t,e){var n=t.type.contextTypes;if(!n)return Di;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mt(t){return t=t.childContextTypes,t!=null}function $c(){ue(pt),ue(Je)}function b_(t,e,n){if(Je.current!==Di)throw Error(I(168));re(Je,e),re(pt,n)}function vS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(I(108,wI(t)||"Unknown",s));return _e({},n,i)}function Kc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Di,Ts=Je.current,re(Je,t),re(pt,pt.current),!0}function S_(t,e,n){var i=t.stateNode;if(!i)throw Error(I(169));n?(t=vS(t,e,Ts),i.__reactInternalMemoizedMergedChildContext=t,ue(pt),ue(Je),re(Je,t)):ue(pt),re(pt,n)}var An=null,th=!1,id=!1;function wS(t){An===null?An=[t]:An.push(t)}function FA(t){th=!0,wS(t)}function $i(){if(!id&&An!==null){id=!0;var t=0,e=Z;try{var n=An;for(Z=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}An=null,th=!1}catch(s){throw An!==null&&(An=An.slice(t+1)),$b(lm,$i),s}finally{Z=e,id=!1}}return null}var lr=[],cr=0,Gc=null,Yc=0,Nt=[],Lt=0,ks=null,Mn=1,Dn="";function ns(t,e){lr[cr++]=Yc,lr[cr++]=Gc,Gc=t,Yc=e}function xS(t,e,n){Nt[Lt++]=Mn,Nt[Lt++]=Dn,Nt[Lt++]=ks,ks=t;var i=Mn;t=Dn;var s=32-en(i)-1;i&=~(1<<s),n+=1;var r=32-en(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Mn=1<<32-en(e)+s|n<<s|i,Dn=r+t}else Mn=1<<r|n<<s|i,Dn=t}function ym(t){t.return!==null&&(ns(t,1),xS(t,1,0))}function _m(t){for(;t===Gc;)Gc=lr[--cr],lr[cr]=null,Yc=lr[--cr],lr[cr]=null;for(;t===ks;)ks=Nt[--Lt],Nt[Lt]=null,Dn=Nt[--Lt],Nt[Lt]=null,Mn=Nt[--Lt],Nt[Lt]=null}var Ct=null,bt=null,de=!1,Qt=null;function bS(t,e){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,bt=bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:Mn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,bt=null,!0):!1;default:return!1}}function Rf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mf(t){if(de){var e=bt;if(e){var n=e;if(!E_(t,e)){if(Rf(t))throw Error(I(418));e=bi(n.nextSibling);var i=Ct;e&&E_(t,e)?bS(i,n):(t.flags=t.flags&-4097|2,de=!1,Ct=t)}}else{if(Rf(t))throw Error(I(418));t.flags=t.flags&-4097|2,de=!1,Ct=t}}}function C_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function Ll(t){if(t!==Ct)return!1;if(!de)return C_(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kf(t.type,t.memoizedProps)),e&&(e=bt)){if(Rf(t))throw SS(),Error(I(418));for(;e;)bS(t,e),e=bi(e.nextSibling)}if(C_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bt=bi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bt=null}}else bt=Ct?bi(t.stateNode.nextSibling):null;return!0}function SS(){for(var t=bt;t;)t=bi(t.nextSibling)}function Fr(){bt=Ct=null,de=!1}function vm(t){Qt===null?Qt=[t]:Qt.push(t)}var VA=Jn.ReactCurrentBatchConfig;function ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var i=n.stateNode}if(!i)throw Error(I(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function Fl(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function T_(t){var e=t._init;return e(t._payload)}function ES(t){function e(g,y){if(t){var v=g.deletions;v===null?(g.deletions=[y],g.flags|=16):v.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=Ti(g,y),g.index=0,g.sibling=null,g}function r(g,y,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<y?(g.flags|=2,y):v):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,v,x){return y===null||y.tag!==6?(y=ud(v,g.mode,x),y.return=g,y):(y=s(y,v),y.return=g,y)}function l(g,y,v,x){var w=v.type;return w===nr?u(g,y,v.props.children,x,v.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ri&&T_(w)===y.type)?(x=s(y,v.props),x.ref=ho(g,y,v),x.return=g,x):(x=bc(v.type,v.key,v.props,null,g.mode,x),x.ref=ho(g,y,v),x.return=g,x)}function c(g,y,v,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=hd(v,g.mode,x),y.return=g,y):(y=s(y,v.children||[]),y.return=g,y)}function u(g,y,v,x,w){return y===null||y.tag!==7?(y=ws(v,g.mode,x,w),y.return=g,y):(y=s(y,v),y.return=g,y)}function h(g,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ud(""+y,g.mode,v),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tl:return v=bc(y.type,y.key,y.props,null,g.mode,v),v.ref=ho(g,null,y),v.return=g,v;case tr:return y=hd(y,g.mode,v),y.return=g,y;case ri:var x=y._init;return h(g,x(y._payload),v)}if(Io(y)||oo(y))return y=ws(y,g.mode,v,null),y.return=g,y;Fl(g,y)}return null}function d(g,y,v,x){var w=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:a(g,y,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Tl:return v.key===w?l(g,y,v,x):null;case tr:return v.key===w?c(g,y,v,x):null;case ri:return w=v._init,d(g,y,w(v._payload),x)}if(Io(v)||oo(v))return w!==null?null:u(g,y,v,x,null);Fl(g,v)}return null}function f(g,y,v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(v)||null,a(y,g,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Tl:return g=g.get(x.key===null?v:x.key)||null,l(y,g,x,w);case tr:return g=g.get(x.key===null?v:x.key)||null,c(y,g,x,w);case ri:var S=x._init;return f(g,y,v,S(x._payload),w)}if(Io(x)||oo(x))return g=g.get(v)||null,u(y,g,x,w,null);Fl(y,x)}return null}function p(g,y,v,x){for(var w=null,S=null,E=y,b=y=0,P=null;E!==null&&b<v.length;b++){E.index>b?(P=E,E=null):P=E.sibling;var T=d(g,E,v[b],x);if(T===null){E===null&&(E=P);break}t&&E&&T.alternate===null&&e(g,E),y=r(T,y,b),S===null?w=T:S.sibling=T,S=T,E=P}if(b===v.length)return n(g,E),de&&ns(g,b),w;if(E===null){for(;b<v.length;b++)E=h(g,v[b],x),E!==null&&(y=r(E,y,b),S===null?w=E:S.sibling=E,S=E);return de&&ns(g,b),w}for(E=i(g,E);b<v.length;b++)P=f(E,g,b,v[b],x),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?b:P.key),y=r(P,y,b),S===null?w=P:S.sibling=P,S=P);return t&&E.forEach(function(M){return e(g,M)}),de&&ns(g,b),w}function m(g,y,v,x){var w=oo(v);if(typeof w!="function")throw Error(I(150));if(v=w.call(v),v==null)throw Error(I(151));for(var S=w=null,E=y,b=y=0,P=null,T=v.next();E!==null&&!T.done;b++,T=v.next()){E.index>b?(P=E,E=null):P=E.sibling;var M=d(g,E,T.value,x);if(M===null){E===null&&(E=P);break}t&&E&&M.alternate===null&&e(g,E),y=r(M,y,b),S===null?w=M:S.sibling=M,S=M,E=P}if(T.done)return n(g,E),de&&ns(g,b),w;if(E===null){for(;!T.done;b++,T=v.next())T=h(g,T.value,x),T!==null&&(y=r(T,y,b),S===null?w=T:S.sibling=T,S=T);return de&&ns(g,b),w}for(E=i(g,E);!T.done;b++,T=v.next())T=f(E,g,b,T.value,x),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?b:T.key),y=r(T,y,b),S===null?w=T:S.sibling=T,S=T);return t&&E.forEach(function(B){return e(g,B)}),de&&ns(g,b),w}function _(g,y,v,x){if(typeof v=="object"&&v!==null&&v.type===nr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Tl:e:{for(var w=v.key,S=y;S!==null;){if(S.key===w){if(w=v.type,w===nr){if(S.tag===7){n(g,S.sibling),y=s(S,v.props.children),y.return=g,g=y;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ri&&T_(w)===S.type){n(g,S.sibling),y=s(S,v.props),y.ref=ho(g,S,v),y.return=g,g=y;break e}n(g,S);break}else e(g,S);S=S.sibling}v.type===nr?(y=ws(v.props.children,g.mode,x,v.key),y.return=g,g=y):(x=bc(v.type,v.key,v.props,null,g.mode,x),x.ref=ho(g,y,v),x.return=g,g=x)}return o(g);case tr:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(g,y.sibling),y=s(y,v.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=hd(v,g.mode,x),y.return=g,g=y}return o(g);case ri:return S=v._init,_(g,y,S(v._payload),x)}if(Io(v))return p(g,y,v,x);if(oo(v))return m(g,y,v,x);Fl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,v),y.return=g,g=y):(n(g,y),y=ud(v,g.mode,x),y.return=g,g=y),o(g)):n(g,y)}return _}var Vr=ES(!0),CS=ES(!1),qc=Hi(null),Qc=null,ur=null,wm=null;function xm(){wm=ur=Qc=null}function bm(t){var e=qc.current;ue(qc),t._currentValue=e}function Df(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Tr(t,e){Qc=t,wm=ur=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(wm!==t)if(t={context:t,memoizedValue:e,next:null},ur===null){if(Qc===null)throw Error(I(308));ur=t,Qc.dependencies={lanes:0,firstContext:t}}else ur=ur.next=t;return e}var hs=null;function Sm(t){hs===null?hs=[t]:hs.push(t)}function TS(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Sm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Kn(t,i)}function Kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var oi=!1;function Em(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Si(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,K&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Kn(t,n)}return s=i.interleaved,s===null?(e.next=e,Sm(i)):(e.next=s.next,s.next=e),i.interleaved=e,Kn(t,n)}function gc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cm(t,n)}}function k_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xc(t,e,n,i){var s=t.updateQueue;oi=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(d=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=_e({},h,d);break e;case 2:oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Is|=o,t.lanes=o,t.memoizedState=h}}function P_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(I(191,s));s.call(i)}}}var sl={},yn=Hi(sl),ba=Hi(sl),Sa=Hi(sl);function ds(t){if(t===sl)throw Error(I(174));return t}function Cm(t,e){switch(re(Sa,e),re(ba,t),re(yn,sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ff(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ff(e,t)}ue(yn),re(yn,e)}function jr(){ue(yn),ue(ba),ue(Sa)}function PS(t){ds(Sa.current);var e=ds(yn.current),n=ff(e,t.type);e!==n&&(re(ba,t),re(yn,n))}function Tm(t){ba.current===t&&(ue(yn),ue(ba))}var me=Hi(0);function Jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sd=[];function km(){for(var t=0;t<sd.length;t++)sd[t]._workInProgressVersionPrimary=null;sd.length=0}var yc=Jn.ReactCurrentDispatcher,rd=Jn.ReactCurrentBatchConfig,Ps=0,ye=null,Pe=null,Oe=null,Zc=!1,$o=!1,Ea=0,jA=0;function $e(){throw Error(I(321))}function Pm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function Im(t,e,n,i,s,r){if(Ps=r,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yc.current=t===null||t.memoizedState===null?WA:HA,t=n(i,s),$o){r=0;do{if($o=!1,Ea=0,25<=r)throw Error(I(301));r+=1,Oe=Pe=null,e.updateQueue=null,yc.current=$A,t=n(i,s)}while($o)}if(yc.current=eu,e=Pe!==null&&Pe.next!==null,Ps=0,Oe=Pe=ye=null,Zc=!1,e)throw Error(I(300));return t}function Am(){var t=Ea!==0;return Ea=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?ye.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function Ht(){if(Pe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=Oe===null?ye.memoizedState:Oe.next;if(e!==null)Oe=e,Pe=t;else{if(t===null)throw Error(I(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Oe===null?ye.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function Ca(t,e){return typeof e=="function"?e(t):e}function od(t){var e=Ht(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var i=Pe,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((Ps&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,ye.lanes|=u,Is|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,sn(i,e.memoizedState)||(dt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,ye.lanes|=r,Is|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ad(t){var e=Ht(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);sn(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function IS(){}function AS(t,e){var n=ye,i=Ht(),s=e(),r=!sn(i.memoizedState,s);if(r&&(i.memoizedState=s,dt=!0),i=i.queue,Rm(DS.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,Ta(9,MS.bind(null,n,i,s,e),void 0,null),Ve===null)throw Error(I(349));Ps&30||RS(n,e,s)}return s}function RS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MS(t,e,n,i){e.value=n,e.getSnapshot=i,OS(e)&&NS(t)}function DS(t,e,n){return n(function(){OS(e)&&NS(t)})}function OS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function NS(t){var e=Kn(t,1);e!==null&&tn(e,t,1,-1)}function I_(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:t},e.queue=t,t=t.dispatch=UA.bind(null,ye,t),[e.memoizedState,t]}function Ta(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function LS(){return Ht().memoizedState}function _c(t,e,n,i){var s=fn();ye.flags|=t,s.memoizedState=Ta(1|e,n,void 0,i===void 0?null:i)}function nh(t,e,n,i){var s=Ht();i=i===void 0?null:i;var r=void 0;if(Pe!==null){var o=Pe.memoizedState;if(r=o.destroy,i!==null&&Pm(i,o.deps)){s.memoizedState=Ta(e,n,r,i);return}}ye.flags|=t,s.memoizedState=Ta(1|e,n,r,i)}function A_(t,e){return _c(8390656,8,t,e)}function Rm(t,e){return nh(2048,8,t,e)}function FS(t,e){return nh(4,2,t,e)}function VS(t,e){return nh(4,4,t,e)}function jS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BS(t,e,n){return n=n!=null?n.concat([t]):null,nh(4,4,jS.bind(null,e,t),n)}function Mm(){}function zS(t,e){var n=Ht();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function US(t,e){var n=Ht();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function WS(t,e,n){return Ps&21?(sn(n,e)||(n=Yb(),ye.lanes|=n,Is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function BA(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var i=rd.transition;rd.transition={};try{t(!1),e()}finally{Z=n,rd.transition=i}}function HS(){return Ht().memoizedState}function zA(t,e,n){var i=Ci(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$S(t))KS(e,n);else if(n=TS(t,e,n,i),n!==null){var s=rt();tn(n,t,i,s),GS(n,e,i)}}function UA(t,e,n){var i=Ci(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($S(t))KS(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,sn(a,o)){var l=e.interleaved;l===null?(s.next=s,Sm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=TS(t,e,s,i),n!==null&&(s=rt(),tn(n,t,i,s),GS(n,e,i))}}function $S(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function KS(t,e){$o=Zc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cm(t,n)}}var eu={readContext:Wt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},WA={readContext:Wt,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:A_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_c(4194308,4,jS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _c(4194308,4,t,e)},useInsertionEffect:function(t,e){return _c(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=fn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=zA.bind(null,ye,t),[i.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:I_,useDebugValue:Mm,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=I_(!1),e=t[0];return t=BA.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ye,s=fn();if(de){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),Ve===null)throw Error(I(349));Ps&30||RS(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,A_(DS.bind(null,i,r,t),[t]),i.flags|=2048,Ta(9,MS.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=fn(),e=Ve.identifierPrefix;if(de){var n=Dn,i=Mn;n=(i&~(1<<32-en(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ea++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HA={readContext:Wt,useCallback:zS,useContext:Wt,useEffect:Rm,useImperativeHandle:BS,useInsertionEffect:FS,useLayoutEffect:VS,useMemo:US,useReducer:od,useRef:LS,useState:function(){return od(Ca)},useDebugValue:Mm,useDeferredValue:function(t){var e=Ht();return WS(e,Pe.memoizedState,t)},useTransition:function(){var t=od(Ca)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:IS,useSyncExternalStore:AS,useId:HS,unstable_isNewReconciler:!1},$A={readContext:Wt,useCallback:zS,useContext:Wt,useEffect:Rm,useImperativeHandle:BS,useInsertionEffect:FS,useLayoutEffect:VS,useMemo:US,useReducer:ad,useRef:LS,useState:function(){return ad(Ca)},useDebugValue:Mm,useDeferredValue:function(t){var e=Ht();return Pe===null?e.memoizedState=t:WS(e,Pe.memoizedState,t)},useTransition:function(){var t=ad(Ca)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:IS,useSyncExternalStore:AS,useId:HS,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=_e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Of(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:_e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ih={isMounted:function(t){return(t=t._reactInternals)?Ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=rt(),s=Ci(t),r=jn(i,s);r.payload=e,n!=null&&(r.callback=n),e=Si(t,r,s),e!==null&&(tn(e,t,s,i),gc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=rt(),s=Ci(t),r=jn(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Si(t,r,s),e!==null&&(tn(e,t,s,i),gc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rt(),i=Ci(t),s=jn(n,i);s.tag=2,e!=null&&(s.callback=e),e=Si(t,s,i),e!==null&&(tn(e,t,i,n),gc(e,t,i))}};function R_(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!_a(n,i)||!_a(s,r):!0}function YS(t,e,n){var i=!1,s=Di,r=e.contextType;return typeof r=="object"&&r!==null?r=Wt(r):(s=mt(e)?Ts:Je.current,i=e.contextTypes,r=(i=i!=null)?Lr(t,s):Di),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ih,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function M_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ih.enqueueReplaceState(e,e.state,null)}function Nf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Em(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Wt(r):(r=mt(e)?Ts:Je.current,s.context=Lr(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Of(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ih.enqueueReplaceState(s,s.state,null),Xc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Br(t,e){try{var n="",i=e;do n+=vI(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function ld(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KA=typeof WeakMap=="function"?WeakMap:Map;function qS(t,e,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){nu||(nu=!0,Kf=i),Lf(t,e)},n}function QS(t,e,n){n=jn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Lf(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Lf(t,e),typeof i!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function D_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new KA;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=oR.bind(null,t,e,n),e.then(t,t))}function O_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function N_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jn(-1,1),e.tag=2,Si(n,e,1))),n.lanes|=1),t)}var GA=Jn.ReactCurrentOwner,dt=!1;function nt(t,e,n,i){e.child=t===null?CS(e,null,n,i):Vr(e,t.child,n,i)}function L_(t,e,n,i,s){n=n.render;var r=e.ref;return Tr(e,s),i=Im(t,e,n,i,r,s),n=Am(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(de&&n&&ym(e),e.flags|=1,nt(t,e,i,s),e.child)}function F_(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!Bm(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,XS(t,e,r,i,s)):(t=bc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:_a,n(o,i)&&t.ref===e.ref)return Gn(t,e,s)}return e.flags|=1,t=Ti(r,i),t.ref=e.ref,t.return=e,e.child=t}function XS(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(_a(r,i)&&t.ref===e.ref)if(dt=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,Gn(t,e,s)}return Ff(t,e,n,i,s)}function JS(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(dr,xt),xt|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(dr,xt),xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,re(dr,xt),xt|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,re(dr,xt),xt|=i;return nt(t,e,s,n),e.child}function ZS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ff(t,e,n,i,s){var r=mt(n)?Ts:Je.current;return r=Lr(e,r),Tr(e,s),n=Im(t,e,n,i,r,s),i=Am(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(de&&i&&ym(e),e.flags|=1,nt(t,e,n,s),e.child)}function V_(t,e,n,i,s){if(mt(n)){var r=!0;Kc(e)}else r=!1;if(Tr(e,s),e.stateNode===null)vc(t,e),YS(e,n,i),Nf(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Wt(c):(c=mt(n)?Ts:Je.current,c=Lr(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&M_(e,o,i,c),oi=!1;var d=e.memoizedState;o.state=d,Xc(e,i,o,s),l=e.memoizedState,a!==i||d!==l||pt.current||oi?(typeof u=="function"&&(Of(e,n,u,i),l=e.memoizedState),(a=oi||R_(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,kS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Gt(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Wt(l):(l=mt(n)?Ts:Je.current,l=Lr(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&M_(e,o,i,l),oi=!1,d=e.memoizedState,o.state=d,Xc(e,i,o,s);var p=e.memoizedState;a!==h||d!==p||pt.current||oi?(typeof f=="function"&&(Of(e,n,f,i),p=e.memoizedState),(c=oi||R_(e,n,c,i,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Vf(t,e,n,i,r,s)}function Vf(t,e,n,i,s,r){ZS(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&S_(e,n,!1),Gn(t,e,r);i=e.stateNode,GA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Vr(e,t.child,null,r),e.child=Vr(e,null,a,r)):nt(t,e,a,r),e.memoizedState=i.state,s&&S_(e,n,!0),e.child}function eE(t){var e=t.stateNode;e.pendingContext?b_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&b_(t,e.context,!1),Cm(t,e.containerInfo)}function j_(t,e,n,i,s){return Fr(),vm(s),e.flags|=256,nt(t,e,n,i),e.child}var jf={dehydrated:null,treeContext:null,retryLane:0};function Bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function tE(t,e,n){var i=e.pendingProps,s=me.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),re(me,s&1),t===null)return Mf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=oh(o,i,0,null),t=ws(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Bf(n),e.memoizedState=jf,t):Dm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return YA(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ti(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Ti(a,r):(r=ws(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?Bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=jf,i}return r=t.child,t=r.sibling,i=Ti(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Dm(t,e){return e=oh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,i){return i!==null&&vm(i),Vr(e,t.child,null,n),t=Dm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function YA(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=ld(Error(I(422))),Vl(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=oh({mode:"visible",children:i.children},s,0,null),r=ws(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Vr(e,t.child,null,o),e.child.memoizedState=Bf(o),e.memoizedState=jf,r);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(I(419)),i=ld(r,i,void 0),Vl(t,e,o,i)}if(a=(o&t.childLanes)!==0,dt||a){if(i=Ve,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Kn(t,s),tn(i,t,s,-1))}return jm(),i=ld(Error(I(421))),Vl(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aR.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,bt=bi(s.nextSibling),Ct=e,de=!0,Qt=null,t!==null&&(Nt[Lt++]=Mn,Nt[Lt++]=Dn,Nt[Lt++]=ks,Mn=t.id,Dn=t.overflow,ks=e),e=Dm(e,i.children),e.flags|=4096,e)}function B_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Df(t.return,e,n)}function cd(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function nE(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(nt(t,e,i.children,n),i=me.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B_(t,n,e);else if(t.tag===19)B_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(re(me,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cd(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cd(e,!0,n,null,r);break;case"together":cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=Ti(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ti(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qA(t,e,n){switch(e.tag){case 3:eE(e),Fr();break;case 5:PS(e);break;case 1:mt(e.type)&&Kc(e);break;case 4:Cm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;re(qc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(re(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?tE(t,e,n):(re(me,me.current&1),t=Gn(t,e,n),t!==null?t.sibling:null);re(me,me.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return nE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),re(me,me.current),i)break;return null;case 22:case 23:return e.lanes=0,JS(t,e,n)}return Gn(t,e,n)}var iE,zf,sE,rE;iE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zf=function(){};sE=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ds(yn.current);var r=null;switch(n){case"input":s=cf(t,s),i=cf(t,i),r=[];break;case"select":s=_e({},s,{value:void 0}),i=_e({},i,{value:void 0}),r=[];break;case"textarea":s=df(t,s),i=df(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Hc)}pf(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ha.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ha.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&le("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};rE=function(t,e,n,i){n!==i&&(e.flags|=4)};function fo(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function QA(t,e,n){var i=e.pendingProps;switch(_m(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return mt(e.type)&&$c(),Ke(e),null;case 3:return i=e.stateNode,jr(),ue(pt),ue(Je),km(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qt!==null&&(qf(Qt),Qt=null))),zf(t,e),Ke(e),null;case 5:Tm(e);var s=ds(Sa.current);if(n=e.type,t!==null&&e.stateNode!=null)sE(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(I(166));return Ke(e),null}if(t=ds(yn.current),Ll(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[mn]=e,i[xa]=r,t=(e.mode&1)!==0,n){case"dialog":le("cancel",i),le("close",i);break;case"iframe":case"object":case"embed":le("load",i);break;case"video":case"audio":for(s=0;s<Ro.length;s++)le(Ro[s],i);break;case"source":le("error",i);break;case"img":case"image":case"link":le("error",i),le("load",i);break;case"details":le("toggle",i);break;case"input":qy(i,r),le("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},le("invalid",i);break;case"textarea":Xy(i,r),le("invalid",i)}pf(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Nl(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Nl(i.textContent,a,t),s=["children",""+a]):ha.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&le("scroll",i)}switch(n){case"input":kl(i),Qy(i,r,!0);break;case"textarea":kl(i),Jy(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Hc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Db(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[mn]=e,t[xa]=i,iE(t,e,!1,!1),e.stateNode=t;e:{switch(o=mf(n,i),n){case"dialog":le("cancel",t),le("close",t),s=i;break;case"iframe":case"object":case"embed":le("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ro.length;s++)le(Ro[s],t);s=i;break;case"source":le("error",t),s=i;break;case"img":case"image":case"link":le("error",t),le("load",t),s=i;break;case"details":le("toggle",t),s=i;break;case"input":qy(t,i),s=cf(t,i),le("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=_e({},i,{value:void 0}),le("invalid",t);break;case"textarea":Xy(t,i),s=df(t,i),le("invalid",t);break;default:s=i}pf(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?Lb(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ob(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&da(t,l):typeof l=="number"&&da(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ha.hasOwnProperty(r)?l!=null&&r==="onScroll"&&le("scroll",t):l!=null&&im(t,r,l,o))}switch(n){case"input":kl(t),Qy(t,i,!1);break;case"textarea":kl(t),Jy(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Mi(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?br(t,!!i.multiple,r,!1):i.defaultValue!=null&&br(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)rE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(I(166));if(n=ds(Sa.current),ds(yn.current),Ll(e)){if(i=e.stateNode,n=e.memoizedProps,i[mn]=e,(r=i.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:Nl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nl(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[mn]=e,e.stateNode=i}return Ke(e),null;case 13:if(ue(me),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&bt!==null&&e.mode&1&&!(e.flags&128))SS(),Fr(),e.flags|=98560,r=!1;else if(r=Ll(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(I(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[mn]=e}else Fr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),r=!1}else Qt!==null&&(qf(Qt),Qt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?Re===0&&(Re=3):jm())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return jr(),zf(t,e),t===null&&va(e.stateNode.containerInfo),Ke(e),null;case 10:return bm(e.type._context),Ke(e),null;case 17:return mt(e.type)&&$c(),Ke(e),null;case 19:if(ue(me),r=e.memoizedState,r===null)return Ke(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)fo(r,!1);else{if(Re!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jc(t),o!==null){for(e.flags|=128,fo(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(me,me.current&1|2),e.child}t=t.sibling}r.tail!==null&&Ce()>zr&&(e.flags|=128,i=!0,fo(r,!1),e.lanes=4194304)}else{if(!i)if(t=Jc(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fo(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!de)return Ke(e),null}else 2*Ce()-r.renderingStartTime>zr&&n!==1073741824&&(e.flags|=128,i=!0,fo(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ce(),e.sibling=null,n=me.current,re(me,i?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return Vm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?xt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function XA(t,e){switch(_m(e),e.tag){case 1:return mt(e.type)&&$c(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jr(),ue(pt),ue(Je),km(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tm(e),null;case 13:if(ue(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));Fr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(me),null;case 4:return jr(),null;case 10:return bm(e.type._context),null;case 22:case 23:return Vm(),null;case 24:return null;default:return null}}var jl=!1,qe=!1,JA=typeof WeakSet=="function"?WeakSet:Set,D=null;function hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){be(t,e,i)}else n.current=null}function Uf(t,e,n){try{n()}catch(i){be(t,e,i)}}var z_=!1;function ZA(t,e){if(Cf=zc,t=uS(),gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==r||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===s&&(a=o),d===r&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tf={focusedElem:t,selectionRange:n},zc=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,_=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Gt(e.type,m),_);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(x){be(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return p=z_,z_=!1,p}function Ko(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&Uf(e,n,r)}s=s.next}while(s!==i)}}function sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oE(t){var e=t.alternate;e!==null&&(t.alternate=null,oE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[xa],delete e[If],delete e[NA],delete e[LA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aE(t){return t.tag===5||t.tag===3||t.tag===4}function U_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hc));else if(i!==4&&(t=t.child,t!==null))for(Hf(t,e,n),t=t.sibling;t!==null;)Hf(t,e,n),t=t.sibling}function $f(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for($f(t,e,n),t=t.sibling;t!==null;)$f(t,e,n),t=t.sibling}var Be=null,Yt=!1;function ei(t,e,n){for(n=n.child;n!==null;)lE(t,e,n),n=n.sibling}function lE(t,e,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Qu,n)}catch{}switch(n.tag){case 5:qe||hr(n,e);case 6:var i=Be,s=Yt;Be=null,ei(t,e,n),Be=i,Yt=s,Be!==null&&(Yt?(t=Be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&(Yt?(t=Be,n=n.stateNode,t.nodeType===8?nd(t.parentNode,n):t.nodeType===1&&nd(t,n),ga(t)):nd(Be,n.stateNode));break;case 4:i=Be,s=Yt,Be=n.stateNode.containerInfo,Yt=!0,ei(t,e,n),Be=i,Yt=s;break;case 0:case 11:case 14:case 15:if(!qe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Uf(n,e,o),s=s.next}while(s!==i)}ei(t,e,n);break;case 1:if(!qe&&(hr(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){be(n,e,a)}ei(t,e,n);break;case 21:ei(t,e,n);break;case 22:n.mode&1?(qe=(i=qe)||n.memoizedState!==null,ei(t,e,n),qe=i):ei(t,e,n);break;default:ei(t,e,n)}}function W_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JA),e.forEach(function(i){var s=lR.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function $t(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Be=a.stateNode,Yt=!1;break e;case 3:Be=a.stateNode.containerInfo,Yt=!0;break e;case 4:Be=a.stateNode.containerInfo,Yt=!0;break e}a=a.return}if(Be===null)throw Error(I(160));lE(r,o,s),Be=null,Yt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){be(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cE(e,t),e=e.sibling}function cE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(e,t),hn(t),i&4){try{Ko(3,t,t.return),sh(3,t)}catch(m){be(t,t.return,m)}try{Ko(5,t,t.return)}catch(m){be(t,t.return,m)}}break;case 1:$t(e,t),hn(t),i&512&&n!==null&&hr(n,n.return);break;case 5:if($t(e,t),hn(t),i&512&&n!==null&&hr(n,n.return),t.flags&32){var s=t.stateNode;try{da(s,"")}catch(m){be(t,t.return,m)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&Rb(s,r),mf(a,o);var c=mf(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Lb(s,h):u==="dangerouslySetInnerHTML"?Ob(s,h):u==="children"?da(s,h):im(s,u,h,c)}switch(a){case"input":uf(s,r);break;case"textarea":Mb(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?br(s,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?br(s,!!r.multiple,r.defaultValue,!0):br(s,!!r.multiple,r.multiple?[]:"",!1))}s[xa]=r}catch(m){be(t,t.return,m)}}break;case 6:if($t(e,t),hn(t),i&4){if(t.stateNode===null)throw Error(I(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(m){be(t,t.return,m)}}break;case 3:if($t(e,t),hn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ga(e.containerInfo)}catch(m){be(t,t.return,m)}break;case 4:$t(e,t),hn(t);break;case 13:$t(e,t),hn(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Lm=Ce())),i&4&&W_(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(qe=(c=qe)||u,$t(e,t),qe=c):$t(e,t),hn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(D=t,u=t.child;u!==null;){for(h=D=u;D!==null;){switch(d=D,f=d.child,d.tag){case 0:case 11:case 14:case 15:Ko(4,d,d.return);break;case 1:hr(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){be(i,n,m)}}break;case 5:hr(d,d.return);break;case 22:if(d.memoizedState!==null){$_(h);continue}}f!==null?(f.return=d,D=f):$_(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Nb("display",o))}catch(m){be(t,t.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){be(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$t(e,t),hn(t),i&4&&W_(t);break;case 21:break;default:$t(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aE(n)){var i=n;break e}n=n.return}throw Error(I(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(da(s,""),i.flags&=-33);var r=U_(t);$f(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=U_(t);Hf(t,a,o);break;default:throw Error(I(161))}}catch(l){be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eR(t,e,n){D=t,uE(t)}function uE(t,e,n){for(var i=(t.mode&1)!==0;D!==null;){var s=D,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||jl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||qe;a=jl;var c=qe;if(jl=o,(qe=l)&&!c)for(D=s;D!==null;)o=D,l=o.child,o.tag===22&&o.memoizedState!==null?K_(s):l!==null?(l.return=o,D=l):K_(s);for(;r!==null;)D=r,uE(r),r=r.sibling;D=s,jl=a,qe=c}H_(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,D=r):H_(t)}}function H_(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qe||sh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!qe)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&P_(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}P_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ga(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}qe||e.flags&512&&Wf(e)}catch(d){be(e,e.return,d)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function $_(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function K_(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sh(4,e)}catch(l){be(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){be(e,s,l)}}var r=e.return;try{Wf(e)}catch(l){be(e,r,l)}break;case 5:var o=e.return;try{Wf(e)}catch(l){be(e,o,l)}}}catch(l){be(e,e.return,l)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var tR=Math.ceil,tu=Jn.ReactCurrentDispatcher,Om=Jn.ReactCurrentOwner,Bt=Jn.ReactCurrentBatchConfig,K=0,Ve=null,Te=null,Ue=0,xt=0,dr=Hi(0),Re=0,ka=null,Is=0,rh=0,Nm=0,Go=null,ut=null,Lm=0,zr=1/0,In=null,nu=!1,Kf=null,Ei=null,Bl=!1,pi=null,iu=0,Yo=0,Gf=null,wc=-1,xc=0;function rt(){return K&6?Ce():wc!==-1?wc:wc=Ce()}function Ci(t){return t.mode&1?K&2&&Ue!==0?Ue&-Ue:VA.transition!==null?(xc===0&&(xc=Yb()),xc):(t=Z,t!==0||(t=window.event,t=t===void 0?16:tS(t.type)),t):1}function tn(t,e,n,i){if(50<Yo)throw Yo=0,Gf=null,Error(I(185));tl(t,n,i),(!(K&2)||t!==Ve)&&(t===Ve&&(!(K&2)&&(rh|=n),Re===4&&li(t,Ue)),gt(t,i),n===1&&K===0&&!(e.mode&1)&&(zr=Ce()+500,th&&$i()))}function gt(t,e){var n=t.callbackNode;VI(t,e);var i=Bc(t,t===Ve?Ue:0);if(i===0)n!==null&&t_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&t_(n),e===1)t.tag===0?FA(G_.bind(null,t)):wS(G_.bind(null,t)),DA(function(){!(K&6)&&$i()}),n=null;else{switch(qb(i)){case 1:n=lm;break;case 4:n=Kb;break;case 16:n=jc;break;case 536870912:n=Gb;break;default:n=jc}n=_E(n,hE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hE(t,e){if(wc=-1,xc=0,K&6)throw Error(I(327));var n=t.callbackNode;if(kr()&&t.callbackNode!==n)return null;var i=Bc(t,t===Ve?Ue:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=su(t,i);else{e=i;var s=K;K|=2;var r=fE();(Ve!==t||Ue!==e)&&(In=null,zr=Ce()+500,vs(t,e));do try{sR();break}catch(a){dE(t,a)}while(1);xm(),tu.current=r,K=s,Te!==null?e=0:(Ve=null,Ue=0,e=Re)}if(e!==0){if(e===2&&(s=wf(t),s!==0&&(i=s,e=Yf(t,s))),e===1)throw n=ka,vs(t,0),li(t,i),gt(t,Ce()),n;if(e===6)li(t,i);else{if(s=t.current.alternate,!(i&30)&&!nR(s)&&(e=su(t,i),e===2&&(r=wf(t),r!==0&&(i=r,e=Yf(t,r))),e===1))throw n=ka,vs(t,0),li(t,i),gt(t,Ce()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(I(345));case 2:is(t,ut,In);break;case 3:if(li(t,i),(i&130023424)===i&&(e=Lm+500-Ce(),10<e)){if(Bc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){rt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pf(is.bind(null,t,ut,In),e);break}is(t,ut,In);break;case 4:if(li(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-en(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Ce()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tR(i/1960))-i,10<i){t.timeoutHandle=Pf(is.bind(null,t,ut,In),i);break}is(t,ut,In);break;case 5:is(t,ut,In);break;default:throw Error(I(329))}}}return gt(t,Ce()),t.callbackNode===n?hE.bind(null,t):null}function Yf(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=su(t,e),t!==2&&(e=ut,ut=n,e!==null&&qf(e)),t}function qf(t){ut===null?ut=t:ut.push.apply(ut,t)}function nR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!sn(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function li(t,e){for(e&=~Nm,e&=~rh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-en(e),i=1<<n;t[n]=-1,e&=~i}}function G_(t){if(K&6)throw Error(I(327));kr();var e=Bc(t,0);if(!(e&1))return gt(t,Ce()),null;var n=su(t,e);if(t.tag!==0&&n===2){var i=wf(t);i!==0&&(e=i,n=Yf(t,i))}if(n===1)throw n=ka,vs(t,0),li(t,e),gt(t,Ce()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,ut,In),gt(t,Ce()),null}function Fm(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(zr=Ce()+500,th&&$i())}}function As(t){pi!==null&&pi.tag===0&&!(K&6)&&kr();var e=K;K|=1;var n=Bt.transition,i=Z;try{if(Bt.transition=null,Z=1,t)return t()}finally{Z=i,Bt.transition=n,K=e,!(K&6)&&$i()}}function Vm(){xt=dr.current,ue(dr)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MA(n)),Te!==null)for(n=Te.return;n!==null;){var i=n;switch(_m(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$c();break;case 3:jr(),ue(pt),ue(Je),km();break;case 5:Tm(i);break;case 4:jr();break;case 13:ue(me);break;case 19:ue(me);break;case 10:bm(i.type._context);break;case 22:case 23:Vm()}n=n.return}if(Ve=t,Te=t=Ti(t.current,null),Ue=xt=e,Re=0,ka=null,Nm=rh=Is=0,ut=Go=null,hs!==null){for(e=0;e<hs.length;e++)if(n=hs[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}hs=null}return t}function dE(t,e){do{var n=Te;try{if(xm(),yc.current=eu,Zc){for(var i=ye.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Zc=!1}if(Ps=0,Oe=Pe=ye=null,$o=!1,Ea=0,Om.current=null,n===null||n.return===null){Re=1,ka=e,Te=null;break}e:{var r=t,o=n.return,a=n,l=e;if(e=Ue,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=O_(o);if(f!==null){f.flags&=-257,N_(f,o,a,r,e),f.mode&1&&D_(r,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){D_(r,c,e),jm();break e}l=Error(I(426))}}else if(de&&a.mode&1){var _=O_(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),N_(_,o,a,r,e),vm(Br(l,a));break e}}r=l=Br(l,a),Re!==4&&(Re=2),Go===null?Go=[r]:Go.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=qS(r,l,e);k_(r,g);break e;case 1:a=l;var y=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ei===null||!Ei.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e;var x=QS(r,a,e);k_(r,x);break e}}r=r.return}while(r!==null)}mE(n)}catch(w){e=w,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(1)}function fE(){var t=tu.current;return tu.current=eu,t===null?eu:t}function jm(){(Re===0||Re===3||Re===2)&&(Re=4),Ve===null||!(Is&268435455)&&!(rh&268435455)||li(Ve,Ue)}function su(t,e){var n=K;K|=2;var i=fE();(Ve!==t||Ue!==e)&&(In=null,vs(t,e));do try{iR();break}catch(s){dE(t,s)}while(1);if(xm(),K=n,tu.current=i,Te!==null)throw Error(I(261));return Ve=null,Ue=0,Re}function iR(){for(;Te!==null;)pE(Te)}function sR(){for(;Te!==null&&!II();)pE(Te)}function pE(t){var e=yE(t.alternate,t,xt);t.memoizedProps=t.pendingProps,e===null?mE(t):Te=e,Om.current=null}function mE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XA(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Re=6,Te=null;return}}else if(n=QA(n,e,xt),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Re===0&&(Re=5)}function is(t,e,n){var i=Z,s=Bt.transition;try{Bt.transition=null,Z=1,rR(t,e,n,i)}finally{Bt.transition=s,Z=i}return null}function rR(t,e,n,i){do kr();while(pi!==null);if(K&6)throw Error(I(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(jI(t,r),t===Ve&&(Te=Ve=null,Ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bl||(Bl=!0,_E(jc,function(){return kr(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Bt.transition,Bt.transition=null;var o=Z;Z=1;var a=K;K|=4,Om.current=null,ZA(t,n),cE(n,t),CA(Tf),zc=!!Cf,Tf=Cf=null,t.current=n,eR(n),AI(),K=a,Z=o,Bt.transition=r}else t.current=n;if(Bl&&(Bl=!1,pi=t,iu=s),r=t.pendingLanes,r===0&&(Ei=null),DI(n.stateNode),gt(t,Ce()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(nu)throw nu=!1,t=Kf,Kf=null,t;return iu&1&&t.tag!==0&&kr(),r=t.pendingLanes,r&1?t===Gf?Yo++:(Yo=0,Gf=t):Yo=0,$i(),null}function kr(){if(pi!==null){var t=qb(iu),e=Bt.transition,n=Z;try{if(Bt.transition=null,Z=16>t?16:t,pi===null)var i=!1;else{if(t=pi,pi=null,iu=0,K&6)throw Error(I(331));var s=K;for(K|=4,D=t.current;D!==null;){var r=D,o=r.child;if(D.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(D=c;D!==null;){var u=D;switch(u.tag){case 0:case 11:case 15:Ko(8,u,r)}var h=u.child;if(h!==null)h.return=u,D=h;else for(;D!==null;){u=D;var d=u.sibling,f=u.return;if(oE(u),u===c){D=null;break}if(d!==null){d.return=f,D=d;break}D=f}}}var p=r.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(m!==null)}}D=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,D=o;else e:for(;D!==null;){if(r=D,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Ko(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,D=g;break e}D=r.return}}var y=t.current;for(D=y;D!==null;){o=D;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,D=v;else e:for(o=y;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sh(9,a)}}catch(w){be(a,a.return,w)}if(a===o){D=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,D=x;break e}D=a.return}}if(K=s,$i(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Qu,t)}catch{}i=!0}return i}finally{Z=n,Bt.transition=e}}return!1}function Y_(t,e,n){e=Br(n,e),e=qS(t,e,1),t=Si(t,e,1),e=rt(),t!==null&&(tl(t,1,e),gt(t,e))}function be(t,e,n){if(t.tag===3)Y_(t,t,n);else for(;e!==null;){if(e.tag===3){Y_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ei===null||!Ei.has(i))){t=Br(n,t),t=QS(e,t,1),e=Si(e,t,1),t=rt(),e!==null&&(tl(e,1,t),gt(e,t));break}}e=e.return}}function oR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&n,Ve===t&&(Ue&n)===n&&(Re===4||Re===3&&(Ue&130023424)===Ue&&500>Ce()-Lm?vs(t,0):Nm|=n),gt(t,e)}function gE(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=rt();t=Kn(t,e),t!==null&&(tl(t,e,n),gt(t,n))}function aR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gE(t,n)}function lR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(I(314))}i!==null&&i.delete(e),gE(t,n)}var yE;yE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,qA(t,e,n);dt=!!(t.flags&131072)}else dt=!1,de&&e.flags&1048576&&xS(e,Yc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;vc(t,e),t=e.pendingProps;var s=Lr(e,Je.current);Tr(e,n),s=Im(null,e,i,t,s,n);var r=Am();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(i)?(r=!0,Kc(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Em(e),s.updater=ih,e.stateNode=s,s._reactInternals=e,Nf(e,i,t,n),e=Vf(null,e,i,!0,r,n)):(e.tag=0,de&&r&&ym(e),nt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(vc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=uR(i),t=Gt(i,t),s){case 0:e=Ff(null,e,i,t,n);break e;case 1:e=V_(null,e,i,t,n);break e;case 11:e=L_(null,e,i,t,n);break e;case 14:e=F_(null,e,i,Gt(i.type,t),n);break e}throw Error(I(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gt(i,s),Ff(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gt(i,s),V_(t,e,i,s,n);case 3:e:{if(eE(e),t===null)throw Error(I(387));i=e.pendingProps,r=e.memoizedState,s=r.element,kS(t,e),Xc(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Br(Error(I(423)),e),e=j_(t,e,i,n,s);break e}else if(i!==s){s=Br(Error(I(424)),e),e=j_(t,e,i,n,s);break e}else for(bt=bi(e.stateNode.containerInfo.firstChild),Ct=e,de=!0,Qt=null,n=CS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fr(),i===s){e=Gn(t,e,n);break e}nt(t,e,i,n)}e=e.child}return e;case 5:return PS(e),t===null&&Mf(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,kf(i,s)?o=null:r!==null&&kf(i,r)&&(e.flags|=32),ZS(t,e),nt(t,e,o,n),e.child;case 6:return t===null&&Mf(e),null;case 13:return tE(t,e,n);case 4:return Cm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Vr(e,null,i,n):nt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gt(i,s),L_(t,e,i,s,n);case 7:return nt(t,e,e.pendingProps,n),e.child;case 8:return nt(t,e,e.pendingProps.children,n),e.child;case 12:return nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,re(qc,i._currentValue),i._currentValue=o,r!==null)if(sn(r.value,o)){if(r.children===s.children&&!pt.current){e=Gn(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=jn(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Df(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(I(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Df(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}nt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Tr(e,n),s=Wt(s),i=i(s),e.flags|=1,nt(t,e,i,n),e.child;case 14:return i=e.type,s=Gt(i,e.pendingProps),s=Gt(i.type,s),F_(t,e,i,s,n);case 15:return XS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gt(i,s),vc(t,e),e.tag=1,mt(i)?(t=!0,Kc(e)):t=!1,Tr(e,n),YS(e,i,s),Nf(e,i,s,n),Vf(null,e,i,!0,t,n);case 19:return nE(t,e,n);case 22:return JS(t,e,n)}throw Error(I(156,e.tag))};function _E(t,e){return $b(t,e)}function cR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,i){return new cR(t,e,n,i)}function Bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uR(t){if(typeof t=="function")return Bm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rm)return 11;if(t===om)return 14}return 2}function Ti(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bc(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")Bm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case nr:return ws(n.children,s,r,e);case sm:o=8,s|=8;break;case rf:return t=Vt(12,n,e,s|2),t.elementType=rf,t.lanes=r,t;case of:return t=Vt(13,n,e,s),t.elementType=of,t.lanes=r,t;case af:return t=Vt(19,n,e,s),t.elementType=af,t.lanes=r,t;case Pb:return oh(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tb:o=10;break e;case kb:o=9;break e;case rm:o=11;break e;case om:o=14;break e;case ri:o=16,i=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=Vt(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function ws(t,e,n,i){return t=Vt(7,t,i,e),t.lanes=n,t}function oh(t,e,n,i){return t=Vt(22,t,i,e),t.elementType=Pb,t.lanes=n,t.stateNode={isHidden:!1},t}function ud(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function hd(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hR(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$h(0),this.expirationTimes=$h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$h(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zm(t,e,n,i,s,r,o,a,l){return t=new hR(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Vt(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Em(r),t}function dR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tr,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function vE(t){if(!t)return Di;t=t._reactInternals;e:{if(Ws(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(mt(n))return vS(t,n,e)}return e}function wE(t,e,n,i,s,r,o,a,l){return t=zm(n,i,!0,t,s,r,o,a,l),t.context=vE(null),n=t.current,i=rt(),s=Ci(n),r=jn(i,s),r.callback=e??null,Si(n,r,s),t.current.lanes=s,tl(t,s,i),gt(t,i),t}function ah(t,e,n,i){var s=e.current,r=rt(),o=Ci(s);return n=vE(n),e.context===null?e.context=n:e.pendingContext=n,e=jn(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Si(s,e,o),t!==null&&(tn(t,s,o,r),gc(t,s,o)),o}function ru(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Um(t,e){q_(t,e),(t=t.alternate)&&q_(t,e)}function fR(){return null}var xE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wm(t){this._internalRoot=t}lh.prototype.render=Wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));ah(t,e,null,null)};lh.prototype.unmount=Wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;As(function(){ah(null,t,null,null)}),e[$n]=null}};function lh(t){this._internalRoot=t}lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ai.length&&e!==0&&e<ai[n].priority;n++);ai.splice(n,0,t),n===0&&eS(t)}};function Hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q_(){}function pR(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=ru(o);r.call(c)}}var o=wE(e,i,t,0,null,!1,!1,"",Q_);return t._reactRootContainer=o,t[$n]=o.current,va(t.nodeType===8?t.parentNode:t),As(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=ru(l);a.call(c)}}var l=zm(t,0,!1,null,null,!1,!1,"",Q_);return t._reactRootContainer=l,t[$n]=l.current,va(t.nodeType===8?t.parentNode:t),As(function(){ah(e,l,n,i)}),l}function uh(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=ru(o);a.call(l)}}ah(e,o,t,s)}else o=pR(n,e,t,s,i);return ru(o)}Qb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ao(e.pendingLanes);n!==0&&(cm(e,n|1),gt(e,Ce()),!(K&6)&&(zr=Ce()+500,$i()))}break;case 13:As(function(){var i=Kn(t,1);if(i!==null){var s=rt();tn(i,t,1,s)}}),Um(t,1)}};um=function(t){if(t.tag===13){var e=Kn(t,134217728);if(e!==null){var n=rt();tn(e,t,134217728,n)}Um(t,134217728)}};Xb=function(t){if(t.tag===13){var e=Ci(t),n=Kn(t,e);if(n!==null){var i=rt();tn(n,t,e,i)}Um(t,e)}};Jb=function(){return Z};Zb=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};yf=function(t,e,n){switch(e){case"input":if(uf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=eh(i);if(!s)throw Error(I(90));Ab(i),uf(i,s)}}}break;case"textarea":Mb(t,n);break;case"select":e=n.value,e!=null&&br(t,!!n.multiple,e,!1)}};jb=Fm;Bb=As;var mR={usingClientEntryPoint:!1,Events:[il,or,eh,Fb,Vb,Fm]},po={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gR={bundleType:po.bundleType,version:po.version,rendererPackageName:po.rendererPackageName,rendererConfig:po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wb(t),t===null?null:t.stateNode},findFiberByHostInstance:po.findFiberByHostInstance||fR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{Qu=zl.inject(gR),gn=zl}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mR;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hm(e))throw Error(I(200));return dR(t,e,null,n)};At.createRoot=function(t,e){if(!Hm(t))throw Error(I(299));var n=!1,i="",s=xE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zm(t,1,!1,null,null,n,!1,i,s),t[$n]=e.current,va(t.nodeType===8?t.parentNode:t),new Wm(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=Wb(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return As(t)};At.hydrate=function(t,e,n){if(!ch(e))throw Error(I(200));return uh(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!Hm(t))throw Error(I(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=xE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wE(e,null,t,1,n??null,s,!1,r,o),t[$n]=e.current,va(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lh(e)};At.render=function(t,e,n){if(!ch(e))throw Error(I(200));return uh(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!ch(t))throw Error(I(40));return t._reactRootContainer?(As(function(){uh(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};At.unstable_batchedUpdates=Fm;At.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ch(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return uh(t,e,n,!1,i)};At.version="18.3.1-next-f1338f8080-20240426";function bE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bE)}catch(t){console.error(t)}}bE(),bb.exports=At;var yR=bb.exports,SE,X_=yR;SE=X_.createRoot,X_.hydrateRoot;/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _R={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),rl=(t,e)=>{const n=k.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>k.createElement("svg",{ref:u,..._R,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:["lucide",`lucide-${vR(t)}`,a].join(" "),...c},[...e.map(([h,d])=>k.createElement(h,d)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=rl("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=rl("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=rl("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=rl("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=rl("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),CR=({onSearch:t})=>{const[e,n]=k.useState(""),i=r=>{n(r.target.value)},s=r=>{r.preventDefault(),t(e)};return C.jsxs("div",{className:"flex items-center rounded-full bg-white shadow-md p-2 w-full",children:[C.jsx("input",{type:"text",placeholder:"Enter English word...",className:"flex-grow outline-none px-4 rounded-full",value:e,onChange:i,onKeyDown:r=>{r.key==="Enter"&&s(r)}}),C.jsx("button",{type:"button",onClick:s,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:C.jsx(SR,{className:"h-5 w-5"})})]})},TR="modulepreload",kR=function(t){return"/EnglishPersonalDict/"+t},J_={},PR=function(e,n,i){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=kR(r),r in J_)return;J_[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===r&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":TR,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ou.apply(null,arguments)}function IR(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function AR(t){k.useEffect(t,[])}var RR=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function MR(t,e){var n=e===void 0?{}:e,i=n.volume,s=i===void 0?1:i,r=n.playbackRate,o=r===void 0?1:r,a=n.soundEnabled,l=a===void 0?!0:a,c=n.interrupt,u=c===void 0?!1:c,h=n.onload,d=IR(n,RR),f=wt.useRef(null),p=wt.useRef(!1),m=wt.useState(null),_=m[0],g=m[1],y=wt.useState(null),v=y[0],x=y[1],w=function(){typeof h=="function"&&h.call(this),p.current&&g(this.duration()*1e3),x(this)};AR(function(){return PR(()=>import("./howler-bc9ab5ac.js").then(T=>T.h),[]).then(function(T){if(!p.current){var M;f.current=(M=T.Howl)!==null&&M!==void 0?M:T.default.Howl,p.current=!0,new f.current(ou({src:Array.isArray(t)?t:[t],volume:s,rate:o,onload:w},d))}}),function(){p.current=!1}}),wt.useEffect(function(){f.current&&v&&x(new f.current(ou({src:Array.isArray(t)?t:[t],volume:s,onload:w},d)))},[JSON.stringify(t)]),wt.useEffect(function(){v&&(v.volume(s),v.rate(o))},[v,s,o]);var S=wt.useCallback(function(T){typeof T>"u"&&(T={}),!(!v||!l&&!T.forceSoundEnabled)&&(u&&v.stop(),T.playbackRate&&v.rate(T.playbackRate),v.play(T.id))},[v,l,u]),E=wt.useCallback(function(T){v&&v.stop(T)},[v]),b=wt.useCallback(function(T){v&&v.pause(T)},[v]),P=[S,{sound:v,stop:E,pause:b,duration:_}];return P}const DR={isOpen:!0,volume:1,type:"us",name:"English",isLoop:!1,isTransRead:!1,transVolume:1,rate:1};function OR(){}const dd="https://dict.youdao.com/dictvoice?audio=";function NR(t,e){switch(e){case"uk":return`${dd}${t}&type=1`;case"us":return`${dd}${t}&type=2`;case"zh":return`${dd}${t}&le=zh`;default:return""}}function LR(t,e){const n=DR,i=k.useMemo(()=>typeof e=="boolean"?e:n.isLoop,[e,n.isLoop]),[s,{stop:r,sound:o}]=MR(NR(t,n.type),{html5:!0,format:["mp3"],loop:i,volume:n.volume,rate:n.rate});return k.useEffect(()=>{if(o)return o.loop(i),OR},[i,o]),k.useEffect(()=>{if(o)return()=>{o.unload()}},[o]),{play:s,stop:r}}const FR=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A=function(t,e){if(!t)throw Zr(e)},Zr=function(t){return new Error("Firebase Database ("+EE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},VR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},$m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||c==null||h==null)throw new jR;const d=r<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TE=function(t){const e=CE(t);return $m.encodeByteArray(e,!0)},au=function(t){return TE(t).replace(/\./g,"")},lu=function(t){try{return $m.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){return kE(void 0,t)}function kE(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zR(n)||(t[n]=kE(t[n],e[n]));return t}function zR(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=()=>UR().__FIREBASE_DEFAULTS__,HR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$R=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lu(t[1]);return e&&JSON.parse(e)},Km=()=>{try{return FR()||WR()||HR()||$R()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PE=t=>{var e,n;return(n=(e=Km())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KR=t=>{const e=PE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},IE=()=>{var t;return(t=Km())===null||t===void 0?void 0:t.config},AE=t=>{var e;return(e=Km())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[au(JSON.stringify(n)),au(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function YR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ME(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qR(){const t=ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DE(){return EE.NODE_ADMIN===!0}function OE(){try{return typeof indexedDB=="object"}catch{return!1}}function NE(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}function QR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="FirebaseError";class En extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=XR,Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hs.prototype.create)}}class Hs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?JR(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new En(s,a,i)}}function JR(t,e){return t.replace(ZR,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const ZR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){return JSON.parse(t)}function Ie(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=function(t){let e={},n={},i={},s="";try{const r=t.split(".");e=Pa(lu(r[0])||""),n=Pa(lu(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},eM=function(t){const e=LE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tM=function(t){const e=LE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Rs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Qf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cu(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function Oi(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(Z_(r)&&Z_(o)){if(!Oi(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Z_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Do(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):h<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const d=(s<<5|s>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}else for(;s<n;)if(r[o]=e[s],++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function iM(t,e){const n=new sM(t,e);return n.subscribe.bind(n)}class sM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");rM(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=fd),s.error===void 0&&(s.error=fd),s.complete===void 0&&(s.complete=fd);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fd(){}function FE(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,A(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;s=65536+(r<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dh=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=1e3,lM=2,cM=4*60*60*1e3,uM=.5;function ev(t,e=aM,n=lM){const i=e*Math.pow(n,t),s=Math.round(uM*i*(Math.random()-.5)*2);return Math.min(cM,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t){return t&&t._delegate?t._delegate:t}class rn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new hh;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fM(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dM(t){return t===ss?void 0:t}function fM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ee||(ee={}));const mM={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},gM=ee.INFO,yM={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},_M=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=yM[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fh{constructor(e){this.name=e,this._logLevel=gM,this._logHandler=_M,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}}const vM=(t,e)=>e.some(n=>t instanceof n);let tv,nv;function wM(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xM(){return nv||(nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VE=new WeakMap,Xf=new WeakMap,jE=new WeakMap,pd=new WeakMap,Ym=new WeakMap;function bM(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(ki(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&VE.set(n,t)}).catch(()=>{}),Ym.set(e,t),e}function SM(t){if(Xf.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Xf.set(t,e)}let Jf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EM(t){Jf=t(Jf)}function CM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(md(this),e,...n);return jE.set(i,e.sort?e.sort():[e]),ki(i)}:xM().includes(t)?function(...e){return t.apply(md(this),e),ki(VE.get(this))}:function(...e){return ki(t.apply(md(this),e))}}function TM(t){return typeof t=="function"?CM(t):(t instanceof IDBTransaction&&SM(t),vM(t,wM())?new Proxy(t,Jf):t)}function ki(t){if(t instanceof IDBRequest)return bM(t);if(pd.has(t))return pd.get(t);const e=TM(t);return e!==t&&(pd.set(t,e),Ym.set(e,t)),e}const md=t=>Ym.get(t);function BE(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=ki(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ki(o.result),l.oldVersion,l.newVersion,ki(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const kM=["get","getKey","getAll","getAllKeys","count"],PM=["put","add","delete","clear"],gd=new Map;function iv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gd.get(e))return gd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=PM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||kM.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return gd.set(e,r),r}EM(t=>({...t,get:(e,n,i)=>iv(e,n)||t.get(e,n,i),has:(e,n)=>!!iv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function AM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zf="@firebase/app",sv="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new fh("@firebase/app"),RM="@firebase/app-compat",MM="@firebase/analytics-compat",DM="@firebase/analytics",OM="@firebase/app-check-compat",NM="@firebase/app-check",LM="@firebase/auth",FM="@firebase/auth-compat",VM="@firebase/database",jM="@firebase/data-connect",BM="@firebase/database-compat",zM="@firebase/functions",UM="@firebase/functions-compat",WM="@firebase/installations",HM="@firebase/installations-compat",$M="@firebase/messaging",KM="@firebase/messaging-compat",GM="@firebase/performance",YM="@firebase/performance-compat",qM="@firebase/remote-config",QM="@firebase/remote-config-compat",XM="@firebase/storage",JM="@firebase/storage-compat",ZM="@firebase/firestore",eD="@firebase/vertexai",tD="@firebase/firestore-compat",nD="firebase",iD="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="[DEFAULT]",sD={[Zf]:"fire-core",[RM]:"fire-core-compat",[DM]:"fire-analytics",[MM]:"fire-analytics-compat",[NM]:"fire-app-check",[OM]:"fire-app-check-compat",[LM]:"fire-auth",[FM]:"fire-auth-compat",[VM]:"fire-rtdb",[jM]:"fire-data-connect",[BM]:"fire-rtdb-compat",[zM]:"fire-fn",[UM]:"fire-fn-compat",[WM]:"fire-iid",[HM]:"fire-iid-compat",[$M]:"fire-fcm",[KM]:"fire-fcm-compat",[GM]:"fire-perf",[YM]:"fire-perf-compat",[qM]:"fire-rc",[QM]:"fire-rc-compat",[XM]:"fire-gcs",[JM]:"fire-gcs-compat",[ZM]:"fire-fst",[tD]:"fire-fst-compat",[eD]:"fire-vertex","fire-js":"fire-js",[nD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new Map,rD=new Map,tp=new Map;function rv(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sn(t){const e=t.name;if(tp.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;tp.set(e,t);for(const n of uu.values())rv(n,t);for(const n of rD.values())rv(n,t);return!0}function $s(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ft(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new Hs("app","Firebase",oD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=iD;function zE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ep,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Pi.create("bad-app-name",{appName:String(s)});if(n||(n=IE()),!n)throw Pi.create("no-options");const r=uu.get(s);if(r){if(Oi(n,r.options)&&Oi(i,r.config))return r;throw Pi.create("duplicate-app",{appName:s})}const o=new pM(s);for(const l of tp.values())o.addComponent(l);const a=new aD(n,i,o);return uu.set(s,a),a}function qm(t=ep){const e=uu.get(t);if(!e&&t===ep&&IE())return zE();if(!e)throw Pi.create("no-app",{appName:t});return e}function zt(t,e,n){var i;let s=(i=sD[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}Sn(new rn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="firebase-heartbeat-database",cD=1,Ia="firebase-heartbeat-store";let yd=null;function UE(){return yd||(yd=BE(lD,cD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pi.create("idb-open",{originalErrorMessage:t.message})})),yd}async function uD(t){try{const n=(await UE()).transaction(Ia),i=await n.objectStore(Ia).get(WE(t));return await n.done,i}catch(e){if(e instanceof En)Yn.warn(e.message);else{const n=Pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(n.message)}}}async function ov(t,e){try{const i=(await UE()).transaction(Ia,"readwrite");await i.objectStore(Ia).put(e,WE(t)),await i.done}catch(n){if(n instanceof En)Yn.warn(n.message);else{const i=Pi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yn.warn(i.message)}}}function WE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=1024,dD=30;class fD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=av();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>dD){const o=gD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Yn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=av(),{heartbeatsToSend:i,unsentEntries:s}=pD(this._heartbeatsCache.heartbeats),r=au(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Yn.warn(n),""}}}function av(){return new Date().toISOString().substring(0,10)}function pD(t,e=hD){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),lv(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),lv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class mD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OE()?NE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ov(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ov(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lv(t){return au(JSON.stringify({version:2,heartbeats:t})).length}function gD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){Sn(new rn("platform-logger",e=>new IM(e),"PRIVATE")),Sn(new rn("heartbeat",e=>new fD(e),"PRIVATE")),zt(Zf,sv,t),zt(Zf,sv,"esm2017"),zt("fire-js","")}yD("");const cv="@firebase/database",uv="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HE="";function _D(t){HE=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ie(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Pa(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return an(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vD(e)}}catch{}return new wD},fs=$E("localStorage"),np=$E("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new fh("@firebase/database"),KE=function(){let t=1;return function(){return t++}}(),GE=function(t){const e=oM(t),n=new nM;n.update(e);const i=n.digest();return $m.encodeByteArray(i)},ol=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ol.apply(null,i):typeof i=="object"?e+=Ie(i):e+=i,e+=" "}return e};let xs=null,hv=!0;const xD=function(t,e){A(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Pr.logLevel=ee.VERBOSE,xs=Pr.log.bind(Pr),e&&np.set("logging_enabled",!0)):typeof t=="function"?xs=t:(xs=null,np.remove("logging_enabled"))},Qe=function(...t){if(hv===!0&&(hv=!1,xs===null&&np.get("logging_enabled")===!0&&xD(!0)),xs){const e=ol.apply(null,t);xs(e)}},al=function(t){return function(...e){Qe(t,...e)}},ip=function(...t){const e="FIREBASE INTERNAL ERROR: "+ol(...t);Pr.error(e)},qn=function(...t){const e=`FIREBASE FATAL ERROR: ${ol(...t)}`;throw Pr.error(e),new Error(e)},Tt=function(...t){const e="FIREBASE WARNING: "+ol(...t);Pr.warn(e)},bD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Qm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},SD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ms="[MIN_NAME]",Ni="[MAX_NAME]",no=function(t,e){if(t===e)return 0;if(t===Ms||e===Ni)return-1;if(e===Ms||t===Ni)return 1;{const n=dv(t),i=dv(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},ED=function(t,e){return t===e?0:t<e?-1:1},mo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ie(e))},Xm=function(t){if(typeof t!="object"||t===null)return Ie(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Ie(e[i]),n+=":",n+=Xm(t[e[i]]);return n+="}",n},YE=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function _t(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const qE=function(t){A(!Qm(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,r,o,a,l;t===0?(r=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},CD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},TD=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kD(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const PD=new RegExp("^-?(0*)\\d{1,10}$"),ID=-2147483648,AD=2147483647,dv=function(t){if(PD.test(t)){const e=Number(t);if(e>=ID&&e<=AD)return e}return null},ll=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Tt("Exception was thrown by user callback.",n),e},Math.floor(0))}},RD=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ft(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Tt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Qe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tt(e)}}class Ir{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ir.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="5",QE="v",XE="s",JE="r",ZE="f",eC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tC="ls",nC="p",sp="ac",iC="websocket",sC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,i,s,r=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function OD(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function oC(t,e,n){A(typeof e=="string","typeof type must == string"),A(typeof n=="object","typeof params must == object");let i;if(e===iC)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===sC)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);OD(t)&&(n.ns=t.namespace);const s=[];return _t(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.counters_={}}incrementCounter(e,n=1){an(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return BR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d={},vd={};function Zm(t){const e=t.toString();return _d[e]||(_d[e]=new ND),_d[e]}function LD(t,e){const n=t.toString();return vd[n]||(vd[n]=e()),vd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&ll(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="start",VD="close",jD="pLPCommand",BD="pRTLPCB",aC="id",lC="pw",cC="ser",zD="cb",UD="seg",WD="ts",HD="d",$D="dframe",uC=1870,hC=30,KD=uC-hC,GD=25e3,YD=3e4;class fr{constructor(e,n,i,s,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=al(e),this.stats_=Zm(n),this.urlFn=l=>(this.appCheckToken&&(l[sp]=this.appCheckToken),oC(n,sC,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new FD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(YD)),SD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new eg((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===fv)this.id=a,this.password=l;else if(o===VD)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[fv]="t",i[cC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[zD]=this.scriptTagHolder.uniqueCallbackIdentifier),i[QE]=Jm,this.transportSessionId&&(i[XE]=this.transportSessionId),this.lastSessionId&&(i[tC]=this.lastSessionId),this.applicationId&&(i[nC]=this.applicationId),this.appCheckToken&&(i[sp]=this.appCheckToken),typeof location<"u"&&location.hostname&&eC.test(location.hostname)&&(i[JE]=ZE);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fr.forceAllow_=!0}static forceDisallow(){fr.forceDisallow_=!0}static isAvailable(){return fr.forceAllow_?!0:!fr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!CD()&&!TD()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ie(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=TE(n),s=YE(i,KD);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[$D]="t",i[aC]=e,i[lC]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ie(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class eg{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=KE(),window[jD+this.uniqueCallbackIdentifier]=e,window[BD+this.uniqueCallbackIdentifier]=n,this.myIFrame=eg.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Qe("frame writing exception"),a.stack&&Qe(a.stack),Qe(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Qe("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[aC]=this.myID,e[lC]=this.myPW,e[cC]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+hC+i.length<=uC;){const o=this.pendingSegs.shift();i=i+"&"+UD+s+"="+o.seg+"&"+WD+s+"="+o.ts+"&"+HD+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(GD)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Qe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=16384,QD=45e3;let hu=null;typeof MozWebSocket<"u"?hu=MozWebSocket:typeof WebSocket<"u"&&(hu=WebSocket);class Xt{constructor(e,n,i,s,r,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=al(this.connId),this.stats_=Zm(n),this.connURL=Xt.connectionURL_(n,o,a,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,r){const o={};return o[QE]=Jm,typeof location<"u"&&location.hostname&&eC.test(location.hostname)&&(o[JE]=ZE),n&&(o[XE]=n),i&&(o[tC]=i),s&&(o[sp]=s),r&&(o[nC]=r),oC(e,iC,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fs.set("previous_websocket_failure",!0);try{let i;DE(),this.mySock=new hu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Xt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&hu!==null&&!Xt.forceDisallow_}static previouslyFailed(){return fs.isInMemoryStorage||fs.get("previous_websocket_failure")===!0}markConnectionHealthy(){fs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Pa(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(A(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Ie(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=YE(n,qD);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(QD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xt.responsesRequiredToBeHealthy=2;Xt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{static get ALL_TRANSPORTS(){return[fr,Xt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Xt&&Xt.isAvailable();let i=n&&!Xt.previouslyFailed();if(e.webSocketOnly&&(n||Tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Xt];else{const s=this.transports_=[];for(const r of Aa.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);Aa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Aa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=6e4,JD=5e3,ZD=10*1024,eO=100*1024,wd="t",pv="d",tO="s",mv="r",nO="e",gv="o",yv="a",_v="n",vv="p",iO="h";class sO{constructor(e,n,i,s,r,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=al("c:"+this.id+":"),this.transportManager_=new Aa(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=qo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>eO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>ZD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wd in e){const n=e[wd];n===yv?this.upgradeIfSecondaryHealthy_():n===mv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===gv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=mo("t",e),i=mo("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:vv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:yv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:_v,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=mo("t",e),i=mo("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=mo(wd,e);if(pv in e){const i=e[pv];if(n===iO){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===_v){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===tO?this.onConnectionShutdown_(i):n===mv?this.onReset_(i):n===nO?ip("Server Error: "+i):n===gv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ip("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Jm!==i&&Tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),qo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(XD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(JD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:vv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.allowedEvents_=e,this.listeners_={},A(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){A(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends fC{static getInstance(){return new du}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Gm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return A(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=32,xv=768;class te{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function q(){return new te("")}function z(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Li(t){return t.pieces_.length-t.pieceNum_}function se(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new te(t.pieces_,e)}function pC(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function rO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function mC(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function gC(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new te(e,0)}function Ae(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof te)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new te(n,0)}function U(t){return t.pieceNum_>=t.pieces_.length}function it(t,e){const n=z(t),i=z(e);if(n===null)return e;if(n===i)return it(se(t),se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tg(t,e){if(Li(t)!==Li(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Jt(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Li(t)>Li(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class oO{constructor(e,n){this.errorPrefix_=n,this.parts_=mC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=dh(this.parts_[i]);yC(this)}}function aO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=dh(e),yC(t)}function lO(t){const e=t.parts_.pop();t.byteLength_-=dh(e),t.parts_.length>0&&(t.byteLength_-=1)}function yC(t){if(t.byteLength_>xv)throw new Error(t.errorPrefix_+"has a key path longer than "+xv+" bytes ("+t.byteLength_+").");if(t.parts_.length>wv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wv+") or object contains a cycle "+rs(t))}function rs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends fC{static getInstance(){return new ng}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return A(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=1e3,cO=60*5*1e3,bv=30*1e3,uO=1.3,hO=3e4,dO="server_kill",Sv=3;class Bn extends dC{constructor(e,n,i,s,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Bn.nextPersistentConnectionId_++,this.log_=al("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=go,this.maxReconnectDelay_=cO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!DE())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ng.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&du.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(Ie(r)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new hh,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,i,s){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;Bn.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&an(e,"w")){const i=Rs(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();Tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=bv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=eM(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ie(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ip("Unrecognized action received from server: "+Ie(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hO&&(this.reconnectDelay_=go),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*uO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Bn.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){A(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Qe("getToken() completed but was canceled"):(Qe("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new sO(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{Tt(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(dO)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Tt(h),l())}}}interrupt(e){Qe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Qe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qf(this.interruptReasons_)&&(this.reconnectDelay_=go,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(r=>Xm(r)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new te(e).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){Qe("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Sv&&(this.reconnectDelay_=bv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Qe("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Sv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+HE.replace(/\./g,"-")]=1,Gm()?e["framework.cordova"]=1:ME()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=du.getInstance().currentlyOnline();return Qf(this.interruptReasons_)&&e}}Bn.nextPersistentConnectionId_=0;Bn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new W(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new W(Ms,e),s=new W(Ms,n);return this.compare(i,s)!==0}minPost(){return W.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul;class _C extends ph{static get __EMPTY_NODE(){return Ul}static set __EMPTY_NODE(e){Ul=e}compare(e,n){return no(e.name,n.name)}isDefinedOn(e){throw Zr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return W.MIN}maxPost(){return new W(Ni,Ul)}makePost(e,n){return A(typeof e=="string","KeyIndex indexValue must always be a string."),new W(e,Ul)}toString(){return".key"}}const bs=new _C;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ne{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??Ne.RED,this.left=s??ft.EMPTY_NODE,this.right=r??ft.EMPTY_NODE}copy(e,n,i,s,r){return new Ne(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ft.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return ft.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ne.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ne.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ne.RED=!0;Ne.BLACK=!1;class fO{copy(e,n,i,s,r){return this}insert(e,n,i){return new Ne(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ft{constructor(e,n=ft.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ft(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ne.BLACK,null,null))}remove(e){return new ft(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ne.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Wl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Wl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Wl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Wl(this.root_,null,this.comparator_,!0,e)}}ft.EMPTY_NODE=new fO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t,e){return no(t.name,e.name)}function ig(t,e){return no(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rp;function mO(t){rp=t}const vC=function(t){return typeof t=="number"?"number:"+qE(t):"string:"+t},wC=function(t){if(t.isLeafNode()){const e=t.val();A(typeof e=="string"||typeof e=="number"||typeof e=="object"&&an(e,".sv"),"Priority must be a string or number.")}else A(t===rp||t.isEmpty(),"priority of unexpected type.");A(t===rp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ev;class De{static set __childrenNodeConstructor(e){Ev=e}static get __childrenNodeConstructor(){return Ev}constructor(e,n=De.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,A(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wC(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new De(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:De.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return U(e)?this:z(e)===".priority"?this.priorityNode_:De.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:De.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=z(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(A(i!==".priority"||Li(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,De.__childrenNodeConstructor.EMPTY_NODE.updateChild(se(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vC(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qE(this.value_):e+=this.value_,this.lazyHash_=GE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===De.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof De.__childrenNodeConstructor?-1:(A(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=De.VALUE_TYPE_ORDER.indexOf(n),r=De.VALUE_TYPE_ORDER.indexOf(i);return A(s>=0,"Unknown leaf type: "+n),A(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}De.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xC,bC;function gO(t){xC=t}function yO(t){bC=t}class _O extends ph{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?no(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return W.MIN}maxPost(){return new W(Ni,new De("[PRIORITY-POST]",bC))}makePost(e,n){const i=xC(e);return new W(n,new De("[PRIORITY-POST]",i))}toString(){return".priority"}}const pe=new _O;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=Math.log(2);class wO{constructor(e){const n=r=>parseInt(Math.log(r)/vO,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fu=function(t,e,n,i){t.sort(e);const s=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new Ne(d,h.node,Ne.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=s(l,f),m=s(f+1,c);return h=t[f],d=n?n(h):h,new Ne(d,h.node,Ne.BLACK,p,m)}},r=function(l){let c=null,u=null,h=t.length;const d=function(p,m){const _=h-p,g=h;h-=p;const y=s(_+1,g),v=t[_],x=n?n(v):v;f(new Ne(x,v.node,m,null,y))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),_=Math.pow(2,l.count-(p+1));m?d(_,Ne.BLACK):(d(_,Ne.BLACK),d(_,Ne.RED))}return u},o=new wO(t.length),a=r(o);return new ft(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd;const Js={};class On{static get Default(){return A(Js&&pe,"ChildrenNode.ts has not been loaded"),xd=xd||new On({".priority":Js},{".priority":pe}),xd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Rs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ft?n:null}hasIndex(e){return an(this.indexSet_,e.toString())}addIndex(e,n){A(e!==bs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(W.Wrap);let o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=fu(i,e.getCompare()):a=Js;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new On(u,c)}addToIndexes(e,n){const i=cu(this.indexes_,(s,r)=>{const o=Rs(this.indexSet_,r);if(A(o,"Missing index implementation for "+r),s===Js)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(W.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),fu(a,o.getCompare())}else return Js;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new W(e.name,a))),l.insert(e,e.node)}});return new On(i,this.indexSet_)}removeFromIndexes(e,n){const i=cu(this.indexes_,s=>{if(s===Js)return s;{const r=n.get(e.name);return r?s.remove(new W(e.name,r)):s}});return new On(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo;class F{static get EMPTY_NODE(){return yo||(yo=new F(new ft(ig),null,On.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&wC(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yo}updatePriority(e){return this.children_.isEmpty()?this:new F(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?yo:n}}getChild(e){const n=z(e);return n===null?this:this.getImmediateChild(n).getChild(se(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(A(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new W(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?yo:this.priorityNode_;return new F(s,o,r)}}updateChild(e,n){const i=z(e);if(i===null)return n;{A(z(e)!==".priority"||Li(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(se(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(pe,(o,a)=>{n[o]=a.val(e),i++,r&&F.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!e&&r&&s<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+vC(this.getPriority().val())+":"),this.forEachChild(pe,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":GE(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new W(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new W(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new W(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,W.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,W.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cl?-1:0}withIndex(e){if(e===bs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new F(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===bs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(pe),s=n.getIterator(pe);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===bs?null:this.indexMap_.get(e.toString())}}F.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xO extends F{constructor(){super(new ft(ig),F.EMPTY_NODE,On.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return F.EMPTY_NODE}isEmpty(){return!1}}const cl=new xO;Object.defineProperties(W,{MIN:{value:new W(Ms,F.EMPTY_NODE)},MAX:{value:new W(Ni,cl)}});_C.__EMPTY_NODE=F.EMPTY_NODE;De.__childrenNodeConstructor=F;mO(cl);yO(cl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=!0;function Le(t,e=null){if(t===null)return F.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),A(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new De(n,Le(e))}if(!(t instanceof Array)&&bO){const n=[];let i=!1;if(_t(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Le(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new W(o,l)))}}),n.length===0)return F.EMPTY_NODE;const r=fu(n,pO,o=>o.name,ig);if(i){const o=fu(n,pe.getCompare());return new F(r,Le(e),new On({".priority":o},{".priority":pe}))}else return new F(r,Le(e),On.Default)}else{let n=F.EMPTY_NODE;return _t(t,(i,s)=>{if(an(t,i)&&i.substring(0,1)!=="."){const r=Le(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(Le(e))}}gO(Le);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends ph{constructor(e){super(),this.indexPath_=e,A(!U(e)&&z(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?no(e.name,n.name):r}makePost(e,n){const i=Le(e),s=F.EMPTY_NODE.updateChild(this.indexPath_,i);return new W(n,s)}maxPost(){const e=F.EMPTY_NODE.updateChild(this.indexPath_,cl);return new W(Ni,e)}toString(){return mC(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO extends ph{compare(e,n){const i=e.node.compareTo(n.node);return i===0?no(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(e,n){const i=Le(e);return new W(n,i)}toString(){return".value"}}const SC=new SO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t){return{type:"value",snapshotNode:t}}function Ur(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ra(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ma(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function EO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.index_=e}updateChild(e,n,i,s,r,o){A(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(i.getChild(s))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(Ra(n,a)):A(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ur(n,i)):o.trackChildChange(Ma(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(pe,(s,r)=>{n.hasChild(s)||i.trackChildChange(Ra(s,r))}),n.isLeafNode()||n.forEachChild(pe,(s,r)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(r)||i.trackChildChange(Ma(s,r,o))}else i.trackChildChange(Ur(s,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?F.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.indexedFilter_=new rg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Da.getStartPost_(e),this.endPost_=Da.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,s,r,o){return this.matches(new W(n,i))||(i=F.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,s,r,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=F.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(F.EMPTY_NODE);const r=this;return n.forEachChild(pe,(o,a)=>{r.matches(new W(o,a))||(s=s.updateImmediateChild(o,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Da(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,s,r,o){return this.rangedFilter_.matches(new W(n,i))||(i=F.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,s,r,o):this.fullLimitUpdateChild_(e,n,i,r,o)}updateFullNode(e,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=F.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=F.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(F.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){const a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,s,r){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;A(a.numChildren()===this.limit_,"");const l=new W(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=s.getChildAfterChild(this.index_,c,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=s.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,l);if(u&&!i.isEmpty()&&f>=0)return r!=null&&r.trackChildChange(Ma(n,i,h)),a.updateImmediateChild(n,i);{r!=null&&r.trackChildChange(Ra(n,h));const m=a.updateImmediateChild(n,F.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(r!=null&&r.trackChildChange(Ur(d.name,d.node)),m.updateImmediateChild(d.name,d.node)):m}}else return i.isEmpty()?e:u&&o(c,l)>=0?(r!=null&&(r.trackChildChange(Ra(c.name,c.node)),r.trackChildChange(Ur(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,F.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ms}hasEnd(){return this.endSet_}getIndexEndValue(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ni}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pe}copy(){const e=new og;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function TO(t){return t.loadsAllData()?new rg(t.getIndex()):t.hasLimit()?new CO(t):new Da(t)}function kO(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function PO(t,e){const n=t.copy();return n.index_=e,n}function Cv(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pe?n="$priority":t.index_===SC?n="$value":t.index_===bs?n="$key":(A(t.index_ instanceof sg,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ie(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Ie(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Ie(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Ie(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Ie(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Tv(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==pe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends dC{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=al("p:rest:"),this.listens_={}}listen(e,n,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=pu.getListenId_(e,i),a={};this.listens_[o]=a;const l=Cv(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),Rs(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",s(d,null)}})}unlisten(e,n){const i=pu.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Cv(e._queryParams),i=e._path.toString(),s=new hh;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+eo(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Pa(a.responseText)}catch{Tt("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Tt("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(){return{value:null,children:new Map}}function CC(t,e,n){if(U(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=z(e);t.children.has(i)||t.children.set(i,mu());const s=t.children.get(i);e=se(e),CC(s,e,n)}}function op(t,e,n){t.value!==null?n(e,t.value):AO(t,(i,s)=>{const r=new te(e.toString()+"/"+i);op(s,r,n)})}function AO(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_t(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=10*1e3,MO=30*1e3,DO=5*60*1e3;class OO{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new RO(e);const i=kv+(MO-kv)*Math.random();qo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;_t(e,(s,r)=>{r>0&&an(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),qo(this.reportStats_.bind(this),Math.floor(Math.random()*2*DO))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Zt||(Zt={}));function TC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ag(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Zt.ACK_USER_WRITE,this.source=TC()}operationForChild(e){if(U(this.path)){if(this.affectedTree.value!=null)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new te(e));return new gu(q(),n,this.revert)}}else return A(z(this.path)===e,"operationForChild called for unrelated child."),new gu(se(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.source=e,this.path=n,this.type=Zt.LISTEN_COMPLETE}operationForChild(e){return U(this.path)?new Oa(this.source,q()):new Oa(this.source,se(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Zt.OVERWRITE}operationForChild(e){return U(this.path)?new Ds(this.source,q(),this.snap.getImmediateChild(e)):new Ds(this.source,se(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Zt.MERGE}operationForChild(e){if(U(this.path)){const n=this.children.subtree(new te(e));return n.isEmpty()?null:n.value?new Ds(this.source,q(),n.value):new Na(this.source,q(),n)}else return A(z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Na(this.source,se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(U(e))return this.isFullyInitialized()&&!this.filtered_;const n=z(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function LO(t,e,n,i){const s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(EO(o.childName,o.snapshotNode))}),_o(t,s,"child_removed",e,i,n),_o(t,s,"child_added",e,i,n),_o(t,s,"child_moved",r,i,n),_o(t,s,"child_changed",e,i,n),_o(t,s,"value",e,i,n),s}function _o(t,e,n,i,s,r){const o=i.filter(a=>a.type===n);o.sort((a,l)=>VO(t,a,l)),o.forEach(a=>{const l=FO(t,a,r);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function FO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function VO(t,e,n){if(e.childName==null||n.childName==null)throw Zr("Should only compare child_ events.");const i=new W(e.childName,e.snapshotNode),s=new W(n.childName,n.snapshotNode);return t.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t,e){return{eventCache:t,serverCache:e}}function Qo(t,e,n,i){return mh(new Fi(e,n,i),t.serverCache)}function kC(t,e,n,i){return mh(t.eventCache,new Fi(e,n,i))}function yu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Os(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd;const jO=()=>(bd||(bd=new ft(ED)),bd);class ce{static fromObject(e){let n=new ce(null);return _t(e,(i,s)=>{n=n.set(new te(i),s)}),n}constructor(e,n=jO()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:q(),value:this.value};if(U(e))return null;{const i=z(e),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(se(e),n);return r!=null?{path:Ae(new te(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(U(e))return this;{const n=z(e),i=this.children.get(n);return i!==null?i.subtree(se(e)):new ce(null)}}set(e,n){if(U(e))return new ce(n,this.children);{const i=z(e),r=(this.children.get(i)||new ce(null)).set(se(e),n),o=this.children.insert(i,r);return new ce(this.value,o)}}remove(e){if(U(e))return this.children.isEmpty()?new ce(null):new ce(null,this.children);{const n=z(e),i=this.children.get(n);if(i){const s=i.remove(se(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new ce(null):new ce(this.value,r)}else return this}}get(e){if(U(e))return this.value;{const n=z(e),i=this.children.get(n);return i?i.get(se(e)):null}}setTree(e,n){if(U(e))return n;{const i=z(e),r=(this.children.get(i)||new ce(null)).setTree(se(e),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new ce(this.value,o)}}fold(e){return this.fold_(q(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(Ae(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,q(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(U(e))return null;{const r=z(e),o=this.children.get(r);return o?o.findOnPath_(se(e),Ae(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,q(),n)}foreachOnPath_(e,n,i){if(U(e))return this;{this.value&&i(n,this.value);const s=z(e),r=this.children.get(s);return r?r.foreachOnPath_(se(e),Ae(n,s),i):new ce(null)}}foreach(e){this.foreach_(q(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(Ae(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.writeTree_=e}static empty(){return new nn(new ce(null))}}function Xo(t,e,n){if(U(e))return new nn(new ce(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let r=i.value;const o=it(s,e);return r=r.updateChild(o,n),new nn(t.writeTree_.set(s,r))}else{const s=new ce(n),r=t.writeTree_.setTree(e,s);return new nn(r)}}}function Pv(t,e,n){let i=t;return _t(n,(s,r)=>{i=Xo(i,Ae(e,s),r)}),i}function Iv(t,e){if(U(e))return nn.empty();{const n=t.writeTree_.setTree(e,new ce(null));return new nn(n)}}function ap(t,e){return Ks(t,e)!=null}function Ks(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(it(n.path,e)):null}function Av(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pe,(i,s)=>{e.push(new W(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new W(i,s.value))}),e}function Ii(t,e){if(U(e))return t;{const n=Ks(t,e);return n!=null?new nn(new ce(n)):new nn(t.writeTree_.subtree(e))}}function lp(t){return t.writeTree_.isEmpty()}function Wr(t,e){return PC(q(),t.writeTree_,e)}function PC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(A(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=PC(Ae(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Ae(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t,e){return MC(e,t)}function BO(t,e,n,i,s){A(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=Xo(t.visibleWrites,e,n)),t.lastWriteId=i}function zO(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function UO(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);A(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&WO(a,i.path)?s=!1:Jt(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return HO(t),!0;if(i.snap)t.visibleWrites=Iv(t.visibleWrites,i.path);else{const a=i.children;_t(a,l=>{t.visibleWrites=Iv(t.visibleWrites,Ae(i.path,l))})}return!0}else return!1}function WO(t,e){if(t.snap)return Jt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Jt(Ae(t.path,n),e))return!0;return!1}function HO(t){t.visibleWrites=IC(t.allWrites,$O,q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $O(t){return t.visible}function IC(t,e,n){let i=nn.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const o=r.path;let a;if(r.snap)Jt(n,o)?(a=it(n,o),i=Xo(i,a,r.snap)):Jt(o,n)&&(a=it(o,n),i=Xo(i,q(),r.snap.getChild(a)));else if(r.children){if(Jt(n,o))a=it(n,o),i=Pv(i,a,r.children);else if(Jt(o,n))if(a=it(o,n),U(a))i=Pv(i,q(),r.children);else{const l=Rs(r.children,z(a));if(l){const c=l.getChild(se(a));i=Xo(i,q(),c)}}}else throw Zr("WriteRecord should have .snap or .children")}}return i}function AC(t,e,n,i,s){if(!i&&!s){const r=Ks(t.visibleWrites,e);if(r!=null)return r;{const o=Ii(t.visibleWrites,e);if(lp(o))return n;if(n==null&&!ap(o,q()))return null;{const a=n||F.EMPTY_NODE;return Wr(o,a)}}}else{const r=Ii(t.visibleWrites,e);if(!s&&lp(r))return n;if(!s&&n==null&&!ap(r,q()))return null;{const o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(Jt(c.path,e)||Jt(e,c.path))},a=IC(t.allWrites,o,e),l=n||F.EMPTY_NODE;return Wr(a,l)}}}function KO(t,e,n){let i=F.EMPTY_NODE;const s=Ks(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(pe,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=Ii(t.visibleWrites,e);return n.forEachChild(pe,(o,a)=>{const l=Wr(Ii(r,new te(o)),a);i=i.updateImmediateChild(o,l)}),Av(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=Ii(t.visibleWrites,e);return Av(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function GO(t,e,n,i,s){A(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=Ae(e,n);if(ap(t.visibleWrites,r))return null;{const o=Ii(t.visibleWrites,r);return lp(o)?s.getChild(n):Wr(o,s.getChild(n))}}function YO(t,e,n,i){const s=Ae(e,n),r=Ks(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=Ii(t.visibleWrites,s);return Wr(o,i.getNode().getImmediateChild(n))}else return null}function qO(t,e){return Ks(t.visibleWrites,e)}function QO(t,e,n,i,s,r,o){let a;const l=Ii(t.visibleWrites,e),c=Ks(l,q());if(c!=null)a=c;else if(n!=null)a=Wr(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=d.getNext();for(;f&&u.length<s;)h(f,i)!==0&&u.push(f),f=d.getNext();return u}else return[]}function XO(){return{visibleWrites:nn.empty(),allWrites:[],lastWriteId:-1}}function _u(t,e,n,i){return AC(t.writeTree,t.treePath,e,n,i)}function cg(t,e){return KO(t.writeTree,t.treePath,e)}function Rv(t,e,n,i){return GO(t.writeTree,t.treePath,e,n,i)}function vu(t,e){return qO(t.writeTree,Ae(t.treePath,e))}function JO(t,e,n,i,s,r){return QO(t.writeTree,t.treePath,e,n,i,s,r)}function ug(t,e,n){return YO(t.writeTree,t.treePath,e,n)}function RC(t,e){return MC(Ae(t.treePath,e),t.writeTree)}function MC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;A(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),A(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,Ma(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,Ra(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,Ur(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,Ma(i,e.snapshotNode,s.oldSnap));else throw Zr("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const DC=new eN;class hg{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Fi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ug(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Os(this.viewCache_),r=JO(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){return{filter:t}}function nN(t,e){A(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),A(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function iN(t,e,n,i,s){const r=new ZO;let o,a;if(n.type===Zt.OVERWRITE){const c=n;c.source.fromUser?o=cp(t,e,c.path,c.snap,i,s,r):(A(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!U(c.path),o=wu(t,e,c.path,c.snap,i,s,a,r))}else if(n.type===Zt.MERGE){const c=n;c.source.fromUser?o=rN(t,e,c.path,c.children,i,s,r):(A(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=up(t,e,c.path,c.children,i,s,a,r))}else if(n.type===Zt.ACK_USER_WRITE){const c=n;c.revert?o=lN(t,e,c.path,i,s,r):o=oN(t,e,c.path,c.affectedTree,i,s,r)}else if(n.type===Zt.LISTEN_COMPLETE)o=aN(t,e,n.path,i,r);else throw Zr("Unknown operation type: "+n.type);const l=r.getChanges();return sN(e,o,l),{viewCache:o,changes:l}}function sN(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=yu(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(EC(yu(e)))}}function OC(t,e,n,i,s,r){const o=e.eventCache;if(vu(i,n)!=null)return e;{let a,l;if(U(n))if(A(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Os(e),u=c instanceof F?c:F.EMPTY_NODE,h=cg(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const c=_u(i,Os(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=z(n);if(c===".priority"){A(Li(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=Rv(i,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=se(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=Rv(i,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=ug(i,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,s,r):a=o.getNode()}}return Qo(e,a,o.isFullyInitialized()||U(n),t.filter.filtersNodes())}}function wu(t,e,n,i,s,r,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(U(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=z(n);if(!l.isCompleteForPath(n)&&Li(n)>1)return e;const p=se(n),_=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),_):c=u.updateChild(l.getNode(),f,_,p,DC,null)}const h=kC(e,c,l.isFullyInitialized()||U(n),u.filtersNodes()),d=new hg(s,h,r);return OC(t,h,n,s,d,a)}function cp(t,e,n,i,s,r,o){const a=e.eventCache;let l,c;const u=new hg(s,e,r);if(U(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Qo(e,c,!0,t.filter.filtersNodes());else{const h=z(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Qo(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=se(n),f=a.getNode().getImmediateChild(h);let p;if(U(d))p=i;else{const m=u.getCompleteChild(h);m!=null?pC(d)===".priority"&&m.getChild(gC(d)).isEmpty()?p=m:p=m.updateChild(d,i):p=F.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=Qo(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Mv(t,e){return t.eventCache.isCompleteForChild(e)}function rN(t,e,n,i,s,r,o){let a=e;return i.foreach((l,c)=>{const u=Ae(n,l);Mv(e,z(u))&&(a=cp(t,a,u,c,s,r,o))}),i.foreach((l,c)=>{const u=Ae(n,l);Mv(e,z(u))||(a=cp(t,a,u,c,s,r,o))}),a}function Dv(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function up(t,e,n,i,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;U(n)?c=i:c=new ce(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=Dv(t,f,d);l=wu(t,l,new te(h),p,s,r,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),m=Dv(t,p,d);l=wu(t,l,new te(h),m,s,r,o,a)}}),l}function oN(t,e,n,i,s,r,o){if(vu(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(U(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return wu(t,e,n,l.getNode().getChild(n),s,r,a,o);if(U(n)){let c=new ce(null);return l.getNode().forEachChild(bs,(u,h)=>{c=c.set(new te(u),h)}),up(t,e,n,c,s,r,a,o)}else return e}else{let c=new ce(null);return i.foreach((u,h)=>{const d=Ae(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),up(t,e,n,c,s,r,a,o)}}function aN(t,e,n,i,s){const r=e.serverCache,o=kC(e,r.getNode(),r.isFullyInitialized()||U(n),r.isFiltered());return OC(t,o,n,i,DC,s)}function lN(t,e,n,i,s,r){let o;if(vu(i,n)!=null)return e;{const a=new hg(i,e,s),l=e.eventCache.getNode();let c;if(U(n)||z(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=_u(i,Os(e));else{const h=e.serverCache.getNode();A(h instanceof F,"serverChildren would be complete if leaf node"),u=cg(i,h)}u=u,c=t.filter.updateFullNode(l,u,r)}else{const u=z(n);let h=ug(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,se(n),a,r):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,F.EMPTY_NODE,se(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=_u(i,Os(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||vu(i,q())!=null,Qo(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new rg(i.getIndex()),r=TO(i);this.processor_=tN(r);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(F.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(F.EMPTY_NODE,a.getNode(),null),u=new Fi(l,o.isFullyInitialized(),s.filtersNodes()),h=new Fi(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=mh(h,u),this.eventGenerator_=new NO(this.query_)}get query(){return this.query_}}function uN(t){return t.viewCache_.serverCache.getNode()}function hN(t){return yu(t.viewCache_)}function dN(t,e){const n=Os(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!U(e)&&!n.getImmediateChild(z(e)).isEmpty())?n.getChild(e):null}function Ov(t){return t.eventRegistrations_.length===0}function fN(t,e){t.eventRegistrations_.push(e)}function Nv(t,e,n){const i=[];if(n){A(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,s);o&&i.push(o)})}if(e){let s=[];for(let r=0;r<t.eventRegistrations_.length;++r){const o=t.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function Lv(t,e,n,i){e.type===Zt.MERGE&&e.source.queryId!==null&&(A(Os(t.viewCache_),"We should always have a full cache before handling merges"),A(yu(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=iN(t.processor_,s,e,n,i);return nN(t.processor_,r.viewCache),A(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,NC(t,r.changes,r.viewCache.eventCache.getNode(),null)}function pN(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(pe,(r,o)=>{i.push(Ur(r,o))}),n.isFullyInitialized()&&i.push(EC(n.getNode())),NC(t,i,n.getNode(),e)}function NC(t,e,n,i){const s=i?[i]:t.eventRegistrations_;return LO(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;class LC{constructor(){this.views=new Map}}function mN(t){A(!xu,"__referenceConstructor has already been defined"),xu=t}function gN(){return A(xu,"Reference.ts has not been loaded"),xu}function yN(t){return t.views.size===0}function dg(t,e,n,i){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return A(r!=null,"SyncTree gave us an op for an invalid query."),Lv(r,e,n,i)}else{let r=[];for(const o of t.views.values())r=r.concat(Lv(o,e,n,i));return r}}function FC(t,e,n,i,s){const r=e._queryIdentifier,o=t.views.get(r);if(!o){let a=_u(n,s?i:null),l=!1;a?l=!0:i instanceof F?(a=cg(n,i),l=!1):(a=F.EMPTY_NODE,l=!1);const c=mh(new Fi(a,l,!1),new Fi(i,s,!1));return new cN(e,c)}return o}function _N(t,e,n,i,s,r){const o=FC(t,e,i,s,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),fN(o,n),pN(o,n)}function vN(t,e,n,i){const s=e._queryIdentifier,r=[];let o=[];const a=Vi(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(Nv(c,n,i)),Ov(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(Nv(l,n,i)),Ov(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!Vi(t)&&r.push(new(gN())(e._repo,e._path)),{removed:r,events:o}}function VC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ai(t,e){let n=null;for(const i of t.views.values())n=n||dN(i,e);return n}function jC(t,e){if(e._queryParams.loadsAllData())return yh(t);{const i=e._queryIdentifier;return t.views.get(i)}}function BC(t,e){return jC(t,e)!=null}function Vi(t){return yh(t)!=null}function yh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu;function wN(t){A(!bu,"__referenceConstructor has already been defined"),bu=t}function xN(){return A(bu,"Reference.ts has not been loaded"),bu}let bN=1;class Fv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ce(null),this.pendingWriteTree_=XO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zC(t,e,n,i,s){return BO(t.pendingWriteTree_,e,n,i,s),s?hl(t,new Ds(TC(),e,n)):[]}function pr(t,e,n=!1){const i=zO(t.pendingWriteTree_,e);if(UO(t.pendingWriteTree_,e)){let r=new ce(null);return i.snap!=null?r=r.set(q(),!0):_t(i.children,o=>{r=r.set(new te(o),!0)}),hl(t,new gu(i.path,r,n))}else return[]}function ul(t,e,n){return hl(t,new Ds(ag(),e,n))}function SN(t,e,n){const i=ce.fromObject(n);return hl(t,new Na(ag(),e,i))}function EN(t,e){return hl(t,new Oa(ag(),e))}function CN(t,e,n){const i=pg(t,n);if(i){const s=mg(i),r=s.path,o=s.queryId,a=it(r,e),l=new Oa(lg(o),a);return gg(t,r,l)}else return[]}function Su(t,e,n,i,s=!1){const r=e._path,o=t.syncPointTree_.get(r);let a=[];if(o&&(e._queryIdentifier==="default"||BC(o,e))){const l=vN(o,e,n,i);yN(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=l.removed;if(a=l.events,!s){const u=c.findIndex(d=>d._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(r,(d,f)=>Vi(f));if(u&&!h){const d=t.syncPointTree_.subtree(r);if(!d.isEmpty()){const f=PN(d);for(let p=0;p<f.length;++p){const m=f[p],_=m.query,g=$C(t,m);t.listenProvider_.startListening(Jo(_),La(t,_),g.hashFn,g.onComplete)}}}!h&&c.length>0&&!i&&(u?t.listenProvider_.stopListening(Jo(e),null):c.forEach(d=>{const f=t.queryToTagMap.get(_h(d));t.listenProvider_.stopListening(Jo(d),f)}))}IN(t,c)}return a}function UC(t,e,n,i){const s=pg(t,i);if(s!=null){const r=mg(s),o=r.path,a=r.queryId,l=it(o,e),c=new Ds(lg(a),l,n);return gg(t,o,c)}else return[]}function TN(t,e,n,i){const s=pg(t,i);if(s){const r=mg(s),o=r.path,a=r.queryId,l=it(o,e),c=ce.fromObject(n),u=new Na(lg(a),l,c);return gg(t,o,u)}else return[]}function hp(t,e,n,i=!1){const s=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(s,(d,f)=>{const p=it(d,s);r=r||Ai(f,p),o=o||Vi(f)});let a=t.syncPointTree_.get(s);a?(o=o||Vi(a),r=r||Ai(a,q())):(a=new LC,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;r!=null?l=!0:(l=!1,r=F.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const m=Ai(p,q());m&&(r=r.updateImmediateChild(f,m))}));const c=BC(a,e);if(!c&&!e._queryParams.loadsAllData()){const d=_h(e);A(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const f=AN();t.queryToTagMap.set(d,f),t.tagToQueryMap.set(f,d)}const u=gh(t.pendingWriteTree_,s);let h=_N(a,e,n,u,r,l);if(!c&&!o&&!i){const d=jC(a,e);h=h.concat(RN(t,e,d))}return h}function fg(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=it(o,e),c=Ai(a,l);if(c)return c});return AC(s,e,r,n,!0)}function kN(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const h=it(c,n);i=i||Ai(u,h)});let s=t.syncPointTree_.get(n);s?i=i||Ai(s,q()):(s=new LC,t.syncPointTree_=t.syncPointTree_.set(n,s));const r=i!=null,o=r?new Fi(i,!0,!1):null,a=gh(t.pendingWriteTree_,e._path),l=FC(s,e,a,r?o.getNode():F.EMPTY_NODE,r);return hN(l)}function hl(t,e){return WC(e,t.syncPointTree_,null,gh(t.pendingWriteTree_,q()))}function WC(t,e,n,i){if(U(t.path))return HC(t,e,n,i);{const s=e.get(q());n==null&&s!=null&&(n=Ai(s,q()));let r=[];const o=z(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=RC(i,o);r=r.concat(WC(a,l,c,u))}return s&&(r=r.concat(dg(s,t,i,n))),r}}function HC(t,e,n,i){const s=e.get(q());n==null&&s!=null&&(n=Ai(s,q()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=RC(i,o),u=t.operationForChild(o);u&&(r=r.concat(HC(u,a,l,c)))}),s&&(r=r.concat(dg(s,t,i,n))),r}function $C(t,e){const n=e.query,i=La(t,n);return{hashFn:()=>(uN(e)||F.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?CN(t,n._path,i):EN(t,n._path);{const r=kD(s,n);return Su(t,n,null,r)}}}}function La(t,e){const n=_h(e);return t.queryToTagMap.get(n)}function _h(t){return t._path.toString()+"$"+t._queryIdentifier}function pg(t,e){return t.tagToQueryMap.get(e)}function mg(t){const e=t.indexOf("$");return A(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new te(t.substr(0,e))}}function gg(t,e,n){const i=t.syncPointTree_.get(e);A(i,"Missing sync point for query tag that we're tracking");const s=gh(t.pendingWriteTree_,e);return dg(i,n,s,null)}function PN(t){return t.fold((e,n,i)=>{if(n&&Vi(n))return[yh(n)];{let s=[];return n&&(s=VC(n)),_t(i,(r,o)=>{s=s.concat(o)}),s}})}function Jo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(xN())(t._repo,t._path):t}function IN(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const s=_h(i),r=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(r)}}}function AN(){return bN++}function RN(t,e,n){const i=e._path,s=La(t,e),r=$C(t,n),o=t.listenProvider_.startListening(Jo(e),s,r.hashFn,r.onComplete),a=t.syncPointTree_.subtree(i);if(s)A(!Vi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!U(c)&&u&&Vi(u))return[yh(u).query];{let d=[];return u&&(d=d.concat(VC(u).map(f=>f.query))),_t(h,(f,p)=>{d=d.concat(p)}),d}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Jo(u),La(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new yg(n)}node(){return this.node_}}class _g{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ae(this.path_,e);return new _g(this.syncTree_,n)}node(){return fg(this.syncTree_,this.path_)}}const MN=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Vv=function(t,e,n){if(!t||typeof t!="object")return t;if(A(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return DN(t[".sv"],e,n);if(typeof t[".sv"]=="object")return ON(t[".sv"],e);A(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},DN=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:A(!1,"Unexpected server value: "+t)}},ON=function(t,e,n){t.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&A(!1,"Unexpected increment value: "+i);const s=e.node();if(A(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},NN=function(t,e,n,i){return vg(e,new _g(n,t),i)},KC=function(t,e,n){return vg(t,new yg(e),n)};function vg(t,e,n){const i=t.getPriority().val(),s=Vv(i,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=Vv(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new De(a,Le(s)):t}else{const o=t;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new De(s))),o.forEachChild(pe,(a,l)=>{const c=vg(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function vh(t,e){let n=e instanceof te?e:new te(e),i=t,s=z(n);for(;s!==null;){const r=Rs(i.node.children,s)||{children:{},childCount:0};i=new wg(s,i,r),n=se(n),s=z(n)}return i}function Gs(t){return t.node.value}function xg(t,e){t.node.value=e,dp(t)}function GC(t){return t.node.childCount>0}function LN(t){return Gs(t)===void 0&&!GC(t)}function wh(t,e){_t(t.node.children,(n,i)=>{e(new wg(n,t,i))})}function YC(t,e,n,i){n&&!i&&e(t),wh(t,s=>{YC(s,e,!0,i)}),n&&i&&e(t)}function FN(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function dl(t){return new te(t.parent===null?t.name:dl(t.parent)+"/"+t.name)}function dp(t){t.parent!==null&&VN(t.parent,t.name,t)}function VN(t,e,n){const i=LN(n),s=an(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,dp(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,dp(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=/[\[\].#$\/\u0000-\u001F\u007F]/,BN=/[\[\].#$\u0000-\u001F\u007F]/,Sd=10*1024*1024,qC=function(t){return typeof t=="string"&&t.length!==0&&!jN.test(t)},QC=function(t){return typeof t=="string"&&t.length!==0&&!BN.test(t)},zN=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),QC(t)},fp=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Qm(t)||t&&typeof t=="object"&&an(t,".sv")},bg=function(t,e,n){const i=n instanceof te?new oO(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+rs(i));if(typeof e=="function")throw new Error(t+"contains a function "+rs(i)+" with contents = "+e.toString());if(Qm(e))throw new Error(t+"contains "+e.toString()+" "+rs(i));if(typeof e=="string"&&e.length>Sd/3&&dh(e)>Sd)throw new Error(t+"contains a string greater than "+Sd+" utf8 bytes "+rs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(_t(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!qC(o)))throw new Error(t+" contains an invalid key ("+o+") "+rs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);aO(i,o),bg(t,a,i),lO(i)}),s&&r)throw new Error(t+' contains ".value" child '+rs(i)+" in addition to actual children.")}},Sg=function(t,e,n,i){if(!(i&&n===void 0)&&!QC(n))throw new Error(FE(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},UN=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Sg(t,e,n,i)},WN=function(t,e){if(z(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},HN=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!zN(n))throw new Error(FE(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function XC(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();n!==null&&!tg(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function JC(t,e,n){XC(t,n),ZC(t,i=>tg(i,e))}function Zn(t,e,n){XC(t,n),ZC(t,i=>Jt(i,e)||Jt(e,i))}function ZC(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const r=s.path;e(r)?(KN(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function KN(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();xs&&Qe("event: "+n.toString()),ll(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="repo_interrupt",YN=25;class qN{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $N,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mu(),this.transactionQueueTree_=new wg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QN(t,e,n){if(t.stats_=Zm(t.repoInfo_),t.forceRestClient_||RD())t.server_=new pu(t.repoInfo_,(i,s,r,o)=>{jv(t,i,s,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Bv(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ie(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Bn(t.repoInfo_,e,(i,s,r,o)=>{jv(t,i,s,r,o)},i=>{Bv(t,i)},i=>{JN(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=LD(t.repoInfo_,()=>new OO(t.stats_,t.server_)),t.infoData_=new IO,t.infoSyncTree_=new Fv({startListening:(i,s,r,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=ul(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Cg(t,"connected",!1),t.serverSyncTree_=new Fv({startListening:(i,s,r,o)=>(t.server_.listen(i,r,s,(a,l)=>{const c=o(a,l);Zn(t.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function XN(t){const n=t.infoData_.getNode(new te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Eg(t){return MN({timestamp:XN(t)})}function jv(t,e,n,i,s){t.dataUpdateCount++;const r=new te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(i){const l=cu(n,c=>Le(c));o=TN(t.serverSyncTree_,r,l,s)}else{const l=Le(n);o=UC(t.serverSyncTree_,r,l,s)}else if(i){const l=cu(n,c=>Le(c));o=SN(t.serverSyncTree_,r,l)}else{const l=Le(n);o=ul(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=kg(t,r)),Zn(t.eventQueue_,a,o)}function Bv(t,e){Cg(t,"connected",e),e===!1&&eL(t)}function JN(t,e){_t(e,(n,i)=>{Cg(t,n,i)})}function Cg(t,e,n){const i=new te("/.info/"+e),s=Le(n);t.infoData_.updateSnapshot(i,s);const r=ul(t.infoSyncTree_,i,s);Zn(t.eventQueue_,i,r)}function eT(t){return t.nextWriteId_++}function ZN(t,e,n){const i=kN(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(s=>{const r=Le(s).withIndex(e._queryParams.getIndex());hp(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ul(t.serverSyncTree_,e._path,r);else{const a=La(t.serverSyncTree_,e);o=UC(t.serverSyncTree_,e._path,r,a)}return Zn(t.eventQueue_,e._path,o),Su(t.serverSyncTree_,e,n,null,!0),r},s=>(xh(t,"get for query "+Ie(e)+" failed: "+s),Promise.reject(new Error(s))))}function eL(t){xh(t,"onDisconnectEvents");const e=Eg(t),n=mu();op(t.onDisconnect_,q(),(s,r)=>{const o=NN(s,r,t.serverSyncTree_,e);CC(n,s,o)});let i=[];op(n,q(),(s,r)=>{i=i.concat(ul(t.serverSyncTree_,s,r));const o=oL(t,s);kg(t,o)}),t.onDisconnect_=mu(),Zn(t.eventQueue_,q(),i)}function tL(t,e,n){let i;z(e._path)===".info"?i=hp(t.infoSyncTree_,e,n):i=hp(t.serverSyncTree_,e,n),JC(t.eventQueue_,e._path,i)}function zv(t,e,n){let i;z(e._path)===".info"?i=Su(t.infoSyncTree_,e,n):i=Su(t.serverSyncTree_,e,n),JC(t.eventQueue_,e._path,i)}function nL(t){t.persistentConnection_&&t.persistentConnection_.interrupt(GN)}function xh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Qe(n,...e)}function iL(t,e,n,i,s,r){xh(t,"transaction on "+e);const o={path:e,update:n,onComplete:i,status:null,order:KE(),applyLocally:r,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Tg(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{bg("transaction failed: Data returned ",l,o.path),o.status=0;const c=vh(t.transactionQueueTree_,e),u=Gs(c)||[];u.push(o),xg(c,u);let h;typeof l=="object"&&l!==null&&an(l,".priority")?(h=Rs(l,".priority"),A(fp(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(fg(t.serverSyncTree_,e)||F.EMPTY_NODE).getPriority().val();const d=Eg(t),f=Le(l,h),p=KC(f,a,d);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=eT(t);const m=zC(t.serverSyncTree_,e,p,o.currentWriteId,o.applyLocally);Zn(t.eventQueue_,e,m),bh(t,t.transactionQueueTree_)}}function Tg(t,e,n){return fg(t.serverSyncTree_,e,n)||F.EMPTY_NODE}function bh(t,e=t.transactionQueueTree_){if(e||Sh(t,e),Gs(e)){const n=nT(t,e);A(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&sL(t,dl(e),n)}else GC(e)&&wh(e,n=>{bh(t,n)})}function sL(t,e,n){const i=n.map(c=>c.currentWriteId),s=Tg(t,e,i);let r=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];A(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=it(e,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{xh(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(pr(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Sh(t,vh(t.transactionQueueTree_,e)),bh(t,t.transactionQueueTree_),Zn(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)ll(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Tt("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}kg(t,e)}},o)}function kg(t,e){const n=tT(t,e),i=dl(n),s=nT(t,n);return rL(t,s,i),i}function rL(t,e,n){if(e.length===0)return;const i=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=it(n,l.path);let u=!1,h;if(A(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(pr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=YN)u=!0,h="maxretry",s=s.concat(pr(t.serverSyncTree_,l.currentWriteId,!0));else{const d=Tg(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){bg("transaction failed: Data returned ",f,l.path);let p=Le(f);typeof f=="object"&&f!=null&&an(f,".priority")||(p=p.updatePriority(d.getPriority()));const _=l.currentWriteId,g=Eg(t),y=KC(p,d,g);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=y,l.currentWriteId=eT(t),o.splice(o.indexOf(_),1),s=s.concat(zC(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),s=s.concat(pr(t.serverSyncTree_,_,!0))}else u=!0,h="nodata",s=s.concat(pr(t.serverSyncTree_,l.currentWriteId,!0))}Zn(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}Sh(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)ll(i[a]);bh(t,t.transactionQueueTree_)}function tT(t,e){let n,i=t.transactionQueueTree_;for(n=z(e);n!==null&&Gs(i)===void 0;)i=vh(i,n),e=se(e),n=z(e);return i}function nT(t,e){const n=[];return iT(t,e,n),n.sort((i,s)=>i.order-s.order),n}function iT(t,e,n){const i=Gs(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);wh(e,s=>{iT(t,s,n)})}function Sh(t,e){const n=Gs(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,xg(e,n.length>0?n:void 0)}wh(e,i=>{Sh(t,i)})}function oL(t,e){const n=dl(tT(t,e)),i=vh(t.transactionQueueTree_,e);return FN(i,s=>{Ed(t,s)}),Ed(t,i),YC(i,s=>{Ed(t,s)}),n}function Ed(t,e){const n=Gs(e);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(A(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(A(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(pr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?xg(e,void 0):n.length=r+1,Zn(t.eventQueue_,dl(e),s);for(let o=0;o<i.length;o++)ll(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function lL(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Tt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Uv=function(t,e){const n=cL(t),i=n.namespace;n.domain==="firebase.com"&&qn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&qn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||bD();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new rC(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new te(n.pathString)}},cL=function(t){let e="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=aL(t.substring(u,h)));const d=lL(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),r=i}"ns"in d&&(r=d.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,i,s){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ie(this.snapshot.exportVal())}}class rT{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return A(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return U(this._path)?null:pC(this._path)}get ref(){return new ln(this._repo,this._path)}get _queryIdentifier(){const e=Tv(this._queryParams),n=Xm(e);return n==="{}"?"default":n}get _queryObject(){return Tv(this._queryParams)}isEqual(e){if(e=je(e),!(e instanceof fl))return!1;const n=this._repo===e._repo,i=tg(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+rO(this._path)}}function uL(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function hL(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===bs){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ms)throw new Error(i);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==Ni)throw new Error(i);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===pe){if(e!=null&&!fp(e)||n!=null&&!fp(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(A(t.getIndex()instanceof sg||t.getIndex()===SC,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class ln extends fl{constructor(e,n){super(e,n,new og,!1)}get parent(){const e=gC(this._path);return e===null?null:new ln(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ns{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new te(e),i=Eu(this.ref,e);return new Ns(this._node.getChild(n),i,pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new Ns(s,Eu(this.ref,i),pe)))}hasChild(e){const n=new te(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zo(t,e){return t=je(t),t._checkNotDeleted("ref"),e!==void 0?Eu(t._root,e):t._root}function Eu(t,e){return t=je(t),z(t._path)===null?UN("child","path",e,!1):Sg("child","path",e,!1),new ln(t._repo,Ae(t._path,e))}function Pg(t){t=je(t);const e=new oT(()=>{}),n=new Eh(e);return ZN(t._repo,t,n).then(i=>new Ns(i,new ln(t._repo,t._path),t._queryParams.getIndex()))}class Eh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new sT("value",this,new Ns(e.snapshotNode,new ln(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new rT(this,e,n):null}matches(e){return e instanceof Eh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Ig{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new rT(this,e,n):null}createEvent(e,n){A(e.childName!=null,"Child events should have a childName.");const i=Eu(new ln(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new sT(e.type,this,new Ns(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ig?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function dL(t,e,n,i,s){let r;if(typeof i=="object"&&(r=void 0,s=i),typeof i=="function"&&(r=i),s&&s.onlyOnce){const l=n,c=(u,h)=>{zv(t._repo,t,a),l(u,h)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new oT(n,r||void 0),a=e==="value"?new Eh(o):new Ig(e,o);return tL(t._repo,t,a),()=>zv(t._repo,t,a)}function fL(t,e,n,i){return dL(t,"value",e,n,i)}class aT{}class pL extends aT{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fl(e._repo,e._path,kO(e._queryParams,this._limit),e._orderByCalled)}}function mL(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pL(t)}class gL extends aT{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){uL(e,"orderByChild");const n=new te(this._path);if(U(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new sg(n),s=PO(e._queryParams,i);return hL(s),new fl(e._repo,e._path,s,!0)}}function yL(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Sg("orderByChild","path",t,!1),new gL(t)}function _L(t,...e){let n=je(t);for(const i of e)n=i._apply(n);return n}mN(ln);wN(ln);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="FIREBASE_DATABASE_EMULATOR_HOST",pp={};let wL=!1;function xL(t,e,n,i){t.repoInfo_=new rC(e,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(t.authTokenProvider_=i)}function bL(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||qn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qe("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Uv(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[vL]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=Uv(r,s),a=o.repoInfo):l=!o.repoInfo.secure;const u=s&&l?new Ir(Ir.OWNER):new DD(t.name,t.options,e);HN("Invalid Firebase Database URL",o),U(o.path)||qn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=EL(a,t,u,new MD(t,n));return new CL(h,t)}function SL(t,e){const n=pp[e];(!n||n[t.key]!==t)&&qn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),nL(t),delete n[t.key]}function EL(t,e,n,i){let s=pp[e.name];s||(s={},pp[e.name]=s);let r=s[t.toURLString()];return r&&qn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new qN(t,wL,n,i),s[t.toURLString()]=r,r}class CL{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(QN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ln(this._repo,q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(SL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qn("Cannot call "+e+" on a deleted database.")}}function TL(t=qm(),e){const n=$s(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=KR("database");i&&kL(n,...i)}return n}function kL(t,e,n,i={}){t=je(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,r=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Oi(i,r.repoInfo_.emulatorOptions))return;qn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ir(Ir.OWNER);else if(i.mockUserToken){const a=typeof i.mockUserToken=="string"?i.mockUserToken:GR(i.mockUserToken,t.app.options.projectId);o=new Ir(a)}xL(r,s,i,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){_D(to),Sn(new rn("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return bL(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),zt(cv,uv,t),zt(cv,uv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Cd(t,e,n){var i;if(t=je(t),WN("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const s=(i=n==null?void 0:n.applyLocally)!==null&&i!==void 0?i:!0,r=new hh,o=(l,c,u)=>{let h=null;l?r.reject(l):(h=new Ns(u,new ln(t._repo,t._path),pe),r.resolve(new IL(c,h)))},a=fL(t,()=>{});return iL(t._repo,t._path,e,o,a,s),r.promise}Bn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Bn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};PL();var AL="firebase",RL="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zt(AL,RL,"app");const lT="@firebase/installations",Ag="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=1e4,uT=`w:${Ag}`,hT="FIS_v2",ML="https://firebaseinstallations.googleapis.com/v1",DL=60*60*1e3,OL="installations",NL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ls=new Hs(OL,NL,LL);function dT(t){return t instanceof En&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT({projectId:t}){return`${ML}/projects/${t}/installations`}function pT(t){return{token:t.token,requestStatus:2,expiresIn:VL(t.expiresIn),creationTime:Date.now()}}async function mT(t,e){const i=(await e.json()).error;return Ls.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function gT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function FL(t,{refreshToken:e}){const n=gT(t);return n.append("Authorization",jL(e)),n}async function yT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function VL(t){return Number(t.replace("s","000"))}function jL(t){return`${hT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=fT(t),s=gT(t),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:hT,appId:t.appId,sdkVersion:uT},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await yT(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:pT(c.authToken)}}else throw await mT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=/^[cdef][\w-]{21}$/,mp="";function WL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=HL(t);return UL.test(n)?n:mp}catch{return mp}}function HL(t){return zL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=new Map;function wT(t,e){const n=Ch(t);xT(n,e),$L(n,e)}function xT(t,e){const n=vT.get(t);if(n)for(const i of n)i(e)}function $L(t,e){const n=KL();n&&n.postMessage({key:t,fid:e}),GL()}let ps=null;function KL(){return!ps&&"BroadcastChannel"in self&&(ps=new BroadcastChannel("[Firebase] FID Change"),ps.onmessage=t=>{xT(t.data.key,t.data.fid)}),ps}function GL(){vT.size===0&&ps&&(ps.close(),ps=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="firebase-installations-database",qL=1,Fs="firebase-installations-store";let Td=null;function Rg(){return Td||(Td=BE(YL,qL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fs)}}})),Td}async function Cu(t,e){const n=Ch(t),s=(await Rg()).transaction(Fs,"readwrite"),r=s.objectStore(Fs),o=await r.get(n);return await r.put(e,n),await s.done,(!o||o.fid!==e.fid)&&wT(t,e.fid),e}async function bT(t){const e=Ch(t),i=(await Rg()).transaction(Fs,"readwrite");await i.objectStore(Fs).delete(e),await i.done}async function Th(t,e){const n=Ch(t),s=(await Rg()).transaction(Fs,"readwrite"),r=s.objectStore(Fs),o=await r.get(n),a=e(o);return a===void 0?await r.delete(n):await r.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&wT(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(t){let e;const n=await Th(t.appConfig,i=>{const s=QL(i),r=XL(t,s);return e=r.registrationPromise,r.installationEntry});return n.fid===mp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function QL(t){const e=t||{fid:WL(),registrationStatus:0};return ST(e)}function XL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ls.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=JL(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ZL(t)}:{installationEntry:e}}async function JL(t,e){try{const n=await BL(t,e);return Cu(t.appConfig,n)}catch(n){throw dT(n)&&n.customData.serverCode===409?await bT(t.appConfig):await Cu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ZL(t){let e=await Wv(t.appConfig);for(;e.registrationStatus===1;)await _T(100),e=await Wv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Mg(t);return i||n}return e}function Wv(t){return Th(t,e=>{if(!e)throw Ls.create("installation-not-found");return ST(e)})}function ST(t){return eF(t)?{fid:t.fid,registrationStatus:0}:t}function eF(t){return t.registrationStatus===1&&t.registrationTime+cT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF({appConfig:t,heartbeatServiceProvider:e},n){const i=nF(t,n),s=FL(t,n),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:uT,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await yT(()=>fetch(i,a));if(l.ok){const c=await l.json();return pT(c)}else throw await mT("Generate Auth Token",l)}function nF(t,{fid:e}){return`${fT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dg(t,e=!1){let n;const i=await Th(t.appConfig,r=>{if(!ET(r))throw Ls.create("not-registered");const o=r.authToken;if(!e&&rF(o))return r;if(o.requestStatus===1)return n=iF(t,e),r;{if(!navigator.onLine)throw Ls.create("app-offline");const a=aF(r);return n=sF(t,a),a}});return n?await n:i.authToken}async function iF(t,e){let n=await Hv(t.appConfig);for(;n.authToken.requestStatus===1;)await _T(100),n=await Hv(t.appConfig);const i=n.authToken;return i.requestStatus===0?Dg(t,e):i}function Hv(t){return Th(t,e=>{if(!ET(e))throw Ls.create("not-registered");const n=e.authToken;return lF(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function sF(t,e){try{const n=await tF(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Cu(t.appConfig,i),n}catch(n){if(dT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await bT(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Cu(t.appConfig,i)}throw n}}function ET(t){return t!==void 0&&t.registrationStatus===2}function rF(t){return t.requestStatus===2&&!oF(t)}function oF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+DL}function aF(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function lF(t){return t.requestStatus===1&&t.requestTime+cT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cF(t){const e=t,{installationEntry:n,registrationPromise:i}=await Mg(e);return i?i.catch(console.error):Dg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uF(t,e=!1){const n=t;return await hF(n),(await Dg(n,e)).token}async function hF(t){const{registrationPromise:e}=await Mg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t){if(!t||!t.options)throw kd("App Configuration");if(!t.name)throw kd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw kd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function kd(t){return Ls.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="installations",fF="installations-internal",pF=t=>{const e=t.getProvider("app").getImmediate(),n=dF(e),i=$s(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},mF=t=>{const e=t.getProvider("app").getImmediate(),n=$s(e,CT).getImmediate();return{getId:()=>cF(n),getToken:s=>uF(n,s)}};function gF(){Sn(new rn(CT,pF,"PUBLIC")),Sn(new rn(fF,mF,"PRIVATE"))}gF();zt(lT,Ag);zt(lT,Ag,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="analytics",yF="firebase_id",_F="origin",vF=60*1e3,wF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Og="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt=new fh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kt=new Hs("analytics","Analytics",xF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t){if(!t.startsWith(Og)){const e=kt.create("invalid-gtag-resource",{gtagURL:t});return yt.warn(e.message),""}return t}function TT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function SF(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function EF(t,e){const n=SF("firebase-js-sdk-policy",{createScriptURL:bF}),i=document.createElement("script"),s=`${Og}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function CF(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function TF(t,e,n,i,s,r){const o=i[s];try{if(o)await e[o];else{const l=(await TT(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){yt.error(a)}t("config",s,r)}async function kF(t,e,n,i,s){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await TT(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),t("event",i,s||{})}catch(r){yt.error(r)}}function PF(t,e,n,i){async function s(r,...o){try{if(r==="event"){const[a,l]=o;await kF(t,e,n,a,l)}else if(r==="config"){const[a,l]=o;await TF(t,e,n,i,a,l)}else if(r==="consent"){const[a,l]=o;t("consent",a,l)}else if(r==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(r==="set"){const[a]=o;t("set",a)}else t(r,...o)}catch(a){yt.error(a)}}return s}function IF(t,e,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=PF(r,t,e,n),{gtagCore:r,wrappedGtag:window[s]}}function AF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Og)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=30,MF=1e3;class DF{constructor(e={},n=MF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const kT=new DF;function OF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function NF(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:OF(i)},r=wF.replace("{app-id}",n),o=await fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw kt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function LF(t,e=kT,n){const{appId:i,apiKey:s,measurementId:r}=t.options;if(!i)throw kt.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw kt.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new jF;return setTimeout(async()=>{a.abort()},n!==void 0?n:vF),PT({appId:i,apiKey:s,measurementId:r},o,a,e)}async function PT(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=kT){var r;const{appId:o,measurementId:a}=t;try{await FF(i,e)}catch(l){if(a)return yt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await NF(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!VF(c)){if(s.deleteThrottleMetadata(o),a)return yt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((r=c==null?void 0:c.customData)===null||r===void 0?void 0:r.httpStatus)===503?ev(n,s.intervalMillis,RF):ev(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,h),yt.debug(`Calling attemptFetch again in ${u} millis`),PT(t,h,i,s)}}function FF(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(r),i(kt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function VF(t){if(!(t instanceof En)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class jF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function BF(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const r=await e,o=Object.assign(Object.assign({},i),{send_to:r});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(){if(OE())try{await NE()}catch(t){return yt.warn(kt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return yt.warn(kt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function UF(t,e,n,i,s,r,o){var a;const l=LF(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&yt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>yt.error(f)),e.push(l);const c=zF().then(f=>{if(f)return i.getId()}),[u,h]=await Promise.all([l,c]);AF(r)||EF(r,u.measurementId),s("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[_F]="firebase",d.update=!0,h!=null&&(d[yF]=h),s("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.app=e}_delete(){return delete ea[this.app.options.appId],Promise.resolve()}}let ea={},$v=[];const Kv={};let Pd="dataLayer",HF="gtag",Gv,IT,Yv=!1;function $F(){const t=[];if(RE()&&t.push("This is a browser extension environment."),QR()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=kt.create("invalid-analytics-context",{errorInfo:e});yt.warn(n.message)}}function KF(t,e,n){$F();const i=t.options.appId;if(!i)throw kt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)yt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kt.create("no-api-key");if(ea[i]!=null)throw kt.create("already-exists",{id:i});if(!Yv){CF(Pd);const{wrappedGtag:r,gtagCore:o}=IF(ea,$v,Kv,Pd,HF);IT=r,Gv=o,Yv=!0}return ea[i]=UF(t,$v,Kv,e,Gv,Pd,n),new WF(t)}function GF(t=qm()){t=je(t);const e=$s(t,Tu);return e.isInitialized()?e.getImmediate():YF(t)}function YF(t,e={}){const n=$s(t,Tu);if(n.isInitialized()){const s=n.getImmediate();if(Oi(e,n.getOptions()))return s;throw kt.create("already-initialized")}return n.initialize({options:e})}function qF(t,e,n,i){t=je(t),BF(IT,ea[t.app.options.appId],e,n,i).catch(s=>yt.error(s))}const qv="@firebase/analytics",Qv="0.10.12";function QF(){Sn(new rn(Tu,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return KF(i,s,n)},"PUBLIC")),Sn(new rn("analytics-internal",t,"PRIVATE")),zt(qv,Qv),zt(qv,Qv,"esm2017");function t(e){try{const n=e.getProvider(Tu).getImmediate();return{logEvent:(i,s,r)=>qF(n,i,s,r)}}catch(n){throw kt.create("interop-component-reg-failed",{reason:n})}}}QF();function Ng(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function AT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XF=AT,RT=new Hs("auth","Firebase",AT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new fh("@firebase/auth");function JF(t,...e){ku.logLevel<=ee.WARN&&ku.warn(`Auth (${to}): ${t}`,...e)}function Sc(t,...e){ku.logLevel<=ee.ERROR&&ku.error(`Auth (${to}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,...e){throw Lg(t,...e)}function _n(t,...e){return Lg(t,...e)}function MT(t,e,n){const i=Object.assign(Object.assign({},XF()),{[e]:n});return new Hs("auth","Firebase",i).create(e,{appName:t.name})}function zn(t){return MT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return RT.create(t,...e)}function j(t,e,...n){if(!t)throw Lg(e,...n)}function Nn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sc(e),new Error(e)}function Qn(t,e){t||Nn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZF(){return Xv()==="http:"||Xv()==="https:"}function Xv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZF()||RE()||"connection"in navigator)?navigator.onLine:!0}function t2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=Gm()||ME()}get(){return e2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new pl(3e4,6e4);function Ki(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gi(t,e,n,i,s={}){return OT(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=eo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},r);return YR()||(c.referrerPolicy="no-referrer"),DT.fetch()(NT(t,t.config.apiHost,n,a),c)})}async function OT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},n2),e);try{const s=new r2(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Hl(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hl(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw MT(t,u,c);on(t,u)}}catch(s){if(s instanceof En)throw s;on(t,"network-request-failed",{message:String(s)})}}async function ml(t,e,n,i,s={}){const r=await Gi(t,e,n,i,s);return"mfaPendingCredential"in r&&on(t,"multi-factor-auth-required",{_serverResponse:r}),r}function NT(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?Fg(t.config,s):`${t.config.apiScheme}://${s}`}function s2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class r2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_n(this.auth,"network-request-failed")),i2.get())})}}function Hl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=_n(t,e,i);return s.customData._tokenResponse=n,s}function Jv(t){return t!==void 0&&t.enterprise!==void 0}class o2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return s2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function a2(t,e){return Gi(t,"GET","/v2/recaptchaConfig",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e){return Gi(t,"POST","/v1/accounts:delete",e)}async function LT(t,e){return Gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c2(t,e=!1){const n=je(t),i=await n.getIdToken(e),s=Vg(i);j(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:ta(Id(s.auth_time)),issuedAtTime:ta(Id(s.iat)),expirationTime:ta(Id(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Id(t){return Number(t)*1e3}function Vg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Sc("JWT malformed, contained fewer than 3 sections"),null;try{const s=lu(n);return s?JSON.parse(s):(Sc("Failed to decode base64 JWT payload"),null)}catch(s){return Sc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Zv(t){const e=Vg(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof En&&u2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function u2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ta(this.lastLoginAt),this.creationTime=ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pu(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Fa(t,LT(n,{idToken:i}));j(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?FT(r.providerUserInfo):[],a=f2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new yp(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function d2(t){const e=je(t);await Pu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f2(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function FT(t){return t.map(e=>{var{providerId:n}=e,i=Ng(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e){const n=await OT(t,{},async()=>{const i=eo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=NT(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function m2(t,e){return Gi(t,"POST","/v2/accounts:revokeToken",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){j(e.length!==0,"internal-error");const n=Zv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await p2(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new Ar;return i&&(j(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(j(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(j(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ar,this.toJSON())}_performRefresh(){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ln{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=Ng(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new h2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new yp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Fa(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return c2(this,e)}reload(){return d2(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Pu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await Fa(this,l2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:x,isAnonymous:w,providerData:S,stsTokenManager:E}=n;j(v&&E,e,"internal-error");const b=Ar.fromJSON(this.name,E);j(typeof v=="string",e,"internal-error"),ti(h,e.name),ti(d,e.name),j(typeof x=="boolean",e,"internal-error"),j(typeof w=="boolean",e,"internal-error"),ti(f,e.name),ti(p,e.name),ti(m,e.name),ti(_,e.name),ti(g,e.name),ti(y,e.name);const P=new Ln({uid:v,auth:e,email:d,emailVerified:x,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:b,createdAt:g,lastLoginAt:y});return S&&Array.isArray(S)&&(P.providerData=S.map(T=>Object.assign({},T))),_&&(P._redirectEventId=_),P}static async _fromIdTokenResponse(e,n,i=!1){const s=new Ar;s.updateFromServerResponse(n);const r=new Ln({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Pu(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];j(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?FT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new Ar;a.updateFromIdToken(i);const l=new Ln({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new yp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new Map;function Fn(t){Qn(t instanceof Function,"Expected a class definition");let e=e0.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,e0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}VT.type="NONE";const t0=VT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t,e,n){return`firebase:${t}:${e}:${n}`}class Rr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Ec(this.userKey,s.apiKey,r),this.fullPersistenceKey=Ec("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ln._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Rr(Fn(t0),e,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||Fn(t0);const o=Ec(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Ln._fromJSON(e,u);c!==r&&(a=h),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Rr(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Rr(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HT(e))return"Blackberry";if($T(e))return"Webos";if(BT(e))return"Safari";if((e.includes("chrome/")||zT(e))&&!e.includes("edge/"))return"Chrome";if(WT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function jT(t=ot()){return/firefox\//i.test(t)}function BT(t=ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zT(t=ot()){return/crios\//i.test(t)}function UT(t=ot()){return/iemobile/i.test(t)}function WT(t=ot()){return/android/i.test(t)}function HT(t=ot()){return/blackberry/i.test(t)}function $T(t=ot()){return/webos/i.test(t)}function jg(t=ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function g2(t=ot()){var e;return jg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function y2(){return qR()&&document.documentMode===10}function KT(t=ot()){return jg(t)||WT(t)||$T(t)||HT(t)||/windows phone/i.test(t)||UT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e=[]){let n;switch(t){case"Browser":n=n0(ot());break;case"Worker":n=`${n0(ot())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${to}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(t,e={}){return Gi(t,"GET","/v2/passwordPolicy",Ki(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=6;class x2{constructor(e){var n,i,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:w2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i0(this),this.idTokenSubscription=new i0(this),this.beforeStateQueue=new _2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Rr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await LT(this,{idToken:e}),i=await Ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ft(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(zn(this));const n=e?je(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await v2(this),n=new x2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await m2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=await Rr.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&JF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ys(t){return je(t)}class i0{constructor(e){this.auth=e,this.observer=null,this.addObserver=iM(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S2(t){kh=t}function YT(t){return kh.loadJS(t)}function E2(){return kh.recaptchaEnterpriseScript}function C2(){return kh.gapiScript}function T2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class k2{constructor(){this.enterprise=new P2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class P2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const I2="recaptcha-enterprise",qT="NO_RECAPTCHA";class A2{constructor(e){this.type=I2,this.auth=Ys(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{a2(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new o2(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;Jv(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(qT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new k2().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{i(this.auth).then(a=>{if(!n&&Jv(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=E2();l.length!==0&&(l+=a),YT(l).then(()=>{s(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function vo(t,e,n,i=!1,s=!1){const r=new A2(t);let o;if(s)o=qT;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function _p(t,e,n,i,s){var r,o;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await vo(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await vo(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)});else if(s==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await vo(t,e,n);return i(t,a).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await vo(t,e,n,!1,!0);return i(t,u)}return Promise.reject(l)})}else{const a=await vo(t,e,n,!1,!0);return i(t,a)}else return Promise.reject(s+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t,e){const n=$s(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Oi(r,e??{}))return s;on(s,"already-initialized")}return n.initialize({options:e})}function M2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function D2(t,e,n){const i=Ys(t);j(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=QT(e),{host:o,port:a}=O2(e),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){j(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),j(Oi(c,i.config.emulator)&&Oi(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,s||N2()}function QT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function O2(t){const e=QT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:s0(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:s0(o)}}}function s0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function N2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,n){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}}async function L2(t,e){return Gi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t,e){return ml(t,"POST","/v1/accounts:signInWithPassword",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(t,e){return ml(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))}async function j2(t,e){return ml(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends Bg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Va(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Va(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(e,n,"signInWithPassword",F2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return V2(e,{email:this._email,oobCode:this._password});default:on(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(e,i,"signUpPassword",L2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return j2(e,{idToken:n,email:this._email,oobCode:this._password});default:on(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mr(t,e){return ml(t,"POST","/v1/accounts:signInWithIdp",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="http://localhost";class Vs extends Bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):on("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=Ng(n,["providerId","signInMethod"]);if(!i||!s)return null;const o=new Vs(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Mr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Mr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mr(e,n)}buildRequest(){const e={requestUri:B2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=eo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function U2(t){const e=Mo(Do(t)).link,n=e?Mo(Do(e)).deep_link_id:null,i=Mo(Do(t)).deep_link_id;return(i?Mo(Do(i)).link:null)||i||n||e||t}class zg{constructor(e){var n,i,s,r,o,a;const l=Mo(Do(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,h=z2((s=l.mode)!==null&&s!==void 0?s:null);j(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=U2(e);try{return new zg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,n){return Va._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=zg.parseLink(n);return j(i,"argument-error"),Va._fromEmailAndCode(e,i.code,i.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends XT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends gl{constructor(){super("facebook.com")}static credential(e){return Vs._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ui.credential(n,i)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends gl{constructor(){super("github.com")}static credential(e){return Vs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends gl{constructor(){super("twitter.com")}static credential(e,n){return Vs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return di.credential(n,i)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(t,e){return ml(t,"POST","/v1/accounts:signUp",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await Ln._fromIdTokenResponse(e,i,s),o=r0(i);return new js({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=r0(i);return new js({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function r0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends En{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Iu.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Iu(e,n,i,s)}}function JT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Iu._fromErrorAndOperation(t,r,e,i):r})}async function H2(t,e,n=!1){const i=await Fa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return js._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(t,e,n=!1){const{auth:i}=t;if(Ft(i.app))return Promise.reject(zn(i));const s="reauthenticate";try{const r=await Fa(t,JT(i,s,e,t),n);j(r.idToken,i,"internal-error");const o=Vg(r.idToken);j(o,i,"internal-error");const{sub:a}=o;return j(t.uid===a,i,"user-mismatch"),js._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&on(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t,e,n=!1){if(Ft(t.app))return Promise.reject(zn(t));const i="signIn",s=await JT(t,i,e),r=await js._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function K2(t,e){return ZT(Ys(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t){const e=Ys(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function G2(t,e,n){if(Ft(t.app))return Promise.reject(zn(t));const i=Ys(t),o=await _p(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",W2,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ek(t),l}),a=await js._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function Y2(t,e,n){return Ft(t.app)?Promise.reject(zn(t)):K2(je(t),io.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ek(t),i})}function q2(t,e,n,i){return je(t).onIdTokenChanged(e,n,i)}function Q2(t,e,n){return je(t).beforeAuthStateChanged(e,n)}function X2(t,e,n,i){return je(t).onAuthStateChanged(e,n,i)}function J2(t){return je(t).signOut()}const Au="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Au,"1"),this.storage.removeItem(Au),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=1e3,eV=10;class nk extends tk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);y2()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eV):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nk.type="LOCAL";const tV=nk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik extends tk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ik.type="SESSION";const sk=ik;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Ph(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await nV(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Ug("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function sV(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function rV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aV(){return rk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="firebaseLocalStorageDb",lV=1,Ru="firebaseLocalStorage",ak="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(t,e){return t.transaction([Ru],e?"readwrite":"readonly").objectStore(Ru)}function cV(){const t=indexedDB.deleteDatabase(ok);return new yl(t).toPromise()}function vp(){const t=indexedDB.open(ok,lV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ru,{keyPath:ak})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ru)?e(i):(i.close(),await cV(),e(await vp()))})})}async function o0(t,e,n){const i=Ih(t,!0).put({[ak]:e,value:n});return new yl(i).toPromise()}async function uV(t,e){const n=Ih(t,!1).get(e),i=await new yl(n).toPromise();return i===void 0?null:i.value}function a0(t,e){const n=Ih(t,!0).delete(e);return new yl(n).toPromise()}const hV=800,dV=3;class lk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>dV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(aV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rV(),!this.activeServiceWorker)return;this.sender=new iV(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vp();return await o0(e,Au,"1"),await a0(e,Au),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>o0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>uV(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>a0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Ih(s,!1).getAll();return new yl(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lk.type="LOCAL";const fV=lk;new pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t,e){return e?Fn(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends Bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mV(t){return ZT(t.auth,new Wg(t),t.bypassAuthState)}function gV(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),$2(n,new Wg(t),t.bypassAuthState)}async function yV(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),H2(n,new Wg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mV;case"linkViaPopup":case"linkViaRedirect":return yV;case"reauthViaPopup":case"reauthViaRedirect":return gV;default:on(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new pl(2e3,1e4);class mr extends ck{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,mr.currentPopupAction&&mr.currentPopupAction.cancel(),mr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return j(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_V.get())};e()}}mr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="pendingRedirect",Cc=new Map;class wV extends ck{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Cc.get(this.auth._key());if(!e){try{const i=await xV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Cc.set(this.auth._key(),e)}return this.bypassAuthState||Cc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xV(t,e){const n=EV(e),i=SV(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function bV(t,e){Cc.set(t._key(),e)}function SV(t){return Fn(t._redirectPersistence)}function EV(t){return Ec(vV,t.config.apiKey,t.name)}async function CV(t,e,n=!1){if(Ft(t.app))return Promise.reject(zn(t));const i=Ys(t),s=pV(i,e),o=await new wV(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=10*60*1e3;class kV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!uk(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TV&&this.cachedEventUids.clear(),this.cachedEventUids.has(l0(e))}saveEventToCache(e){this.cachedEventUids.add(l0(e)),this.lastProcessedEventTime=Date.now()}}function l0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(t,e={}){return Gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RV=/^https?/;async function MV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IV(t);for(const n of e)try{if(DV(n))return}catch{}on(t,"unauthorized-domain")}function DV(t){const e=gp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!RV.test(n))return!1;if(AV.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new pl(3e4,6e4);function c0(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NV(t){return new Promise((e,n)=>{var i,s,r;function o(){c0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c0(),n(_n(t,"network-request-failed"))},timeout:OV.get()})}if(!((s=(i=vn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=vn().gapi)===null||r===void 0)&&r.load)o();else{const a=T2("iframefcb");return vn()[a]=()=>{gapi.load?o():n(_n(t,"network-request-failed"))},YT(`${C2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Tc=null,e})}let Tc=null;function LV(t){return Tc=Tc||NV(t),Tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=new pl(5e3,15e3),VV="__/auth/iframe",jV="emulator/auth/iframe",BV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UV(t){const e=t.config;j(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fg(e,jV):`https://${t.config.authDomain}/${VV}`,i={apiKey:e.apiKey,appName:t.name,v:to},s=zV.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${eo(i).slice(1)}`}async function WV(t){const e=await LV(t),n=vn().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:UV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BV,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=_n(t,"network-request-failed"),a=vn().setTimeout(()=>{r(o)},FV.get());function l(){vn().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$V=500,KV=600,GV="_blank",YV="http://localhost";class u0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qV(t,e,n,i=$V,s=KV){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},HV),{width:i.toString(),height:s.toString(),top:r,left:o}),c=ot().toLowerCase();n&&(a=zT(c)?GV:n),jT(c)&&(e=e||YV,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(g2(c)&&a!=="_self")return QV(e||"",a),new u0(null);const h=window.open(e||"",a,u);j(h,t,"popup-blocked");try{h.focus()}catch{}return new u0(h)}function QV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="__/auth/handler",JV="emulator/auth/handler",ZV=encodeURIComponent("fac");async function h0(t,e,n,i,s,r){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:to,eventId:s};if(e instanceof XT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Qf(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(r||{}))o[u]=h}if(e instanceof gl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${ZV}=${encodeURIComponent(l)}`:"";return`${ej(t)}?${eo(a).slice(1)}${c}`}function ej({config:t}){return t.emulator?Fg(t,JV):`https://${t.authDomain}/${XV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="webStorageSupport";class tj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sk,this._completeRedirectFn=CV,this._overrideRedirectResult=bV}async _openPopup(e,n,i,s){var r;Qn((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await h0(e,n,i,gp(),s);return qV(e,o,Ug())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await h0(e,n,i,gp(),s);return sV(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Qn(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await WV(e),i=new kV(e);return n.register("authEvent",s=>(j(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ad,{type:Ad},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[Ad];o!==void 0&&n(!!o),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KT()||BT()||jg()}}const nj=tj;var d0="@firebase/auth",f0="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rj(t){Sn(new rn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;j(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GT(t)},c=new b2(i,s,r,l);return M2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Sn(new rn("auth-internal",e=>{const n=Ys(e.getProvider("auth").getImmediate());return(i=>new ij(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zt(d0,f0,sj(t)),zt(d0,f0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=5*60,aj=AE("authIdTokenMaxAge")||oj;let p0=null;const lj=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>aj)return;const s=n==null?void 0:n.token;p0!==s&&(p0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function cj(t=qm()){const e=$s(t,"auth");if(e.isInitialized())return e.getImmediate();const n=R2(t,{popupRedirectResolver:nj,persistence:[fV,tV,sk]}),i=AE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=lj(r.toString());Q2(n,o,()=>o(n.currentUser)),q2(n,a=>o(a))}}const s=PE("auth");return s&&D2(n,`http://${s}`),n}function uj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}S2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=_n("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",uj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rj("Browser");const hj={apiKey:"AIzaSyBucDi4QuIDubWIbyvyOQuYr0W_zBMCxWU",authDomain:"learningassist-60e5b.firebaseapp.com",databaseURL:"https://learningassist-60e5b-default-rtdb.europe-west1.firebasedatabase.app",projectId:"learningassist-60e5b",storageBucket:"learningassist-60e5b.firebasestorage.app",messagingSenderId:"325077297191",appId:"1:325077297191:web:a8231802133850b2404602",measurementId:"G-R9SZZBB87L"},Hg=zE(hj);GF(Hg);const Mu=cj(Hg),na=TL(Hg),hk=6048e5,dj=864e5,m0=Symbol.for("constructDateFrom");function ji(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&m0 in t?t[m0](e):t instanceof Date?new t.constructor(e):new Date(e)}function cn(t,e){return ji(e||t,t)}let fj={};function Ah(){return fj}function ja(t,e){var a,l,c,u;const n=Ah(),i=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=cn(t,e==null?void 0:e.in),r=s.getDay(),o=(r<i?7:0)+r-i;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Du(t,e){return ja(t,{...e,weekStartsOn:1})}function dk(t,e){const n=cn(t,e==null?void 0:e.in),i=n.getFullYear(),s=ji(n,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const r=Du(s),o=ji(n,0);o.setFullYear(i,0,4),o.setHours(0,0,0,0);const a=Du(o);return n.getTime()>=r.getTime()?i+1:n.getTime()>=a.getTime()?i:i-1}function g0(t){const e=cn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function pj(t,...e){const n=ji.bind(null,t||e.find(i=>typeof i=="object"));return e.map(n)}function y0(t,e){const n=cn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function mj(t,e,n){const[i,s]=pj(n==null?void 0:n.in,t,e),r=y0(i),o=y0(s),a=+r-g0(r),l=+o-g0(o);return Math.round((a-l)/dj)}function gj(t,e){const n=dk(t,e),i=ji((e==null?void 0:e.in)||t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Du(i)}function yj(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _j(t){return!(!yj(t)&&typeof t!="number"||isNaN(+cn(t)))}function vj(t,e){const n=cn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const wj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xj=(t,e,n)=>{let i;const s=wj[t];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Rd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const bj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Sj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ej={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cj={date:Rd({formats:bj,defaultWidth:"full"}),time:Rd({formats:Sj,defaultWidth:"full"}),dateTime:Rd({formats:Ej,defaultWidth:"full"})},Tj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kj=(t,e,n,i)=>Tj[t];function wo(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let s;if(i==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const r=t.argumentCallback?t.argumentCallback(e):e;return s[r]}}const Pj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ij={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Aj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Rj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Dj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Oj=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Nj={ordinalNumber:Oj,era:wo({values:Pj,defaultWidth:"wide"}),quarter:wo({values:Ij,defaultWidth:"wide",argumentCallback:t=>t-1}),month:wo({values:Aj,defaultWidth:"wide"}),day:wo({values:Rj,defaultWidth:"wide"}),dayPeriod:wo({values:Mj,defaultWidth:"wide",formattingValues:Dj,defaultFormattingWidth:"wide"})};function xo(t){return(e,n={})=>{const i=n.width,s=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],r=e.match(s);if(!r)return null;const o=r[0],a=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Fj(a,h=>h.test(o)):Lj(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Lj(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Fj(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Vj(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const s=i[0],r=e.match(t.parsePattern);if(!r)return null;let o=t.valueCallback?t.valueCallback(r[0]):r[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const jj=/^(\d+)(th|st|nd|rd)?/i,Bj=/\d+/i,zj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Uj={any:[/^b/i,/^(a|c)/i]},Wj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hj={any:[/1/i,/2/i,/3/i,/4/i]},$j={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Qj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Xj={ordinalNumber:Vj({matchPattern:jj,parsePattern:Bj,valueCallback:t=>parseInt(t,10)}),era:xo({matchPatterns:zj,defaultMatchWidth:"wide",parsePatterns:Uj,defaultParseWidth:"any"}),quarter:xo({matchPatterns:Wj,defaultMatchWidth:"wide",parsePatterns:Hj,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xo({matchPatterns:$j,defaultMatchWidth:"wide",parsePatterns:Kj,defaultParseWidth:"any"}),day:xo({matchPatterns:Gj,defaultMatchWidth:"wide",parsePatterns:Yj,defaultParseWidth:"any"}),dayPeriod:xo({matchPatterns:qj,defaultMatchWidth:"any",parsePatterns:Qj,defaultParseWidth:"any"})},Jj={code:"en-US",formatDistance:xj,formatLong:Cj,formatRelative:kj,localize:Nj,match:Xj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Zj(t,e){const n=cn(t,e==null?void 0:e.in);return mj(n,vj(n))+1}function eB(t,e){const n=cn(t,e==null?void 0:e.in),i=+Du(n)-+gj(n);return Math.round(i/hk)+1}function fk(t,e){var u,h,d,f;const n=cn(t,e==null?void 0:e.in),i=n.getFullYear(),s=Ah(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(d=s.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=ji((e==null?void 0:e.in)||t,0);o.setFullYear(i+1,0,r),o.setHours(0,0,0,0);const a=ja(o,e),l=ji((e==null?void 0:e.in)||t,0);l.setFullYear(i,0,r),l.setHours(0,0,0,0);const c=ja(l,e);return+n>=+a?i+1:+n>=+c?i:i-1}function tB(t,e){var a,l,c,u;const n=Ah(),i=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=fk(t,e),r=ji((e==null?void 0:e.in)||t,0);return r.setFullYear(s,0,i),r.setHours(0,0,0,0),ja(r,e)}function nB(t,e){const n=cn(t,e==null?void 0:e.in),i=+ja(n,e)-+tB(n,e);return Math.round(i/hk)+1}function X(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const ni={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return X(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):X(n+1,2)},d(t,e){return X(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return X(t.getHours()%12||12,e.length)},H(t,e){return X(t.getHours(),e.length)},m(t,e){return X(t.getMinutes(),e.length)},s(t,e){return X(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),s=Math.trunc(i*Math.pow(10,n-3));return X(s,e.length)}},Zs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_0={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),s=i>0?i:1-i;return n.ordinalNumber(s,{unit:"year"})}return ni.y(t,e)},Y:function(t,e,n,i){const s=fk(t,i),r=s>0?s:1-s;if(e==="YY"){const o=r%100;return X(o,2)}return e==="Yo"?n.ordinalNumber(r,{unit:"year"}):X(r,e.length)},R:function(t,e){const n=dk(t);return X(n,e.length)},u:function(t,e){const n=t.getFullYear();return X(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return X(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return X(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return ni.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return X(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const s=nB(t,i);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):X(s,e.length)},I:function(t,e,n){const i=eB(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):X(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ni.d(t,e)},D:function(t,e,n){const i=Zj(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):X(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const s=t.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return X(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const s=t.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return X(r,e.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),s=i===0?7:i;switch(e){case"i":return String(s);case"ii":return X(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let s;switch(i===12?s=Zs.noon:i===0?s=Zs.midnight:s=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let s;switch(i>=17?s=Zs.evening:i>=12?s=Zs.afternoon:i>=4?s=Zs.morning:s=Zs.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return ni.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ni.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):X(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):X(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ni.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ni.s(t,e)},S:function(t,e){return ni.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return w0(i);case"XXXX":case"XX":return os(i);case"XXXXX":case"XXX":default:return os(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return w0(i);case"xxxx":case"xx":return os(i);case"xxxxx":case"xxx":default:return os(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+v0(i,":");case"OOOO":default:return"GMT"+os(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+v0(i,":");case"zzzz":default:return"GMT"+os(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return X(i,e.length)},T:function(t,e,n){return X(+t,e.length)}};function v0(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),s=Math.trunc(i/60),r=i%60;return r===0?n+String(s):n+String(s)+e+X(r,2)}function w0(t,e){return t%60===0?(t>0?"-":"+")+X(Math.abs(t)/60,2):os(t,e)}function os(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),s=X(Math.trunc(i/60),2),r=X(i%60,2);return n+s+e+r}const x0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},pk=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},iB=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],s=n[2];if(!s)return x0(t,e);let r;switch(i){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",x0(i,e)).replace("{{time}}",pk(s,e))},sB={p:pk,P:iB},rB=/^D+$/,oB=/^Y+$/,aB=["D","DD","YY","YYYY"];function lB(t){return rB.test(t)}function cB(t){return oB.test(t)}function uB(t,e,n){const i=hB(t,e,n);if(console.warn(i),aB.includes(t))throw new RangeError(i)}function hB(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pB=/^'([^]*?)'?$/,mB=/''/g,gB=/[a-zA-Z]/;function wp(t,e,n){var u,h,d,f,p,m,_,g;const i=Ah(),s=(n==null?void 0:n.locale)??i.locale??Jj,r=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(d=i.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??i.weekStartsOn??((g=(_=i.locale)==null?void 0:_.options)==null?void 0:g.weekStartsOn)??0,a=cn(t,n==null?void 0:n.in);if(!_j(a))throw new RangeError("Invalid time value");let l=e.match(fB).map(y=>{const v=y[0];if(v==="p"||v==="P"){const x=sB[v];return x(y,s.formatLong)}return y}).join("").match(dB).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:yB(y)};if(_0[v])return{isToken:!0,value:y};if(v.match(gB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:r,weekStartsOn:o,locale:s};return l.map(y=>{if(!y.isToken)return y.value;const v=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&cB(v)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&lB(v))&&uB(v,e,String(t));const x=_0[v[0]];return x(a,v,s.localize,c)}).join("")}function yB(t){const e=t.match(pB);return e?e[1].replace(mB,"'"):t}const _B=t=>{const e=`https://youglish.com/pronounce/${t}/english/us`;window.open(e,"_blank")};function vB(t){return/[^a-zA-Z\s.,!?';:"()\-\u2019]/.test(t)}const wB=t=>{const e=`https://translate.google.com/?sl=zh-CN&tl=en&text=${t}&op=translate`;window.open(e,"_blank")},xB=t=>{const e=`https://pixabay.com/images/search/${t}/`;window.open(e,"_blank")};function mk(t){return t.replace(/[^a-zA-Z]/g,"")}const bB=async t=>{var e;try{const n=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${t}`);if(!n.ok)throw new Error("Network response was not ok");const i=await n.json();if(i&&i.length>0){const s={word:i[0].word,phonetic:((e=i[0].phonetics[0])==null?void 0:e.text)||"",EnglishDefinition:[""],exampleSentences:[""]};if(i[0].meanings){for(const r of i[0].meanings)if(r.definitions)for(const o of r.definitions)s.EnglishDefinition.push(o.definition),o.example&&s.exampleSentences.length<8&&s.exampleSentences.push(o.example)}return s}else return null}catch(n){return console.error("Error fetching word data:",n),null}};async function SB(t,e){const n=wp(new Date,"yyyy-MM-dd"),i=Zo(na,`users/${t}/dailyQueries/${n}/words`),s=Zo(na,`users/${t}/dailyQueries/${n}/count`),r=Zo(na,`users/${t}/allTimeQueries/${e}`),o=await Pg(i);if(!(o.exists()&&o.val()[e]))try{await Cd(i,l=>l?(l[e]=!0,l):{[e]:!0}),await Cd(s,l=>l?l+1:1)}catch(l){throw console.error("Daily queries transaction failed:",l),l}try{await Cd(r,l=>(l||0)+1)}catch(l){throw console.error("All-time queries transaction failed:",l),l}}async function b0(t,e){const n=Zo(na,`users/${t}/allTimeQueries`),i=_L(n,yL("count"),mL(e)),s=await Pg(i);if(s.exists()){const r={};return Object.keys(s.val()).reverse().forEach(a=>{r[a]=s.val()[a]}),r}else return null}async function EB(t,e){const n=Zo(na,`users/${t}/dailyQueries/${e}`),i=await Pg(n);return i.exists()?i.val():null}const CB=({word:t,phonetic:e,EnglishDefinitions:n,exampleSentences:i,onSearch:s})=>{const{play:r,stop:o}=LR(t),a=k.useCallback(()=>{o(),r()},[r,o]);k.useEffect(()=>o,[t,o]);const l=c=>{s(mk(c))};return C.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-4 relative",children:[C.jsxs("h2",{className:"text-6xl font-bold mb-2",children:[C.jsxs("span",{className:"cursor-pointer text-blue-500",children:[t," "," "]}),C.jsx("button",{className:"text-green-500 hover:text-green-700 focus:outline-none",onClick:()=>xB(t),children:C.jsx(xR,{className:"inline-block h-10 w-10"})})," ",C.jsx("button",{className:"text-red-500 hover:text-red-700 focus:outline-none",onClick:()=>_B(t),children:C.jsx(ER,{className:"inline-block h-12 w-12"})})," ",C.jsx("button",{className:"text-blue-500 hover:text-blue-700 focus:outline-none",onClick:a,children:C.jsx(bR,{className:"inline-block h-10 w-10"})})]}),C.jsx("p",{className:"text-gray-600 mb-2",children:e}),C.jsx("h4",{className:"text-2xl font-bold mb-2 py-8",children:"Meanings"}),C.jsx("ul",{children:n.map((c,u)=>C.jsxs("li",{className:"text-gray-800 mt-2",children:[u>0&&C.jsxs("span",{children:[" ",u," ","."," "]}),c.split(" ").map((h,d)=>C.jsxs("span",{className:"cursor-pointer hover:underline hover:text-blue-500",onClick:()=>l(h),children:[h," "," "]},d))]},u))}),i.length>1&&C.jsx("h4",{className:"text-2xl font-bold mb-2 py-8",children:"Example Sentences"}),C.jsx("ul",{children:i.map((c,u)=>C.jsxs("li",{className:"text-gray-800 mt-2",children:[u>0&&C.jsxs("span",{children:[" ",u," ","."," "]}),c.split(" ").map((h,d)=>C.jsxs("span",{className:"cursor-pointer hover:underline hover:text-blue-500",onClick:()=>l(h),children:[h," "," "]},d))]},u))})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function _l(t){return t+.5|0}const mi=(t,e,n)=>Math.max(Math.min(t,n),e);function Oo(t){return mi(_l(t*2.55),0,255)}function Ri(t){return mi(_l(t*255),0,255)}function Rn(t){return mi(_l(t/2.55)/100,0,1)}function S0(t){return mi(_l(t*100),0,100)}const Mt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xp=[..."0123456789ABCDEF"],TB=t=>xp[t&15],kB=t=>xp[(t&240)>>4]+xp[t&15],$l=t=>(t&240)>>4===(t&15),PB=t=>$l(t.r)&&$l(t.g)&&$l(t.b)&&$l(t.a);function IB(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Mt[t[1]]*17,g:255&Mt[t[2]]*17,b:255&Mt[t[3]]*17,a:e===5?Mt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Mt[t[1]]<<4|Mt[t[2]],g:Mt[t[3]]<<4|Mt[t[4]],b:Mt[t[5]]<<4|Mt[t[6]],a:e===9?Mt[t[7]]<<4|Mt[t[8]]:255})),n}const AB=(t,e)=>t<255?e(t):"";function RB(t){var e=PB(t)?TB:kB;return t?"#"+e(t.r)+e(t.g)+e(t.b)+AB(t.a,e):void 0}const MB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gk(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function DB(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function OB(t,e,n){const i=gk(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function NB(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function $g(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=NB(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function Kg(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ri)}function Gg(t,e,n){return Kg(gk,t,e,n)}function LB(t,e,n){return Kg(OB,t,e,n)}function FB(t,e,n){return Kg(DB,t,e,n)}function yk(t){return(t%360+360)%360}function VB(t){const e=MB.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Oo(+e[5]):Ri(+e[5]));const s=yk(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=LB(s,r,o):e[1]==="hsv"?i=FB(s,r,o):i=Gg(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function jB(t,e){var n=$g(t);n[0]=yk(n[0]+e),n=Gg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function BB(t){if(!t)return;const e=$g(t),n=e[0],i=S0(e[1]),s=S0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${Rn(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const E0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},C0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function zB(){const t={},e=Object.keys(C0),n=Object.keys(E0);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,E0[r]);r=parseInt(C0[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let Kl;function UB(t){Kl||(Kl=zB(),Kl.transparent=[0,0,0,0]);const e=Kl[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const WB=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function HB(t){const e=WB.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Oo(o):mi(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Oo(i):mi(i,0,255)),s=255&(e[4]?Oo(s):mi(s,0,255)),r=255&(e[6]?Oo(r):mi(r,0,255)),{r:i,g:s,b:r,a:n}}}function $B(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Rn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Md=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,er=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function KB(t,e,n){const i=er(Rn(t.r)),s=er(Rn(t.g)),r=er(Rn(t.b));return{r:Ri(Md(i+n*(er(Rn(e.r))-i))),g:Ri(Md(s+n*(er(Rn(e.g))-s))),b:Ri(Md(r+n*(er(Rn(e.b))-r))),a:t.a+n*(e.a-t.a)}}function Gl(t,e,n){if(t){let i=$g(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Gg(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function _k(t,e){return t&&Object.assign(e||{},t)}function T0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ri(t[3]))):(e=_k(t,{r:0,g:0,b:0,a:1}),e.a=Ri(e.a)),e}function GB(t){return t.charAt(0)==="r"?HB(t):VB(t)}class Ba{constructor(e){if(e instanceof Ba)return e;const n=typeof e;let i;n==="object"?i=T0(e):n==="string"&&(i=IB(e)||UB(e)||GB(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=_k(this._rgb);return e&&(e.a=Rn(e.a)),e}set rgb(e){this._rgb=T0(e)}rgbString(){return this._valid?$B(this._rgb):void 0}hexString(){return this._valid?RB(this._rgb):void 0}hslString(){return this._valid?BB(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=KB(this._rgb,e._rgb,n)),this}clone(){return new Ba(this.rgb)}alpha(e){return this._rgb.a=Ri(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=_l(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Gl(this._rgb,2,e),this}darken(e){return Gl(this._rgb,2,-e),this}saturate(e){return Gl(this._rgb,1,e),this}desaturate(e){return Gl(this._rgb,1,-e),this}rotate(e){return jB(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Tn(){}const YB=(()=>{let t=0;return()=>t++})();function G(t){return t==null}function fe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Q(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Fe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function vt(t,e){return Fe(t)?t:e}function $(t,e){return typeof t>"u"?e:t}const qB=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ie(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function J(t,e,n,i){let s,r,o;if(fe(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(Q(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function Ou(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Nu(t){if(fe(t))return t.map(Nu);if(Q(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=Nu(t[n[s]]);return e}return t}function vk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function QB(t,e,n,i){if(!vk(t))return;const s=e[t],r=n[t];Q(s)&&Q(r)?za(s,r,i):e[t]=Nu(r)}function za(t,e,n){const i=fe(e)?e:[e],s=i.length;if(!Q(t))return t;n=n||{};const r=n.merger||QB;let o;for(let a=0;a<s;++a){if(o=i[a],!Q(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function ia(t,e){return za(t,e,{merger:XB})}function XB(t,e,n){if(!vk(t))return;const i=e[t],s=n[t];Q(i)&&Q(s)?ia(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Nu(s))}const k0={"":t=>t,x:t=>t.x,y:t=>t.y};function JB(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function ZB(t){const e=JB(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Hr(t,e){return(k0[e]||(k0[e]=ZB(e)))(t)}function Yg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ua=t=>typeof t<"u",Bi=t=>typeof t=="function",P0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function ez(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ke=Math.PI,Ut=2*ke,tz=Ut+ke,Lu=Number.POSITIVE_INFINITY,nz=ke/180,St=ke/2,Xi=ke/4,I0=ke*2/3,gi=Math.log10,wn=Math.sign;function sa(t,e,n){return Math.abs(t-e)<n}function A0(t){const e=Math.round(t);t=sa(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(gi(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function iz(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function sz(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Wa(t){return!sz(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function rz(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function wk(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function yi(t){return t*(ke/180)}function qg(t){return t*(180/ke)}function R0(t){if(!Fe(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function oz(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*ke&&(r+=Ut),{angle:r,distance:s}}function bp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function az(t,e){return(t-e+tz)%Ut-ke}function qt(t){return(t%Ut+Ut)%Ut}function xk(t,e,n,i){const s=qt(t),r=qt(e),o=qt(n),a=qt(r-s),l=qt(o-s),c=qt(s-r),u=qt(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Et(t,e,n){return Math.max(e,Math.min(n,t))}function lz(t){return Et(t,-32768,32767)}function ms(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Qg(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const gs=(t,e,n,i)=>Qg(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),cz=(t,e,n)=>Qg(t,n,i=>t[i][e]>=n);function uz(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const bk=["push","pop","shift","splice","unshift"];function hz(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),bk.forEach(n=>{const i="_onData"+Yg(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function M0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(bk.forEach(r=>{delete t[r]}),delete t._chartjs)}function Sk(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ek=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Ck(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,Ek.call(window,()=>{i=!1,t.apply(e,n)}))}}function dz(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Xg=t=>t==="start"?"left":t==="end"?"right":"center",Ge=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,fz=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function pz(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(s=Math.min(gs(l,u,h).lo,n?i:gs(e,u,o.getPixelForValue(h)).lo),c){const m=l.slice(0,s+1).reverse().findIndex(_=>!G(_[a.axis]));s-=Math.max(0,m)}s=Et(s,0,i-1)}if(p){let m=Math.max(gs(l,o.axis,d,!0).hi+1,n?0:gs(e,u,o.getPixelForValue(d),!0).hi+1);if(c){const _=l.slice(m-1).findIndex(g=>!G(g[a.axis]));m+=Math.max(0,_)}r=Et(m,s,i)-s}else r=i-s}return{start:s,count:r}}function mz(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const Yl=t=>t===0||t===1,D0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ut/n)),O0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ut/n)+1,ra={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*St)+1,easeOutSine:t=>Math.sin(t*St),easeInOutSine:t=>-.5*(Math.cos(ke*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Yl(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Yl(t)?t:D0(t,.075,.3),easeOutElastic:t=>Yl(t)?t:O0(t,.075,.3),easeInOutElastic(t){return Yl(t)?t:t<.5?.5*D0(t*2,.1125,.45):.5+.5*O0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ra.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ra.easeInBounce(t*2)*.5:ra.easeOutBounce(t*2-1)*.5+.5};function Jg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function N0(t){return Jg(t)?t:new Ba(t)}function Dd(t){return Jg(t)?t:new Ba(t).saturate(.5).darken(.1).hexString()}const gz=["x","y","borderWidth","radius","tension"],yz=["color","borderColor","backgroundColor"];function _z(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:yz},numbers:{type:"number",properties:gz}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function vz(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const L0=new Map;function wz(t,e){e=e||{};const n=t+JSON.stringify(e);let i=L0.get(n);return i||(i=new Intl.NumberFormat(t,e),L0.set(n,i)),i}function Zg(t,e,n){return wz(e,n).format(t)}const Tk={values(t){return fe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=xz(t,n)}const o=gi(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Zg(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(gi(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Tk.numeric.call(this,t,e,n):""}};function xz(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Rh={formatters:Tk};function bz(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Rh.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Bs=Object.create(null),Sp=Object.create(null);function oa(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function Od(t,e,n){return typeof e=="string"?za(oa(t,e),n):za(oa(t,""),e)}class Sz{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Dd(s.backgroundColor),this.hoverBorderColor=(i,s)=>Dd(s.borderColor),this.hoverColor=(i,s)=>Dd(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Od(this,e,n)}get(e){return oa(this,e)}describe(e,n){return Od(Sp,e,n)}override(e,n){return Od(Bs,e,n)}route(e,n,i,s){const r=oa(this,e),o=oa(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Q(l)?Object.assign({},c,l):$(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Se=new Sz({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_z,vz,bz]);function Ez(t){return!t||G(t.size)||G(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Fu(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Cz(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!fe(h))o=Fu(t,s,r,o,h);else if(fe(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!fe(d)&&(o=Fu(t,s,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function Ji(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function F0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ep(t,e,n,i){kk(t,e,n,i,null)}function kk(t,e,n,i,s){let r,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,m=e.radius;let _=(p||0)*nz;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(_),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,i,s/2,m,0,0,Ut):t.arc(n,i,m,0,Ut),t.closePath();break;case"triangle":u=s?s/2:m,t.moveTo(n+Math.sin(_)*u,i-Math.cos(_)*m),_+=I0,t.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*m),_+=I0,t.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(_+Xi)*l,h=Math.cos(_+Xi)*(s?s/2-c:l),a=Math.sin(_+Xi)*l,d=Math.sin(_+Xi)*(s?s/2-c:l),t.arc(n-h,i-a,c,_-ke,_-St),t.arc(n+d,i-o,c,_-St,_),t.arc(n+h,i+a,c,_,_+St),t.arc(n-d,i+o,c,_+St,_+ke),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=s?s/2:l,t.rect(n-u,i-l,2*u,2*l);break}_+=Xi;case"rectRot":h=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(s?s/2:m),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":_+=Xi;case"cross":h=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(s?s/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(s?s/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),_+=Xi,h=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(s?s/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(_)*m,a=Math.sin(_)*m,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(_)*(s?s/2:m),i+Math.sin(_)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Vn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ey(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ty(t){t.restore()}function Tz(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function kz(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Pz(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),G(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Iz(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Az(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function zs(t,e,n,i,s,r={}){const o=fe(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Pz(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Az(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),G(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),Iz(t,n,i,c,r),i+=Number(s.lineHeight);t.restore()}function Ha(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*ke,ke,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,ke,St,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,St,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-St,!0),t.lineTo(n+o.topLeft,i)}const Rz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Mz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Dz(t,e){const n=(""+t).match(Rz);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Oz=t=>+t||0;function Pk(t,e){const n={},i=Q(e),s=i?Object.keys(e):e,r=Q(t)?i?o=>$(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Oz(r(o));return n}function Ik(t){return Pk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ss(t){return Pk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ze(t){const e=Ik(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Me(t,e){t=t||{},e=e||Se.font;let n=$(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=$(t.style,e.style);i&&!(""+i).match(Mz)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:$(t.family,e.family),lineHeight:Dz($(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:$(t.weight,e.weight),string:""};return s.string=Ez(s),s}function ql(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&fe(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function Nz(t,e,n){const{min:i,max:s}=t,r=qB(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Yi(t,e){return Object.assign(Object.create(t),e)}function ny(t,e=[""],n,i,s=()=>t[0]){const r=n||t;typeof i>"u"&&(i=Dk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>ny([a,...t],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Rk(a,l,()=>Wz(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return j0(a).includes(l)},ownKeys(a){return j0(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function $r(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Ak(t,i),setContext:r=>$r(t,r,n,i),override:r=>$r(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return Rk(r,o,()=>Fz(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function Ak(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Bi(n)?n:()=>n,isIndexable:Bi(i)?i:()=>i}}const Lz=(t,e)=>t?t+Yg(e):e,iy=(t,e)=>Q(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Rk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Fz(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Bi(a)&&o.isScriptable(e)&&(a=Vz(e,a,t,n)),fe(a)&&a.length&&(a=jz(e,a,t,o.isIndexable)),iy(e,a)&&(a=$r(a,s,r&&r[e],o)),a}function Vz(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||i);return a.delete(t),iy(t,l)&&(l=sy(s._scopes,s,t,l)),l}function jz(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(Q(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=sy(c,s,t,u);e.push($r(h,r,o&&o[t],a))}}return e}function Mk(t,e,n){return Bi(t)?t(e,n):t}const Bz=(t,e)=>t===!0?e:typeof t=="string"?Hr(e,t):void 0;function zz(t,e,n,i,s){for(const r of e){const o=Bz(n,r);if(o){t.add(o);const a=Mk(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function sy(t,e,n,i){const s=e._rootScopes,r=Mk(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=V0(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=V0(a,o,r,l,i),l===null)?!1:ny(Array.from(a),[""],s,r,()=>Uz(e,n,i))}function V0(t,e,n,i,s){for(;n;)n=zz(t,e,n,i,s);return n}function Uz(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return fe(s)&&Q(n)?n:s||{}}function Wz(t,e,n,i){let s;for(const r of e)if(s=Dk(Lz(r,t),n),typeof s<"u")return iy(t,s)?sy(n,i,t,s):s}function Dk(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function j0(t){let e=t._keys;return e||(e=t._keys=Hz(t._scopes)),e}function Hz(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const $z=Number.EPSILON||1e-14,Kr=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ok=t=>t==="x"?"y":"x";function Kz(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=bp(r,s),l=bp(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function Gz(t,e,n){const i=t.length;let s,r,o,a,l,c=Kr(t,0);for(let u=0;u<i-1;++u)if(l=c,c=Kr(t,u+1),!(!l||!c)){if(sa(e[u],0,$z)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function Yz(t,e,n="x"){const i=Ok(n),s=t.length;let r,o,a,l=Kr(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Kr(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=h-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=h+r*e[c])}}function qz(t,e="x"){const n=Ok(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=Kr(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Kr(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?wn(s[o-1])!==wn(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Gz(t,s,r),Yz(t,r,e)}function Ql(t,e,n){return Math.max(Math.min(t,n),e)}function Qz(t,e){let n,i,s,r,o,a=Vn(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&Vn(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=Ql(s.cp1x,e.left,e.right),s.cp1y=Ql(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Ql(s.cp2x,e.left,e.right),s.cp2y=Ql(s.cp2y,e.top,e.bottom)))}function Xz(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")qz(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=Kz(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Qz(t,n)}function ry(){return typeof window<"u"&&typeof document<"u"}function oy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Vu(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Mh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Jz(t,e){return Mh(t).getPropertyValue(e)}const Zz=["top","right","bottom","left"];function Es(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=Zz[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const eU=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function tU(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(eU(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function as(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=Mh(n),r=s.boxSizing==="border-box",o=Es(s,"padding"),a=Es(s,"border","width"),{x:l,y:c,box:u}=tU(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}function nU(t,e,n){let i,s;if(e===void 0||n===void 0){const r=t&&oy(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=Mh(r),l=Es(a,"border","width"),c=Es(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Vu(a.maxWidth,r,"clientWidth"),s=Vu(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||Lu,maxHeight:s||Lu}}const Xl=t=>Math.round(t*10)/10;function iU(t,e,n,i){const s=Mh(t),r=Es(s,"margin"),o=Vu(s.maxWidth,t,"clientWidth")||Lu,a=Vu(s.maxHeight,t,"clientHeight")||Lu,l=nU(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=Es(s,"border","width"),f=Es(s,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=Xl(Math.min(c,o,l.maxWidth)),u=Xl(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Xl(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Xl(Math.floor(u*i))),{width:c,height:u}}function B0(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const sU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ry()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function z0(t,e){const n=Jz(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ls(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function rU(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function oU(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=ls(t,s,n),a=ls(s,r,n),l=ls(r,e,n),c=ls(o,a,n),u=ls(a,l,n);return ls(c,u,n)}const aU=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},lU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Dr(t,e,n){return t?aU(e,n):lU()}function Nk(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Lk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Fk(t){return t==="angle"?{between:xk,compare:az,normalize:qt}:{between:ms,compare:(e,n)=>e-n,normalize:e=>e}}function U0({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function cU(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=Fk(i),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),s,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function uU(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=Fk(i),{start:u,end:h,loop:d,style:f}=cU(t,e,n),p=[];let m=!1,_=null,g,y,v;const x=()=>l(s,v,g)&&a(s,v)!==0,w=()=>a(r,g)===0||l(r,v,g),S=()=>m||x(),E=()=>!m||w();for(let b=u,P=u;b<=h;++b)y=e[b%o],!y.skip&&(g=c(y[i]),g!==v&&(m=l(g,s,r),_===null&&S()&&(_=a(g,s)===0?b:P),_!==null&&E()&&(p.push(U0({start:_,end:b,loop:d,count:o,style:f})),_=null),P=b,v=g));return _!==null&&p.push(U0({start:_,end:h,loop:d,count:o,style:f})),p}function hU(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=uU(i[s],t.points,e);r.length&&n.push(...r)}return n}function dU(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function fU(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function pU(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=dU(n,s,r,i);if(i===!0)return W0(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return W0(t,fU(n,o,l,c),n,e)}function W0(t,e,n,i){return!i||!i.setContext||!n?e:mU(t,e,n,i)}function mU(t,e,n,i){const s=t._chart.getContext(),r=H0(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,h=e[0].start,d=h;function f(p,m,_,g){const y=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=y;for(;n[m%l].skip;)m+=y;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:_,style:g}),u=g,h=m%l)}}for(const p of e){h=a?h:p.start;let m=n[h%l],_;for(d=h+1;d<=p.end;d++){const g=n[d%l];_=H0(i.setContext(Yi(s,{type:"segment",p0:m,p1:g,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),gU(_,u)&&f(h,d-1,p.loop,u),m=g,u=_}h<d-1&&f(h,d-1,p.loop,u)}return c}function H0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function gU(t,e){if(!e)return!1;const n=[],i=function(s,r){return Jg(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class yU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ek.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var kn=new yU;const $0="transparent",_U={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=N0(t||$0),s=i.valid&&N0(e||$0);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class vU{constructor(e,n,i,s){const r=n[i];s=ql([e.to,s,r,e.from]);const o=ql([e.from,r,s]);this._active=!0,this._fn=e.fn||_U[e.type||typeof o],this._easing=ra[e.easing]||ra.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=ql([e.to,n,s,e.from]),this._from=ql([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class Vk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Q(e))return;const n=Object.keys(Se.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!Q(r))return;const o={};for(const a of n)o[a]=r[a];(fe(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=xU(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&wU(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=r[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}r[c]=h=new vU(d,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return kn.add(this._chart,i),!0}}function wU(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function xU(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function K0(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function bU(t,e,n){if(n===!1)return!1;const i=K0(t,n),s=K0(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function SU(t){let e,n,i,s;return Q(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function jk(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function G0(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],Fe(c)&&(r||e===0||wn(e)===wn(c))&&(e+=c)}return!u&&!i.all?0:e}function EU(t,e){const{iScale:n,vScale:i}=e,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:t[u]};return a}function Nd(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function CU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function TU(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function kU(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Y0(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function q0(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=CU(r,o,i),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:m,[c]:_}=p,g=p._stacks||(p._stacks={});d=g[c]=kU(s,u,m),d[a]=_,d._top=Y0(d,o,!0,i.type),d._bottom=Y0(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=_}}function Ld(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function PU(t,e){return Yi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function IU(t,e,n){return Yi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function bo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const Fd=t=>t==="reset"||t==="none",Q0=(t,e)=>e?t:Object.assign({},t),AU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:jk(n,!0),values:null};class Or{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Nd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&bo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,r=n.xAxisID=$(i.xAxisID,Ld(e,"x")),o=n.yAxisID=$(i.yAxisID,Ld(e,"y")),a=n.rAxisID=$(i.rAxisID,Ld(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&M0(this._data,this),e._stacked&&bo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Q(n)){const s=this._cachedMeta;this._data=EU(n,s)}else if(i!==n){if(i){M0(i,this);const s=this._cachedMeta;bo(s),s._parsed=[]}n&&Object.isExtensible(n)&&hz(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=Nd(n.vScale,n),n.stack!==i.stack&&(s=!0,bo(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&(q0(this,n._parsed),n._stacked=Nd(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{fe(s[e])?d=this.parseArrayData(i,s,e,n):Q(s[e])?d=this.parseObjectData(i,s,e,n):d=this.parsePrimitiveData(i,s,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&q0(this,d)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(s);let d,f,p;for(d=0,f=s;d<f;++d)p=d+i,h[d]={[a]:u||r.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,d,f;for(u=0,h=s;u<h;++u)d=u+i,f=n[d],c[u]={x:r.parse(Hr(f,a),d),y:o.parse(Hr(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:jk(s,!0),values:n._stacks[e.axis]._visualValues};return G0(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=G0(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=AU(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=TU(a);let d,f;function p(){f=s[d];const m=f[a.axis];return!Fe(f[e.axis])||u>m||h<m}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],Fe(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=SU($(this.options.clip,bU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=IU(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=PU(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&Ua(i);if(a)return Q0(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Se.elements[e]),p=()=>this.getContext(i,s,n),m=c.resolveNamedOptions(d,f,p,h);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(Q0(m,l))),m}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new Vk(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Fd(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){Fd(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!Fd(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&bo(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}O(Or,"defaults",{}),O(Or,"datasetElementType",null),O(Or,"dataElementType",null);function RU(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=Sk(i.sort((s,r)=>s-r))}return t._cache.$bar}function MU(t){const e=t.iScale,n=RU(e,t.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Ua(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function DU(t,e,n,i){const s=n.barThickness;let r,o;return G(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}function OU(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function NU(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function Bk(t,e,n,i){return fe(t)?NU(t,e,n,i):e[n.axis]=n.parse(t,i),e}function X0(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(Bk(d,h,r,c));return l}function Vd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function LU(t,e,n){return t!==0?wn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function FU(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}function VU(t,e,n,i){let s=e.borderSkipped;const r={};if(!s){t.borderSkipped=r;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=FU(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(r[J0(u,o,a,l)]=!0,s=c)),r[J0(s,o,a,l)]=!0,t.borderSkipped=r}function J0(t,e,n,i){return i?(t=jU(t,e,n),t=Z0(t,n,e)):t=Z0(t,e,n),t}function jU(t,e,n){return t===e?n:t===n?e:t}function Z0(t,e,n){return t==="start"?e:t==="end"?n:t}function BU(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class kc extends Or{parsePrimitiveData(e,n,i,s){return X0(e,n,i,s)}parseArrayData(e,n,i,s){return X0(e,n,i,s)}parseObjectData(e,n,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,p,m;for(d=i,f=i+s;d<f;++d)m=n[d],p={},p[r.axis]=r.parse(Hr(m,c),d),h.push(Bk(Hr(m,u),p,o,d));return h}updateRangeFromParsed(e,n,i,s){super.updateRangeFromParsed(e,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(e),o=r._custom,a=Vd(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,s);for(let f=n;f<n+i;f++){const p=this.getParsed(f),m=r||G(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),_=this._calculateBarIndexPixels(f,u),g=(p._stacks||{})[a.axis],y={horizontal:c,base:m.base,enableBorderRadius:!g||Vd(p._custom)||o===g._top||o===g._bottom,x:c?m.head:_.center,y:c?_.center:m.head,height:c?_.size:Math.abs(m.size),width:c?Math.abs(m.size):_.size};d&&(y.options=h||this.resolveDataElementOptions(f,e[f].active?"active":s));const v=y.options||e[f].options;VU(y,v,g,o),BU(y,v,u.ratio),this.updateElement(e[f],f,y,s)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(f=>f[i.axis]===l),d=h&&h[u.vScale.axis];if(G(d)||isNaN(d))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const s=this._getStacks(e,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||MU(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=Vd(c);let h=l[n.axis],d=0,f=i?this.applyStack(n,l,i):h,p,m;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&wn(h)!==wn(c.barEnd)&&(d=0),d+=h);const _=!G(r)&&!u?r:d;let g=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(d+f):p=g,m=p-g,Math.abs(m)<o){m=LU(m,n,a)*o,h===a&&(g-=m/2);const y=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),x=Math.min(y,v),w=Math.max(y,v);g=Math.max(Math.min(g,w),x),p=g+m,i&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(p)-n.getValueForPixel(g))}if(g===n.getPixelForValue(a)){const y=wn(m)*n.getLineWidthForValue(a)/2;g+=y,m-=y}return{size:m,base:g,head:p,center:p+m/2}}_calculateBarIndexPixels(e,n){const i=n.scale,s=this.options,r=s.skipNull,o=$(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?OU(e,n,s,c):DU(e,n,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}O(kc,"id","bar"),O(kc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),O(kc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Pc extends Or{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=pz(n,s,o);this._drawStart=a,this._drawCount=l,mz(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,_=Wa(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||s==="none",y=n+i,v=e.length;let x=n>0&&this.getParsed(n-1);for(let w=0;w<v;++w){const S=e[w],E=g?S:{};if(w<n||w>=y){E.skip=!0;continue}const b=this.getParsed(w),P=G(b[f]),T=E[d]=o.getPixelForValue(b[d],w),M=E[f]=r||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[f],w);E.skip=isNaN(T)||isNaN(M)||P,E.stop=w>0&&Math.abs(b[d]-x[d])>_,m&&(E.parsed=b,E.raw=c.data[w]),h&&(E.options=u||this.resolveDataElementOptions(w,S.active?"active":s)),g||this.updateElement(S,w,E,s),x=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}O(Pc,"id","line"),O(Pc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),O(Pc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Zi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ay{constructor(e){O(this,"options");this.options=e||{}}static override(e){Object.assign(ay.prototype,e)}init(){}formats(){return Zi()}parse(){return Zi()}format(){return Zi()}add(){return Zi()}diff(){return Zi()}startOf(){return Zi()}endOf(){return Zi()}}var zU={_date:ay};function UU(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?cz:gs;if(i){if(s._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const d=c(r,e,n-h),f=c(r,e,n+h);return{lo:d.lo,hi:f.hi}}}}else{const u=c(r,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:d}=t,f=d.slice(0,u.lo+1).reverse().findIndex(m=>!G(m[h.axis]));u.lo-=Math.max(0,f);const p=d.slice(u.hi).findIndex(m=>!G(m[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:r.length-1}}function vl(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=UU(r[a],e,o,s);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function WU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function jd(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||vl(t,n,e,function(a,l,c){!s&&!Vn(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function HU(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=oz(o,{x:e.x,y:e.y});xk(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return vl(t,n,e,r),s}function $U(t,e,n,i,s,r){let o=[];const a=WU(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,s);if(i&&!f)return;const p=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(p))&&!f)return;const _=a(e,p);_<l?(o=[{element:u,datasetIndex:h,index:d}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:d})}return vl(t,n,e,c),o}function Bd(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?HU(t,e,n,s):$U(t,e,n,i,s,r)}function ew(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return vl(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var KU={evaluateInteractionItems:vl,modes:{index(t,e,n,i){const s=as(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?jd(t,s,r,i,o):Bd(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=as(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?jd(t,s,r,i,o):Bd(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=as(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return jd(t,s,r,i,o)},nearest(t,e,n,i){const s=as(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Bd(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=as(e,t);return ew(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=as(e,t);return ew(t,s,"y",n.intersect,i)}}};const zk=["left","top","right","bottom"];function So(t,e){return t.filter(n=>n.pos===e)}function tw(t,e){return t.filter(n=>zk.indexOf(n.pos)===-1&&n.box.axis===e)}function Eo(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function GU(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function YU(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!zk.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function qU(t,e){const n=YU(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function QU(t){const e=GU(t),n=Eo(e.filter(c=>c.box.fullSize),!0),i=Eo(So(e,"left"),!0),s=Eo(So(e,"right")),r=Eo(So(e,"top"),!0),o=Eo(So(e,"bottom")),a=tw(e,"x"),l=tw(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:So(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function nw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Uk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function XU(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!Q(s)){n.size&&(t[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[s]+=n.size}r.getPadding&&Uk(o,r.getPadding());const a=Math.max(0,e.outerWidth-nw(o,t,"left","right")),l=Math.max(0,e.outerHeight-nw(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function JU(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function ZU(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function No(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,ZU(a.horizontal,e));const{same:h,other:d}=XU(e,n,a,i);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&No(s,e,n,i)||u}function Jl(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function iw(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Ua(c.start)&&(o=c.start),l.fullSize?Jl(l,s.left,o,n.outerWidth-s.right-s.left,d):Jl(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Ua(c.start)&&(r=c.start),l.fullSize?Jl(l,r,s.top,d,n.outerHeight-s.bottom-s.top):Jl(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var jt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=Ze(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=QU(t.boxes),l=a.vertical,c=a.horizontal;J(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,_)=>_.box.options&&_.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);Uk(d,Ze(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=qU(l.concat(c),h);No(a.fullSize,f,h,p),No(l,f,h,p),No(c,f,h,p)&&No(l,f,h,p),JU(f),iw(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,iw(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},J(a.chartArea,m=>{const _=m.box;Object.assign(_,t.chartArea),_.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Wk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class eW extends Wk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ic="$chartjs",tW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sw=t=>t===null||t==="";function nW(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[Ic]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",sw(s)){const r=z0(t,"width");r!==void 0&&(t.width=r)}if(sw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=z0(t,"height");r!==void 0&&(t.height=r)}return t}const Hk=sU?{passive:!0}:!1;function iW(t,e,n){t&&t.addEventListener(e,n,Hk)}function sW(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Hk)}function rW(t,e){const n=tW[t.type]||t.type,{x:i,y:s}=as(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function ju(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function oW(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ju(a.addedNodes,i),o=o&&!ju(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function aW(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ju(a.removedNodes,i),o=o&&!ju(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const $a=new Map;let rw=0;function $k(){const t=window.devicePixelRatio;t!==rw&&(rw=t,$a.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function lW(t,e){$a.size||window.addEventListener("resize",$k),$a.set(t,e)}function cW(t){$a.delete(t),$a.size||window.removeEventListener("resize",$k)}function uW(t,e,n){const i=t.canvas,s=i&&oy(i);if(!s)return;const r=Ck((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),lW(t,r),o}function zd(t,e,n){n&&n.disconnect(),e==="resize"&&cW(t)}function hW(t,e,n){const i=t.canvas,s=Ck(r=>{t.ctx!==null&&n(rW(r,t))},t);return iW(i,e,s),s}class dW extends Wk{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(nW(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Ic])return!1;const i=n[Ic].initial;["height","width"].forEach(r=>{const o=i[r];G(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Ic],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:oW,detach:aW,resize:uW}[n]||hW;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:zd,detach:zd,resize:zd}[n]||sW)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return iU(e,n,i,s)}isAttached(e){const n=e&&oy(e);return!!(n&&n.isConnected)}}function fW(t){return!ry()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?eW:dW}var uc;let qi=(uc=class{constructor(){O(this,"x");O(this,"y");O(this,"active",!1);O(this,"options");O(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Wa(this.x)&&Wa(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},O(uc,"defaults",{}),O(uc,"defaultRoutes"),uc);function pW(t,e){const n=t.options.ticks,i=mW(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?yW(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return _W(e,c,r,o/s),c;const u=gW(r,e,s);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Zl(e,c,u,G(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Zl(e,c,u,r[h],r[h+1]);return Zl(e,c,u,l,G(f)?e.length:l+f),c}return Zl(e,c,u),c}function mW(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function gW(t,e,n){const i=vW(t),s=e.length/n;if(!i)return Math.max(s,1);const r=iz(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function yW(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function _W(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function Zl(t,e,n,i,s){const r=$(i,0),o=Math.min($(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function vW(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const wW=t=>t==="left"?"right":t==="right"?"left":t,ow=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,aw=(t,e)=>Math.min(e||t,t);function lw(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function xW(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function bW(t,e){J(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Co(t){return t.drawTicks?t.tickLength:0}function cw(t,e){if(!t.display)return 0;const n=Me(t.font,e),i=Ze(t.padding);return(fe(t.text)?t.text.length:1)*n.lineHeight+i.height}function SW(t,e){return Yi(t,{scale:e,type:"scale"})}function EW(t,e,n){return Yi(t,{tick:n,index:e,type:"tick"})}function CW(t,e,n){let i=Xg(t);return(n&&e!=="right"||!n&&e==="right")&&(i=wW(i)),i}function TW(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,p;const m=o-s,_=a-r;if(t.isHorizontal()){if(f=Ge(i,r,a),Q(n)){const g=Object.keys(n)[0],y=n[g];p=u[g].getPixelForValue(y)+m-e}else n==="center"?p=(c.bottom+c.top)/2+m-e:p=ow(t,n,e);d=a-r}else{if(Q(n)){const g=Object.keys(n)[0],y=n[g];f=u[g].getPixelForValue(y)-_+e}else n==="center"?f=(c.left+c.right)/2-_+e:f=ow(t,n,e);p=Ge(i,o,s),h=n==="left"?-St:St}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class qs extends qi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=vt(e,Number.POSITIVE_INFINITY),n=vt(n,Number.NEGATIVE_INFINITY),i=vt(i,Number.POSITIVE_INFINITY),s=vt(s,Number.NEGATIVE_INFINITY),{min:vt(e,i),max:vt(n,s),minDefined:Fe(e),maxDefined:Fe(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:vt(n,vt(i,n)),max:vt(i,vt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ie(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Nz(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?lw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=pW(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ie(this.options.afterUpdate,[this])}beforeSetDimensions(){ie(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ie(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ie(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ie(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=ie(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){ie(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ie(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=aw(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Et(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Co(e.grid)-n.padding-cw(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=qg(Math.min(Math.asin(Et((u.highest.height+6)/a,-1,1)),Math.asin(Et(l/c,-1,1))-Math.asin(Et(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ie(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ie(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=cw(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Co(r)+l):(e.height=this.maxHeight,e.width=Co(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=yi(this.labelRotation),m=Math.cos(p),_=Math.sin(p);if(a){const g=i.mirror?0:_*h.width+m*d.height;e.height=Math.min(this.maxHeight,e.height+g+f)}else{const g=i.mirror?0:m*h.width+_*d.height;e.width=Math.min(this.maxWidth,e.width+g+f)}this._calculatePadding(c,u,_,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=i*n.height):(d=i*e.height,f=s*n.width):r==="start"?f=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ie(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)G(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=lw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/aw(n,i));let c=0,u=0,h,d,f,p,m,_,g,y,v,x,w;for(h=0;h<n;h+=l){if(p=e[h].label,m=this._resolveTickFontOptions(h),s.font=_=m.string,g=r[_]=r[_]||{data:{},gc:[]},y=m.lineHeight,v=x=0,!G(p)&&!fe(p))v=Fu(s,g.data,g.gc,v,p),x=y;else if(fe(p))for(d=0,f=p.length;d<f;++d)w=p[d],!G(w)&&!fe(w)&&(v=Fu(s,g.data,g.gc,v,w),x+=y);o.push(v),a.push(x),c=Math.max(v,c),u=Math.max(x,u)}bW(r,n);const S=o.indexOf(c),E=a.indexOf(u),b=P=>({width:o[P]||0,height:a[P]||0});return{first:b(0),last:b(n-1),widest:b(S),highest:b(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return lz(this._alignToPixels?Ji(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=EW(this.getContext(),e,i))}return this.$context||(this.$context=SW(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=yi(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Co(r),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,_=m/2,g=function(we){return Ji(i,we,m)};let y,v,x,w,S,E,b,P,T,M,B,ve;if(o==="top")y=g(this.bottom),E=this.bottom-d,P=y-_,M=g(e.top)+_,ve=e.bottom;else if(o==="bottom")y=g(this.top),M=e.top,ve=g(e.bottom)-_,E=y+_,P=this.top+d;else if(o==="left")y=g(this.right),S=this.right-d,b=y-_,T=g(e.left)+_,B=e.right;else if(o==="right")y=g(this.left),T=e.left,B=g(e.right)-_,S=y+_,b=this.left+d;else if(n==="x"){if(o==="center")y=g((e.top+e.bottom)/2+.5);else if(Q(o)){const we=Object.keys(o)[0],Y=o[we];y=g(this.chart.scales[we].getPixelForValue(Y))}M=e.top,ve=e.bottom,E=y+_,P=E+d}else if(n==="y"){if(o==="center")y=g((e.left+e.right)/2);else if(Q(o)){const we=Object.keys(o)[0],Y=o[we];y=g(this.chart.scales[we].getPixelForValue(Y))}S=y-_,b=S-d,T=e.left,B=e.right}const He=$(s.ticks.maxTicksLimit,h),he=Math.max(1,Math.ceil(h/He));for(v=0;v<h;v+=he){const we=this.getContext(v),Y=r.setContext(we),R=a.setContext(we),N=Y.lineWidth,V=Y.color,ne=R.dash||[],ae=R.dashOffset,un=Y.tickWidth,et=Y.tickColor,Cn=Y.tickBorderDash||[],tt=Y.tickBorderDashOffset;x=xW(this,v,l),x!==void 0&&(w=Ji(i,x,N),c?S=b=T=B=w:E=P=M=ve=w,f.push({tx1:S,ty1:E,tx2:b,ty2:P,x1:T,y1:M,x2:B,y2:ve,width:N,color:V,borderDash:ne,borderDashOffset:ae,tickWidth:un,tickColor:et,tickBorderDash:Cn,tickBorderDashOffset:tt}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=Co(i.grid),f=d+u,p=h?-u:f,m=-yi(this.labelRotation),_=[];let g,y,v,x,w,S,E,b,P,T,M,B,ve="middle";if(s==="top")S=this.bottom-p,E=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+p,E=this._getXAxisLabelAlignment();else if(s==="left"){const he=this._getYAxisLabelAlignment(d);E=he.textAlign,w=he.x}else if(s==="right"){const he=this._getYAxisLabelAlignment(d);E=he.textAlign,w=he.x}else if(n==="x"){if(s==="center")S=(e.top+e.bottom)/2+f;else if(Q(s)){const he=Object.keys(s)[0],we=s[he];S=this.chart.scales[he].getPixelForValue(we)+f}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")w=(e.left+e.right)/2-f;else if(Q(s)){const he=Object.keys(s)[0],we=s[he];w=this.chart.scales[he].getPixelForValue(we)}E=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?ve="top":l==="end"&&(ve="bottom"));const He=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){v=a[g],x=v.label;const he=r.setContext(this.getContext(g));b=this.getPixelForTick(g)+r.labelOffset,P=this._resolveTickFontOptions(g),T=P.lineHeight,M=fe(x)?x.length:1;const we=M/2,Y=he.color,R=he.textStrokeColor,N=he.textStrokeWidth;let V=E;o?(w=b,E==="inner"&&(g===y-1?V=this.options.reverse?"left":"right":g===0?V=this.options.reverse?"right":"left":V="center"),s==="top"?c==="near"||m!==0?B=-M*T+T/2:c==="center"?B=-He.highest.height/2-we*T+T:B=-He.highest.height+T/2:c==="near"||m!==0?B=T/2:c==="center"?B=He.highest.height/2-we*T:B=He.highest.height-M*T,h&&(B*=-1),m!==0&&!he.showLabelBackdrop&&(w+=T/2*Math.sin(m))):(S=b,B=(1-M)*T/2);let ne;if(he.showLabelBackdrop){const ae=Ze(he.backdropPadding),un=He.heights[g],et=He.widths[g];let Cn=B-ae.top,tt=0-ae.left;switch(ve){case"middle":Cn-=un/2;break;case"bottom":Cn-=un;break}switch(E){case"center":tt-=et/2;break;case"right":tt-=et;break;case"inner":g===y-1?tt-=et:g>0&&(tt-=et/2);break}ne={left:tt,top:Cn,width:et+ae.width,height:un+ae.height,color:he.backdropColor}}_.push({label:x,font:P,textOffset:B,options:{rotation:m,color:Y,strokeColor:R,strokeWidth:N,textAlign:V,textBaseline:ve,translation:[w,S],backdrop:ne}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-yi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Ji(e,this.left,o)-o/2,u=Ji(e,this.right,a)+a/2,h=d=l):(h=Ji(e,this.top,o)-o/2,d=Ji(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&ey(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;zs(i,c,0,u,l,a)}s&&ty(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=Me(i.font),o=Ze(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Q(n)?(l+=o.bottom,fe(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=TW(this,l,n,a);zs(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:CW(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=$(e.grid&&e.grid.z,-1),s=$(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==qs.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Me(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ec{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;IW(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,kW(e,o,i),this.override&&Se.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in Se[s]&&(delete Se[s][i],this.override&&delete Bs[i])}}function kW(t,e,n){const i=za(Object.create(null),[n?Se.get(n):{},Se.get(e),t.defaults]);Se.set(e,i),t.defaultRoutes&&PW(e,t.defaultRoutes),t.descriptors&&Se.describe(e,t.descriptors)}function PW(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Se.route(r,s,l,a)})}function IW(t){return"id"in t&&"defaults"in t}class AW{constructor(){this.controllers=new ec(Or,"datasets",!0),this.elements=new ec(qi,"elements"),this.plugins=new ec(Object,"plugins"),this.scales=new ec(qs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):J(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=Yg(e);ie(i["before"+s],[],i),n[e](i),ie(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var pn=new AW;class RW{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(ie(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){G(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=$(i.options&&i.options.plugins,{}),r=MW(i);return s===!1&&!n?[]:OW(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function MW(t){const e={},n=[],i=Object.keys(pn.plugins.items);for(let r=0;r<i.length;r++)n.push(pn.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function DW(t,e){return!e&&t===!1?null:t===!0?{}:t}function OW(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=DW(i[l],s);c!==null&&r.push({plugin:a,options:NW(t.config,{plugin:a,local:n[l]},c,o)})}return r}function NW(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cp(t,e){const n=Se.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function LW(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function FW(t,e){return t===e?"_index_":"_value_"}function uw(t){if(t==="x"||t==="y"||t==="r")return t}function VW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Tp(t,...e){if(uw(t))return t;for(const n of e){const i=n.axis||VW(n.position)||t.length>1&&uw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function hw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function jW(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return hw(t,"x",n[0])||hw(t,"y",n[0])}return{}}function BW(t,e){const n=Bs[t.type]||{scales:{}},i=e.scales||{},s=Cp(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Q(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Tp(o,a,jW(o,t),Se.scales[a.type]),c=FW(l,s),u=n.scales||{};r[o]=ia(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Cp(a,e),u=(Bs[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=LW(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),ia(r[f],[{axis:d},i[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];ia(a,[Se.scales[a.type],Se.scale])}),r}function Kk(t){const e=t.options||(t.options={});e.plugins=$(e.plugins,{}),e.scales=BW(t,e)}function Gk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function zW(t){return t=t||{},t.data=Gk(t.data),Kk(t),t}const dw=new Map,Yk=new Set;function tc(t,e){let n=dw.get(t);return n||(n=e(),dw.set(t,n),Yk.add(n)),n}const To=(t,e,n)=>{const i=Hr(e,n);i!==void 0&&t.add(i)};class UW{constructor(e){this._config=zW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Gk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Kk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return tc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return tc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return tc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return tc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>To(l,e,h))),u.forEach(h=>To(l,s,h)),u.forEach(h=>To(l,Bs[r]||{},h)),u.forEach(h=>To(l,Se,h)),u.forEach(h=>To(l,Sp,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Yk.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Bs[n]||{},Se.datasets[n]||{},{type:n},Se,Sp]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=fw(this._resolverCache,e,s);let l=o;if(HW(o,n)){r.$shared=!1,i=Bi(i)?i():i;const c=this.createResolver(e,i,a);l=$r(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=fw(this._resolverCache,e,i);return Q(n)?$r(r,n,void 0,s):r}}function fw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:ny(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const WW=t=>Q(t)&&Object.getOwnPropertyNames(t).some(e=>Bi(t[e]));function HW(t,e){const{isScriptable:n,isIndexable:i}=Ak(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Bi(a)||WW(a))||o&&fe(a))return!0}return!1}var $W="4.4.8";const KW=["top","bottom","left","right","chartArea"];function pw(t,e){return t==="top"||t==="bottom"||KW.indexOf(t)===-1&&e==="x"}function mw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function gw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ie(n&&n.onComplete,[t],e)}function GW(t){const e=t.chart,n=e.options.animation;ie(n&&n.onProgress,[t],e)}function qk(t){return ry()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ac={},yw=t=>{const e=qk(t);return Object.values(Ac).filter(n=>n.canvas===e).pop()};function YW(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function qW(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function nc(t,e,n){return t.options.clip?t[n]:e[n]}function QW(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:nc(n,e,"left"),right:nc(n,e,"right"),top:nc(i,e,"top"),bottom:nc(i,e,"bottom")}:e}var ii;let Dh=(ii=class{static register(...e){pn.add(...e),_w()}static unregister(...e){pn.remove(...e),_w()}constructor(e,n){const i=this.config=new UW(n),s=qk(e),r=yw(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||fW(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=YB(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RW,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dz(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Ac[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}kn.listen(this,"complete",gw),kn.listen(this,"progress",GW),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return G(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return pn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():B0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return F0(this.canvas,this.ctx),this}stop(){return kn.stop(this),this}resize(e,n){kn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,B0(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ie(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};J(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Tp(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),J(r,o=>{const a=o.options,l=a.id,c=Tp(l,a),u=$(a.type,o.dtype);(a.position===void 0||pw(a.position,c)!==pw(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=pn.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),J(s,(o,a)=>{o||delete i[a]}),J(i,o=>{jt.configure(this,o,o.options),jt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(mw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Cp(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=pn.getController(a),{datasetElementType:c,dataElementType:u}=Se.datasets[a];Object.assign(l,{dataElementType:pn.getElement(u),datasetElementType:c&&pn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){J(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||J(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(mw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){J(this.scales,e=>{jt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!P0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;YW(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!P0(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;jt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],J(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Bi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(kn.has(this)?this.attached&&!kn.running(this)&&kn.start(this):(this.draw(),gw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=QW(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&ey(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&ty(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Vn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=KU.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Yi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Ua(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),kn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),F0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ac[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};J(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){J(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},J(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ou(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=ez(e),c=qW(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ie(r.onHover,[e,a,this],this),l&&ie(r.onClick,[e,a,this],this));const u=!Ou(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}},O(ii,"defaults",Se),O(ii,"instances",Ac),O(ii,"overrides",Bs),O(ii,"registry",pn),O(ii,"version",$W),O(ii,"getChart",yw),ii);function _w(){return J(Dh.instances,t=>t._plugins.invalidate())}function Qk(t,e,n=e){t.lineCap=$(n.borderCapStyle,e.borderCapStyle),t.setLineDash($(n.borderDash,e.borderDash)),t.lineDashOffset=$(n.borderDashOffset,e.borderDashOffset),t.lineJoin=$(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=$(n.borderWidth,e.borderWidth),t.strokeStyle=$(n.borderColor,e.borderColor)}function XW(t,e,n){t.lineTo(n.x,n.y)}function JW(t){return t.stepped?Tz:t.tension||t.cubicInterpolationMode==="monotone"?kz:XW}function Xk(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function ZW(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=Xk(s,n,i),u=JW(r);let{move:h=!0,reverse:d}=i||{},f,p,m;for(f=0;f<=c;++f)p=s[(a+(d?c-f:f))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,m,p,d,r.stepped),m=p);return l&&(p=s[(a+(d?c:0))%o],u(t,m,p,d,r.stepped)),!!l}function eH(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=Xk(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,p,m,_,g;const y=x=>(o+(c?a-x:x))%r,v=()=>{m!==_&&(t.lineTo(u,_),t.lineTo(u,m),t.lineTo(u,g))};for(l&&(f=s[y(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[y(d)],f.skip)continue;const x=f.x,w=f.y,S=x|0;S===p?(w<m?m=w:w>_&&(_=w),u=(h*u+x)/++h):(v(),t.lineTo(x,w),p=S,h=0,m=_=w),g=w}v()}function kp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?eH:ZW}function tH(t){return t.stepped?rU:t.tension||t.cubicInterpolationMode==="monotone"?oU:ls}function nH(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),Qk(t,e.options),t.stroke(s)}function iH(t,e,n,i){const{segments:s,options:r}=e,o=kp(e);for(const a of s)Qk(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const sH=typeof Path2D=="function";function rH(t,e,n,i){sH&&!e.options.segment?nH(t,e,n,i):iH(t,e,n,i)}class Lo extends qi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;Xz(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=pU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=hU(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=tH(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=r[h],p=r[d];if(f===p){a.push(f);continue}const m=Math.abs((s-f[n])/(p[n]-f[n])),_=l(f,p,m,i.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,i){return kp(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=kp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),rH(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}O(Lo,"id","line"),O(Lo,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),O(Lo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),O(Lo,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function vw(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class Rc extends qi{constructor(n){super();O(this,"parsed");O(this,"skip");O(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return vw(this,n,"x",i)}inYRange(n,i){return vw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!Vn(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Ep(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}O(Rc,"id","point"),O(Rc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),O(Rc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Jk(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-h,u=i+h):(h=r/2,a=n-h,l=n+h,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function _i(t,e,n,i){return t?0:Et(e,n,i)}function oH(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=Ik(i);return{t:_i(s.top,r.top,0,n),r:_i(s.right,r.right,0,e),b:_i(s.bottom,r.bottom,0,n),l:_i(s.left,r.left,0,e)}}function aH(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=Ss(s),o=Math.min(e,n),a=t.borderSkipped,l=i||Q(s);return{topLeft:_i(!l||a.top||a.left,r.topLeft,0,o),topRight:_i(!l||a.top||a.right,r.topRight,0,o),bottomLeft:_i(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:_i(!l||a.bottom||a.right,r.bottomRight,0,o)}}function lH(t){const e=Jk(t),n=e.right-e.left,i=e.bottom-e.top,s=oH(t,n/2,i/2),r=aH(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Ud(t,e,n,i){const s=e===null,r=n===null,a=t&&!(s&&r)&&Jk(t,i);return a&&(s||ms(e,a.left,a.right))&&(r||ms(n,a.top,a.bottom))}function cH(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function uH(t,e){t.rect(e.x,e.y,e.w,e.h)}function Wd(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}class Mc extends qi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=lH(this),a=cH(o.radius)?Ha:uH;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,Wd(o,n,r)),e.clip(),a(e,Wd(r,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Wd(r,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,i){return Ud(this,e,n,i)}inXRange(e,n){return Ud(this,e,null,n)}inYRange(e,n){return Ud(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}O(Mc,"id","bar"),O(Mc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),O(Mc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ww=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},hH=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class xw extends qi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ie(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=Me(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ww(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,m)=>{const _=i+n/2+r.measureText(p.text).width;(m===0||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(m>0?0:1)]=0,f+=u,d++),l[m]={left:0,top:f,row:d,width:_,height:s},c[c.length-1]+=_+a}),h}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,p=0,m=0;return this.legendItems.forEach((_,g)=>{const{itemWidth:y,itemHeight:v}=dH(i,n,r,_,s);g>0&&f+v+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,m++,d=f=0),l[g]={left:p,top:f,col:m,width:y,height:v},d=Math.max(d,y),f+=v+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Dr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ge(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ge(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Ge(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ge(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ey(e,this),this._draw(),ty(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=Se.color,l=Dr(e.rtl,this.left,this.width),c=Me(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:_}=ww(o,h),g=function(S,E,b){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;s.save();const P=$(b.lineWidth,1);if(s.fillStyle=$(b.fillStyle,a),s.lineCap=$(b.lineCap,"butt"),s.lineDashOffset=$(b.lineDashOffset,0),s.lineJoin=$(b.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=$(b.strokeStyle,a),s.setLineDash($(b.lineDash,[])),o.usePointStyle){const T={radius:m*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:P},M=l.xPlus(S,p/2),B=E+d;kk(s,T,M,B,o.pointStyleWidth&&p)}else{const T=E+Math.max((h-m)/2,0),M=l.leftForLtr(S,p),B=Ss(b.borderRadius);s.beginPath(),Object.values(B).some(ve=>ve!==0)?Ha(s,{x:M,y:T,w:p,h:m,radius:B}):s.rect(M,T,p,m),s.fill(),P!==0&&s.stroke()}s.restore()},y=function(S,E,b){zs(s,b.text,S,E+_/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?f={x:Ge(r,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:f={x:this.left+u,y:Ge(r,this.top+x+u,this.bottom-n[0].height),line:0},Nk(this.ctx,e.textDirection);const w=_+u;this.legendItems.forEach((S,E)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const b=s.measureText(S.text).width,P=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),T=p+d+b;let M=f.x,B=f.y;l.setWidth(this.width),v?E>0&&M+T+u>this.right&&(B=f.y+=w,f.line++,M=f.x=Ge(r,this.left+u,this.right-i[f.line])):E>0&&B+w>this.bottom&&(M=f.x=M+n[f.line].width+u,f.line++,B=f.y=Ge(r,this.top+x+u,this.bottom-n[f.line].height));const ve=l.x(M);if(g(ve,B,S),M=fz(P,M+p+d,v?M+T:this.right,e.rtl),y(l.x(M),B,S),v)f.x+=T+u;else if(typeof S.text!="string"){const He=c.lineHeight;f.y+=Zk(S,He)+u}else f.y+=w}),Lk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Me(n.font),s=Ze(n.padding);if(!n.display)return;const r=Dr(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Ge(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((m,_)=>Math.max(m,_.height),0);u=c+Ge(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=Ge(a,h,h+d);o.textAlign=r.textAlign(Xg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,zs(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=Me(e.font),i=Ze(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(ms(e,this.left,this.right)&&ms(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],ms(e,s.left,s.left+s.width)&&ms(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!mH(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=hH(s,i);s&&!r&&ie(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&ie(n.onHover,[e,i,this],this)}else i&&ie(n.onClick,[e,i,this],this)}}function dH(t,e,n,i,s){const r=fH(i,t,e,n),o=pH(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function fH(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function pH(t,e,n){let i=t;return typeof e.text!="string"&&(i=Zk(e,n)),i}function Zk(t,e){const n=t.text?t.text.length:0;return e*n}function mH(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var gH={id:"legend",_element:xw,start(t,e,n){const i=t.legend=new xw({ctx:t.ctx,options:n,chart:t});jt.configure(t,i,n),jt.addBox(t,i)},stop(t){jt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;jt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Ze(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class e1 extends qi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=fe(i.text)?i.text.length:1;this._padding=Ze(i.padding);const r=s*Me(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Ge(a,i,r),h=n+e,c=r-i):(o.position==="left"?(u=i+e,h=Ge(a,s,n),l=ke*-.5):(u=r-e,h=Ge(a,n,s),l=ke*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Me(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);zs(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Xg(n.align),textBaseline:"middle",translation:[o,a]})}}function yH(t,e){const n=new e1({ctx:t.ctx,options:e,chart:t});jt.configure(t,n,e),jt.addBox(t,n),t.titleBlock=n}var _H={id:"title",_element:e1,start(t,e,n){yH(t,n)},stop(t){const e=t.titleBlock;jt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;jt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fo={average(t){if(!t.length)return!1;let e,n,i=new Set,s=0,r=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=bp(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function dn(t,e){return e&&(fe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Pn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function vH(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function bw(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=Me(e.bodyFont),c=Me(e.titleFont),u=Me(e.footerFont),h=r.length,d=s.length,f=i.length,p=Ze(e.padding);let m=p.height,_=0,g=i.reduce((x,w)=>x+w.before.length+w.lines.length+w.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*x+(g-f)*l.lineHeight+(g-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const v=function(x){_=Math.max(_,n.measureText(x).width+y)};return n.save(),n.font=c.string,J(t.title,v),n.font=l.string,J(t.beforeBody.concat(t.afterBody),v),y=e.displayColors?o+2+e.boxPadding:0,J(i,x=>{J(x.before,v),J(x.lines,v),J(x.after,v)}),y=0,n.font=u.string,J(t.footer,v),n.restore(),_+=p.width,{width:_,height:m}}function wH(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function xH(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function bH(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),xH(c,t,e,n)&&(c="center"),c}function Sw(t,e,n){const i=n.yAlign||e.yAlign||wH(t,n);return{xAlign:n.xAlign||e.xAlign||bH(t,e,n,i),yAlign:i}}function SH(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function EH(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function Ew(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ss(o);let p=SH(e,a);const m=EH(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+s:a==="right"&&(p+=Math.max(h,f)+s),{x:Et(p,0,i.width-e.width),y:Et(m,0,i.height-e.height)}}function ic(t,e,n){const i=Ze(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Cw(t){return dn([],Pn(t))}function CH(t,e,n){return Yi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Tw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const t1={beforeTitle:Tn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Tn,beforeBody:Tn,beforeLabel:Tn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return G(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Tn,afterBody:Tn,beforeFooter:Tn,footer:Tn,afterFooter:Tn};function ct(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?t1[e].call(n,i):s}class Pp extends qi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new Vk(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=CH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=ct(i,"beforeTitle",this,e),r=ct(i,"title",this,e),o=ct(i,"afterTitle",this,e);let a=[];return a=dn(a,Pn(s)),a=dn(a,Pn(r)),a=dn(a,Pn(o)),a}getBeforeBody(e,n){return Cw(ct(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return J(e,r=>{const o={before:[],lines:[],after:[]},a=Tw(i,r);dn(o.before,Pn(ct(a,"beforeLabel",this,r))),dn(o.lines,ct(a,"label",this,r)),dn(o.after,Pn(ct(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return Cw(ct(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=ct(i,"beforeFooter",this,e),r=ct(i,"footer",this,e),o=ct(i,"afterFooter",this,e);let a=[];return a=dn(a,Pn(s)),a=dn(a,Pn(r)),a=dn(a,Pn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(vH(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),J(a,u=>{const h=Tw(e.callbacks,u);s.push(ct(h,"labelColor",this,u)),r.push(ct(h,"labelPointStyle",this,u)),o.push(ct(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Fo[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=bw(this,i),c=Object.assign({},a,l),u=Sw(this.chart,i,c),h=Ew(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Ss(a),{x:d,y:f}=e,{width:p,height:m}=n;let _,g,y,v,x,w;return r==="center"?(x=f+m/2,s==="left"?(_=d,g=_-o,v=x+o,w=x-o):(_=d+p,g=_+o,v=x-o,w=x+o),y=_):(s==="left"?g=d+Math.max(l,u)+o:s==="right"?g=d+p-Math.max(c,h)-o:g=this.caretX,r==="top"?(v=f,x=v-o,_=g-o,y=g+o):(v=f+m,x=v+o,_=g+o,y=g-o),w=v),{x1:_,x2:g,x3:y,y1:v,y2:x,y3:w}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Dr(i.rtl,this.x,this.width);for(e.x=ic(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Me(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=Me(r.bodyFont),h=ic(this,"left",r),d=s.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(d,c)+c/2,g=p+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Ep(e,m,_,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ep(e,m,_,g)}else{e.lineWidth=Q(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(d,c),_=s.leftForLtr(s.xPlus(d,1),c-2),g=Ss(o.borderRadius);Object.values(g).some(y=>y!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Ha(e,{x:m,y:p,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ha(e,{x:_,y:p+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(m,p,c,l),e.strokeRect(m,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(_,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Me(i.bodyFont);let d=h.lineHeight,f=0;const p=Dr(i.rtl,this.x,this.width),m=function(b){n.fillText(b,p.x(e.x+f),e.y+d/2),e.y+=d+r},_=p.textAlign(o);let g,y,v,x,w,S,E;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=ic(this,_,i),n.fillStyle=i.bodyColor,J(this.beforeBody,m),f=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,S=s.length;x<S;++x){for(g=s[x],y=this.labelTextColors[x],n.fillStyle=y,J(g.before,m),v=g.lines,a&&v.length&&(this._drawColorBox(n,e,x,p,i),d=Math.max(h.lineHeight,l)),w=0,E=v.length;w<E;++w)m(v[w]),d=h.lineHeight;J(g.after,m)}f=0,d=h.lineHeight,J(this.afterBody,m),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Dr(i.rtl,this.x,this.width);for(e.x=ic(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Me(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=Ss(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Fo[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=bw(this,e),l=Object.assign({},o,this._size),c=Sw(n,e,l),u=Ew(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ze(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),Nk(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),Lk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Ou(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!Ou(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=Fo[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}O(Pp,"positioners",Fo);var TH={id:"tooltip",_element:Pp,positioners:Fo,afterInit(t,e,n){n&&(t.tooltip=new Pp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:t1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const kH=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function PH(t,e,n,i){const s=t.indexOf(e);if(s===-1)return kH(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const IH=(t,e)=>t===null?null:Et(Math.round(t),0,e);function kw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Ip extends qs{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(G(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:PH(i,e,$(n,e),this._addedLabels),IH(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return kw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}O(Ip,"id","category"),O(Ip,"defaults",{ticks:{callback:kw}});function AH(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,p=u-1,{min:m,max:_}=e,g=!G(o),y=!G(a),v=!G(c),x=(_-m)/(h+1);let w=A0((_-m)/p/f)*f,S,E,b,P;if(w<1e-14&&!g&&!y)return[{value:m},{value:_}];P=Math.ceil(_/w)-Math.floor(m/w),P>p&&(w=A0(P*w/p/f)*f),G(l)||(S=Math.pow(10,l),w=Math.ceil(w*S)/S),s==="ticks"?(E=Math.floor(m/w)*w,b=Math.ceil(_/w)*w):(E=m,b=_),g&&y&&r&&rz((a-o)/r,w/1e3)?(P=Math.round(Math.min((a-o)/w,u)),w=(a-o)/P,E=o,b=a):v?(E=g?o:E,b=y?a:b,P=c-1,w=(b-E)/P):(P=(b-E)/w,sa(P,Math.round(P),w/1e3)?P=Math.round(P):P=Math.ceil(P));const T=Math.max(R0(w),R0(E));S=Math.pow(10,G(l)?T:l),E=Math.round(E*S)/S,b=Math.round(b*S)/S;let M=0;for(g&&(d&&E!==o?(n.push({value:o}),E<o&&M++,sa(Math.round((E+M*w)*S)/S,o,Pw(o,x,t))&&M++):E<o&&M++);M<P;++M){const B=Math.round((E+M*w)*S)/S;if(y&&B>a)break;n.push({value:B})}return y&&d&&b!==a?n.length&&sa(n[n.length-1].value,a,Pw(a,x,t))?n[n.length-1].value=a:n.push({value:a}):(!y||b===a)&&n.push({value:b}),n}function Pw(t,e,{horizontal:n,minRotation:i}){const s=yi(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Bu extends qs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return G(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=wn(s),c=wn(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=AH(s,r);return e.bounds==="ticks"&&wk(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Zg(e,this.chart.options.locale,this.options.ticks.format)}}class Ap extends Bu{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Fe(e)?e:0,this.max=Fe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=yi(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}O(Ap,"id","linear"),O(Ap,"defaults",{ticks:{callback:Rh.formatters.numeric}});const Ka=t=>Math.floor(gi(t)),es=(t,e)=>Math.pow(10,Ka(t)+e);function Iw(t){return t/Math.pow(10,Ka(t))===1}function Aw(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function RH(t,e){const n=e-t;let i=Ka(n);for(;Aw(t,e,i)>10;)i++;for(;Aw(t,e,i)<10;)i--;return Math.min(i,Ka(t))}function MH(t,{min:e,max:n}){e=vt(t.min,e);const i=[],s=Ka(e);let r=RH(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=vt(t.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:Iw(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const f=vt(t.max,d);return i.push({value:f,major:Iw(f),significand:h}),i}class Rw extends qs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Bu.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Fe(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Fe(e)?Math.max(0,e):null,this.max=Fe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Fe(this._userMin)&&(this.min=e===es(this.min,0)?es(this.min,-1):es(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(es(i,-1)),o(es(s,1)))),i<=0&&r(es(s,-1)),s<=0&&o(es(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=MH(n,this);return e.bounds==="ticks"&&wk(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Zg(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=gi(e),this._valueRange=gi(this.max)-gi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(gi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}O(Rw,"id","logarithmic"),O(Rw,"defaults",{ticks:{callback:Rh.formatters.logarithmic,major:{enabled:!0}}});function Rp(t){const e=t.ticks;if(e.display&&t.display){const n=Ze(e.backdropPadding);return $(e.font&&e.font.size,Se.font.size)+n.height}return 0}function DH(t,e,n){return n=fe(n)?n:[n],{w:Cz(t,e.string,n),h:n.length*e.lineHeight}}function Mw(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function OH(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ke/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=Me(c.font),d=DH(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=qt(t.getIndexAngle(l)+a),p=Math.round(qg(f)),m=Mw(p,u.x,d.w,0,180),_=Mw(p,u.y,d.h,90,270);NH(n,e,f,m,_)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=VH(t,i,s)}function NH(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function LH(t,e,n){const i=t.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=n,l=t.getPointPosition(e,i+s+o,r),c=Math.round(qg(qt(l.angle+St))),u=zH(l.y,a.h,c),h=jH(c),d=BH(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function FH(t,e){if(!e)return!0;const{left:n,top:i,right:s,bottom:r}=t;return!(Vn({x:n,y:i},e)||Vn({x:n,y:r},e)||Vn({x:s,y:i},e)||Vn({x:s,y:r},e))}function VH(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Rp(r)/2,additionalAngle:o?ke/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=e[u];const h=LH(t,u,l);i.push(h),a==="auto"&&(h.visible=FH(h,c),h.visible&&(c=h))}return i}function jH(t){return t===0||t===180?"center":t<180?"left":"right"}function BH(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function zH(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function UH(t,e,n){const{left:i,top:s,right:r,bottom:o}=n,{backdropColor:a}=e;if(!G(a)){const l=Ss(e.borderRadius),c=Ze(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=s-c.top,d=r-i+c.width,f=o-s+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),Ha(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function WH(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=t._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(t.getPointLabelContext(s));UH(n,o,r);const a=Me(o.font),{x:l,y:c,textAlign:u}=r;zs(n,t._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function n1(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,Ut);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function HH(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),n1(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function $H(t,e,n){return Yi(t,{label:n,index:e,type:"pointLabel"})}class sc extends Bu{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ze(Rp(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Fe(e)&&!isNaN(e)?e:0,this.max=Fe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Rp(this.options))}generateTickLabels(e){Bu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=ie(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?OH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=Ut/(this._pointLabels.length||1),i=this.options.startAngle||0;return qt(e*n+yi(i))}getDistanceFromCenterForValue(e){if(G(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(G(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return $H(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-St+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),n1(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&WH(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=s.setContext(d),p=r.setContext(d);HH(this,f,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=Me(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=Ze(c.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}zs(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}O(sc,"id","radialLinear"),O(sc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Rh.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),O(sc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),O(sc,"descriptors",{angleLines:{_fallback:"grid"}});const Oh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ht=Object.keys(Oh);function Dw(t,e){return t-e}function Ow(t,e){if(G(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Fe(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Wa(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function Nw(t,e,n,i){const s=ht.length;for(let r=ht.indexOf(t);r<s-1;++r){const o=Oh[ht[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return ht[r]}return ht[s-1]}function KH(t,e,n,i,s){for(let r=ht.length-1;r>=ht.indexOf(n);r--){const o=ht[r];if(Oh[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return ht[n?ht.indexOf(n):0]}function GH(t){for(let e=ht.indexOf(t)+1,n=ht.length;e<n;++e)if(Oh[ht[e]].common)return ht[e]}function Lw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=Qg(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function YH(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Fw(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:YH(t,i,s,n)}class zu extends qs{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new zU._date(e.adapters.date);s.init(n),ia(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Ow(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Fe(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Fe(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=uz(s,r,o);return this._unit=n.unit||(i.autoSkip?Nw(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):KH(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:GH(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Fw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Et(n,0,o),i=Et(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Nw(r.minUnit,n,i,this._getLabelCapacity(n)),a=$(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Wa(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)Lw(u,d,p);return(d===i||s.bounds==="ticks"||f===1)&&Lw(u,d,p),Object.keys(u).sort(Dw).map(m=>+m)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return ie(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,s||(f?h:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=yi(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Fw(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(Ow(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Sk(e.sort(Dw))}}O(zu,"id","time"),O(zu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function rc(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=gs(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=gs(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Vw extends zu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=rc(n,this.min),this._tableRange=rc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(rc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return rc(this._table,i*this._tableRange+this._minPos,!0)}}O(Vw,"id","timeseries"),O(Vw,"defaults",zu.defaults);const i1="label";function jw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function qH(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function s1(t,e){t.labels=e}function r1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i1;const i=[];t.datasets=e.map(s=>{const r=t.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function QH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i1;const n={labels:[],datasets:[]};return s1(n,t.labels),r1(n,t.datasets,e),n}function XH(t,e){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=t,f=k.useRef(null),p=k.useRef(null),m=()=>{f.current&&(p.current=new Dh(f.current,{type:o,data:QH(a,r),options:l&&{...l},plugins:c}),jw(e,p.current))},_=()=>{jw(e,null),p.current&&(p.current.destroy(),p.current=null)};return k.useEffect(()=>{!s&&p.current&&l&&qH(p.current,l)},[s,l]),k.useEffect(()=>{!s&&p.current&&s1(p.current.config.data,a.labels)},[s,a.labels]),k.useEffect(()=>{!s&&p.current&&a.datasets&&r1(p.current.config.data,a.datasets,r)},[s,a.datasets]),k.useEffect(()=>{p.current&&(s?(_(),setTimeout(m)):p.current.update(h))},[s,l,a.labels,a.datasets,h]),k.useEffect(()=>{p.current&&(_(),setTimeout(m))},[o]),k.useEffect(()=>(m(),()=>_()),[]),wt.createElement("canvas",{ref:f,role:"img",height:n,width:i,...d},u)}const JH=k.forwardRef(XH);function o1(t,e){return Dh.register(e),k.forwardRef((n,i)=>wt.createElement(JH,{...n,ref:i,type:t}))}const ZH=o1("line",Pc),e5=o1("bar",kc);Dh.register(Ip,Ap,Mc,Rc,Lo,_H,TH,gH);const t5=({todayWords:t,wordSearchCounts:e,dailyWordCounts:n,onSearch:i})=>{console.log("Statistics",t,e,n);let s=Array.from(t),r=Array.from({length:5},(y,v)=>({date:`mockDay ${v+1}`,count:Math.floor(Math.random()*20)+5}));if(n)for(const y in n)r.push({date:y,count:n[y]});let o={};if(e)for(const y in e)o[y]=e[y];const a=Object.entries(o).sort(([,y],[,v])=>v-y).slice(0,15),l={labels:a.map(([y])=>y),datasets:[{label:"Query Frequency",data:a.map(([,y])=>y),backgroundColor:"rgba(54, 162, 235, 0.8)"}]},[c,u]=k.useState(10),h=k.useRef(null),d=y=>{u(parseInt(y.target.value,10))},f={labels:r.slice(-c).map(y=>y.date),datasets:[{label:"Daily Search Count",data:r.slice(-c).map(y=>y.count),fill:!1,borderColor:"rgba(75, 192, 192, 1)",tension:.1}]},[p,m]=k.useState("dailyWords"),_=[{id:"dailyWords",label:"Daily Search Words"},{id:"wordFrequency",label:"Word Search Frequency"},{id:"dailyQueryCount",label:"Daily Search Count"}],g=y=>{i(mk(y))};return C.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-4",children:[C.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Statistics"}),C.jsx("div",{className:"flex mb-4 justify-center items-center",children:_.map(y=>C.jsx("button",{className:`mr-4 px-4 py-2 rounded-lg ${p===y.id?"bg-blue-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,onClick:()=>m(y.id),children:y.label},y.id))}),C.jsxs("div",{children:[p==="dailyWords"&&C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-semibold text-blue-500",children:"Daily Search Words"}),C.jsxs("span",{className:"text-gray-600",children:["Total: ",s.length]}),C.jsx("ul",{className:"columns-2 md:columns-3 gap-4 list-disc list-inside text-gray-600",children:s.map((y,v)=>C.jsx("li",{children:C.jsx("span",{className:"text-gray-600 cursor-pointer hover:underline hover:text-blue-500",onClick:()=>g(y),children:y})},v))})]}),p==="wordFrequency"&&C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-semibold text-blue-500",children:"Word Search Frequency (Top 15)"}),C.jsx("ul",{className:"columns-2 md:columns-3 gap-4 list-disc list-inside text-gray-600",children:a.map(([y,v],x)=>C.jsxs("li",{children:[C.jsx("span",{className:"text-gray-600 cursor-pointer hover:underline hover:text-blue-500",onClick:()=>g(y),children:y}),": ",v]},x))}),C.jsx("div",{className:"mt-4",children:C.jsx(e5,{data:l})})]}),p==="dailyQueryCount"&&C.jsxs("div",{children:[C.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[C.jsx("h3",{className:"text-lg font-semibold text-blue-500",children:"Daily Search Count"}),C.jsxs("div",{className:"flex space-x-6",children:[C.jsx("label",{htmlFor:"xLabelsCount",className:"mr-2",children:"Show Days:"}),C.jsxs("select",{id:"xLabelsCount",value:c,onChange:d,children:[C.jsx("option",{value:5,children:"5"}),C.jsx("option",{value:10,children:"10"}),C.jsx("option",{value:30,children:"30"}),C.jsx("option",{value:50,children:"50"}),C.jsx("option",{value:100,children:"100"}),C.jsx("option",{value:200,children:"200"})]})]})]}),C.jsxs("div",{className:"mt-4",style:{overflowX:"auto"},children:[" ",C.jsx(ZH,{data:f,ref:h})," "]})]})]})]})},a1=k.createContext({currentUser:null,loading:!0});function n5(){return k.useContext(a1)}function i5({children:t}){const[e,n]=k.useState(null),[i,s]=k.useState(!0);k.useEffect(()=>X2(Mu,a=>{n(a),s(!1)}),[]);const r={currentUser:e,loading:i};return C.jsx(a1.Provider,{value:r,children:!i&&t})}const ly=k.createContext({});function cy(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const Nh=k.createContext(null),uy=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class s5 extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=i instanceof HTMLElement&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function r5({children:t,isPresent:e,anchorX:n}){const i=k.useId(),s=k.useRef(null),r=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=k.useContext(uy);return k.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:u,right:h}=r.current;if(e||!s.current||!a||!l)return;const d=n==="left"?`left: ${u}`:`right: ${h}`;s.current.dataset.motionPopId=i;const f=document.createElement("style");return o&&(f.nonce=o),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${d}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),C.jsx(s5,{isPresent:e,childRef:s,sizeRef:r,children:k.cloneElement(t,{ref:s})})}const o5=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:o,anchorX:a})=>{const l=cy(a5),c=k.useId(),u=k.useCallback(d=>{l.set(d,!0);for(const f of l.values())if(!f)return;i&&i()},[l,i]),h=k.useMemo(()=>({id:c,initial:e,isPresent:n,custom:s,onExitComplete:u,register:d=>(l.set(d,!1),()=>l.delete(d))}),r?[Math.random(),u]:[n,u]);return k.useMemo(()=>{l.forEach((d,f)=>l.set(f,!1))},[n]),k.useEffect(()=>{!n&&!l.size&&i&&i()},[n]),o==="popLayout"&&(t=C.jsx(r5,{isPresent:n,anchorX:a,children:t})),C.jsx(Nh.Provider,{value:h,children:t})};function a5(){return new Map}function l1(t=!0){const e=k.useContext(Nh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=e,r=k.useId();k.useEffect(()=>{if(t)return s(r)},[t]);const o=k.useCallback(()=>t&&i&&i(r),[r,i,t]);return!n&&i?[!1,o]:[!0]}const oc=t=>t.key||"";function Bw(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const hy=typeof window<"u",c1=hy?k.useLayoutEffect:k.useEffect,l5=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,c]=l1(o),u=k.useMemo(()=>Bw(t),[t]),h=o&&!l?[]:u.map(oc),d=k.useRef(!0),f=k.useRef(u),p=cy(()=>new Map),[m,_]=k.useState(u),[g,y]=k.useState(u);c1(()=>{d.current=!1,f.current=u;for(let w=0;w<g.length;w++){const S=oc(g[w]);h.includes(S)?p.delete(S):p.get(S)!==!0&&p.set(S,!1)}},[g,h.length,h.join("-")]);const v=[];if(u!==m){let w=[...u];for(let S=0;S<g.length;S++){const E=g[S],b=oc(E);h.includes(b)||(w.splice(S,0,E),v.push(E))}return r==="wait"&&v.length&&(w=v),y(Bw(w)),_(u),null}const{forceRender:x}=k.useContext(ly);return C.jsx(C.Fragment,{children:g.map(w=>{const S=oc(w),E=o&&!l?!1:u===g||h.includes(S),b=()=>{if(p.has(S))p.set(S,!0);else return;let P=!0;p.forEach(T=>{T||(P=!1)}),P&&(x==null||x(),y(f.current),o&&(c==null||c()),i&&i())};return C.jsx(o5,{isPresent:E,initial:!d.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,onExitComplete:E?void 0:b,anchorX:a,children:w},S)})})},Pt=t=>t;let u1=Pt;function dy(t){let e;return()=>(e===void 0&&(e=t()),e)}const Gr=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Un=t=>t*1e3,Wn=t=>t/1e3,c5={skipAnimations:!1,useManualTiming:!1},ac=["read","resolveKeyframes","update","preRender","render","postRender"],zw={value:null,addProjectionMetrics:null};function u5(t,e){let n=new Set,i=new Set,s=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){o.has(h)&&(u.schedule(h),t()),l++,h(a)}const u={schedule:(h,d=!1,f=!1)=>{const m=f&&s?n:i;return d&&o.add(h),m.has(h)||m.add(h),h},cancel:h=>{i.delete(h),o.delete(h)},process:h=>{if(a=h,s){r=!0;return}s=!0,[n,i]=[i,n],n.forEach(c),e&&zw.value&&zw.value.frameloop[e].push(l),l=0,n.clear(),s=!1,r&&(r=!1,u.process(h))}};return u}const h5=40;function h1(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=ac.reduce((g,y)=>(g[y]=u5(r,e?y:void 0),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:d}=o,f=()=>{const g=performance.now();n=!1,s.delta=i?1e3/60:Math.max(Math.min(g-s.timestamp,h5),1),s.timestamp=g,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),d.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(f))},p=()=>{n=!0,i=!0,s.isProcessing||t(f)};return{schedule:ac.reduce((g,y)=>{const v=o[y];return g[y]=(x,w=!1,S=!1)=>(n||p(),v.schedule(x,w,S)),g},{}),cancel:g=>{for(let y=0;y<ac.length;y++)o[ac[y]].cancel(g)},state:s,steps:o}}const{schedule:oe,cancel:zi,state:ze,steps:Hd}=h1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pt,!0),d1=k.createContext({strict:!1}),Uw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yr={};for(const t in Uw)Yr[t]={isEnabled:e=>Uw[t].some(n=>!!e[n])};function d5(t){for(const e in t)Yr[e]={...Yr[e],...t[e]}}const f5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||f5.has(t)}let f1=t=>!Uu(t);function p5(t){t&&(f1=e=>e.startsWith("on")?!Uu(e):t(e))}try{p5(require("@emotion/is-prop-valid").default)}catch{}function m5(t,e,n){const i={};for(const s in t)s==="values"&&typeof t.values=="object"||(f1(s)||n===!0&&Uu(s)||!e&&!Uu(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}function g5(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Lh=k.createContext({});function Fh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ga(t){return typeof t=="string"||Array.isArray(t)}const fy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],py=["initial",...fy];function Vh(t){return Fh(t.animate)||py.some(e=>Ga(t[e]))}function p1(t){return!!(Vh(t)||t.variants)}function y5(t,e){if(Vh(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Ga(n)?n:void 0,animate:Ga(i)?i:void 0}}return t.inherit!==!1?e:{}}function _5(t){const{initial:e,animate:n}=y5(t,k.useContext(Lh));return k.useMemo(()=>({initial:e,animate:n}),[Ww(e),Ww(n)])}function Ww(t){return Array.isArray(t)?t.join(" "):t}const v5=Symbol.for("motionComponentSymbol");function gr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function w5(t,e,n){return k.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):gr(n)&&(n.current=i))},[e])}const my=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),x5="framerAppearId",m1="data-"+my(x5),{schedule:gy,cancel:n8}=h1(queueMicrotask,!1),g1=k.createContext({});function b5(t,e,n,i,s){var r,o;const{visualElement:a}=k.useContext(Lh),l=k.useContext(d1),c=k.useContext(Nh),u=k.useContext(uy).reducedMotion,h=k.useRef(null);i=i||l.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const d=h.current,f=k.useContext(g1);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&S5(h.current,n,s,f);const p=k.useRef(!1);k.useInsertionEffect(()=>{d&&p.current&&d.update(n,c)});const m=n[m1],_=k.useRef(!!m&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return c1(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),gy.render(d.render),_.current&&d.animationState&&d.animationState.animateChanges())}),k.useEffect(()=>{d&&(!_.current&&d.animationState&&d.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,m)}),_.current=!1))}),d}function S5(t,e,n,i){const{layoutId:s,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:y1(t.parent)),t.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||a&&gr(a),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function y1(t){if(t)return t.options.allowProjection!==!1?t.projection:y1(t.parent)}function E5({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:s}){var r,o;t&&d5(t);function a(c,u){let h;const d={...k.useContext(uy),...c,layoutId:C5(c)},{isStatic:f}=d,p=_5(c),m=i(c,f);if(!f&&hy){T5();const _=k5(d);h=_.MeasureLayout,p.visualElement=b5(s,m,d,e,_.ProjectionNode)}return C.jsxs(Lh.Provider,{value:p,children:[h&&p.visualElement?C.jsx(h,{visualElement:p.visualElement,...d}):null,n(s,c,w5(m,p.visualElement,u),m,f,p.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(r=s.displayName)!==null&&r!==void 0?r:s.name)!==null&&o!==void 0?o:""})`}`;const l=k.forwardRef(a);return l[v5]=s,l}function C5({layoutId:t}){const e=k.useContext(ly).id;return e&&t!==void 0?e+"-"+t:t}function T5(t,e){k.useContext(d1).strict}function k5(t){const{drag:e,layout:n}=Yr;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const _1=t=>e=>typeof e=="string"&&e.startsWith(t),yy=_1("--"),P5=_1("var(--"),_y=t=>P5(t)?I5.test(t.split("/*")[0].trim()):!1,I5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ya={};function A5(t){for(const e in t)Ya[e]=t[e],yy(e)&&(Ya[e].isCSSVariable=!0)}const so=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qs=new Set(so);function v1(t,{layout:e,layoutId:n}){return Qs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ya[t]||t==="opacity")}const Xe=t=>!!(t&&t.getVelocity),w1=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Xn=(t,e,n)=>n>e?e:n<t?t:n,ro={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qa={...ro,transform:t=>Xn(0,1,t)},lc={...ro,default:1},wl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),si=wl("deg"),xn=wl("%"),L=wl("px"),R5=wl("vh"),M5=wl("vw"),Hw={...xn,parse:t=>xn.parse(t)/100,transform:t=>xn.transform(t*100)},D5={borderWidth:L,borderTopWidth:L,borderRightWidth:L,borderBottomWidth:L,borderLeftWidth:L,borderRadius:L,radius:L,borderTopLeftRadius:L,borderTopRightRadius:L,borderBottomRightRadius:L,borderBottomLeftRadius:L,width:L,maxWidth:L,height:L,maxHeight:L,top:L,right:L,bottom:L,left:L,padding:L,paddingTop:L,paddingRight:L,paddingBottom:L,paddingLeft:L,margin:L,marginTop:L,marginRight:L,marginBottom:L,marginLeft:L,backgroundPositionX:L,backgroundPositionY:L},O5={rotate:si,rotateX:si,rotateY:si,rotateZ:si,scale:lc,scaleX:lc,scaleY:lc,scaleZ:lc,skew:si,skewX:si,skewY:si,distance:L,translateX:L,translateY:L,translateZ:L,x:L,y:L,z:L,perspective:L,transformPerspective:L,opacity:qa,originX:Hw,originY:Hw,originZ:L},$w={...ro,transform:Math.round},vy={...D5,...O5,zIndex:$w,size:L,fillOpacity:qa,strokeOpacity:qa,numOctaves:$w},N5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L5=so.length;function F5(t,e,n){let i="",s=!0;for(let r=0;r<L5;r++){const o=so[r],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=w1(a,vy[o]);if(!l){s=!1;const u=N5[o]||o;i+=`${u}(${c}) `}n&&(e[o]=c)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}function wy(t,e,n){const{style:i,vars:s,transformOrigin:r}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Qs.has(l)){o=!0;continue}else if(yy(l)){s[l]=c;continue}else{const u=w1(c,vy[l]);l.startsWith("origin")?(a=!0,r[l]=u):i[l]=u}}if(e.transform||(o||n?i.transform=F5(e,t.transform,n):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=r;i.transformOrigin=`${l} ${c} ${u}`}}const xy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function x1(t,e,n){for(const i in e)!Xe(e[i])&&!v1(i,n)&&(t[i]=e[i])}function V5({transformTemplate:t},e){return k.useMemo(()=>{const n=xy();return wy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function j5(t,e){const n=t.style||{},i={};return x1(i,n,t),Object.assign(i,V5(t,e)),i}function B5(t,e){const n={},i=j5(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const z5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function by(t){return typeof t!="string"||t.includes("-")?!1:!!(z5.indexOf(t)>-1||/[A-Z]/u.test(t))}const U5={offset:"stroke-dashoffset",array:"stroke-dasharray"},W5={offset:"strokeDashoffset",array:"strokeDasharray"};function H5(t,e,n=1,i=0,s=!0){t.pathLength=1;const r=s?U5:W5;t[r.offset]=L.transform(-i);const o=L.transform(e),a=L.transform(n);t[r.array]=`${o} ${a}`}function Kw(t,e,n){return typeof t=="string"?t:L.transform(e+n*t)}function $5(t,e,n){const i=Kw(e,t.x,t.width),s=Kw(n,t.y,t.height);return`${i} ${s}`}function Sy(t,{attrX:e,attrY:n,attrScale:i,originX:s,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(wy(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f,dimensions:p}=t;d.transform&&(p&&(f.transform=d.transform),delete d.transform),p&&(s!==void 0||r!==void 0||f.transform)&&(f.transformOrigin=$5(p,s!==void 0?s:.5,r!==void 0?r:.5)),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),i!==void 0&&(d.scale=i),o!==void 0&&H5(d,o,a,l,!1)}const b1=()=>({...xy(),attrs:{}}),Ey=t=>typeof t=="string"&&t.toLowerCase()==="svg";function K5(t,e,n,i){const s=k.useMemo(()=>{const r=b1();return Sy(r,e,Ey(i),t.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};x1(r,t.style,t),s.style={...r,...s.style}}return s}function G5(t=!1){return(n,i,s,{latestValues:r},o)=>{const l=(by(n)?K5:B5)(i,r,o,n),c=m5(i,typeof n=="string",t),u=n!==k.Fragment?{...c,...l,ref:s}:{},{children:h}=i,d=k.useMemo(()=>Xe(h)?h.get():h,[h]);return k.createElement(n,{...u,children:d})}}function Gw(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Cy(t,e,n,i){if(typeof e=="function"){const[s,r]=Gw(i);e=e(n!==void 0?n:t.custom,s,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,r]=Gw(i);e=e(n!==void 0?n:t.custom,s,r)}return e}const Mp=t=>Array.isArray(t),Y5=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),q5=t=>Mp(t)?t[t.length-1]||0:t;function Dc(t){const e=Xe(t)?t.get():t;return Y5(e)?e.toValue():e}function Q5({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,s,r){const o={latestValues:X5(i,s,r,t),renderState:e()};return n&&(o.onMount=a=>n({props:i,current:a,...o}),o.onUpdate=a=>n(a)),o}const S1=t=>(e,n)=>{const i=k.useContext(Lh),s=k.useContext(Nh),r=()=>Q5(t,e,i,s);return n?r():cy(r)};function X5(t,e,n,i){const s={},r=i(t,{});for(const d in r)s[d]=Dc(r[d]);let{initial:o,animate:a}=t;const l=Vh(t),c=p1(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Fh(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const p=Cy(t,d[f]);if(p){const{transitionEnd:m,transition:_,...g}=p;for(const y in g){let v=g[y];if(Array.isArray(v)){const x=u?v.length-1:0;v=v[x]}v!==null&&(s[y]=v)}for(const y in m)s[y]=m[y]}}}return s}function Ty(t,e,n){var i;const{style:s}=t,r={};for(const o in s)(Xe(s[o])||e.style&&Xe(e.style[o])||v1(o,t)||((i=n==null?void 0:n.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(r[o]=s[o]);return r}const J5={useVisualState:S1({scrapeMotionValuesFromProps:Ty,createRenderState:xy})};function E1(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function C1(t,{style:e,vars:n},i,s){Object.assign(t.style,e,s&&s.getProjectionStyles(i));for(const r in n)t.style.setProperty(r,n[r])}const T1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function k1(t,e,n,i){C1(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(T1.has(s)?s:my(s),e.attrs[s])}function P1(t,e,n){const i=Ty(t,e,n);for(const s in t)if(Xe(t[s])||Xe(e[s])){const r=so.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=t[s]}return i}const Yw=["x","y","width","height","cx","cy","r"],Z5={useVisualState:S1({scrapeMotionValuesFromProps:P1,createRenderState:b1,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:s})=>{if(!n)return;let r=!!t.drag;if(!r){for(const a in s)if(Qs.has(a)){r=!0;break}}if(!r)return;let o=!e;if(e)for(let a=0;a<Yw.length;a++){const l=Yw[a];t[l]!==e[l]&&(o=!0)}o&&oe.read(()=>{E1(n,i),oe.render(()=>{Sy(i,s,Ey(n.tagName),t.transformTemplate),k1(n,i)})})}})};function e3(t,e){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...by(i)?Z5:J5,preloadedFeatures:t,useRender:G5(s),createVisualElement:e,Component:i};return E5(o)}}function Qa(t,e,n){const i=t.getProps();return Cy(i,e,n!==void 0?n:i.custom,t)}const t3=dy(()=>window.ScrollTimeline!==void 0);class n3{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(s=>{if(t3()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{i.forEach((s,r)=>{s&&s(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class i3 extends n3{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function ky(t,e){return t?t[e]||t.default||t:void 0}const Dp=2e4;function I1(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Dp;)e+=n,i=t.next(e);return e>=Dp?1/0:e}function Py(t){return typeof t=="function"}function qw(t,e){t.timeline=e,t.onfinish=null}const Iy=t=>Array.isArray(t)&&typeof t[0]=="number",s3={linearEasing:void 0};function r3(t,e){const n=dy(t);return()=>{var i;return(i=s3[e])!==null&&i!==void 0?i:n()}}const Wu=r3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),A1=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let r=0;r<s;r++)i+=t(Gr(0,s-1,r))+", ";return`linear(${i.substring(0,i.length-2)})`};function R1(t){return!!(typeof t=="function"&&Wu()||!t||typeof t=="string"&&(t in Op||Wu())||Iy(t)||Array.isArray(t)&&t.every(R1))}const Vo=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Op={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vo([0,.65,.55,1]),circOut:Vo([.55,0,1,.45]),backIn:Vo([.31,.01,.66,-.59]),backOut:Vo([.33,1.53,.69,.99])};function M1(t,e){if(t)return typeof t=="function"&&Wu()?A1(t,e):Iy(t)?Vo(t):Array.isArray(t)?t.map(n=>M1(n,e)||Op.easeOut):Op[t]}const Kt={x:!1,y:!1};function D1(){return Kt.x||Kt.y}function o3(t,e,n){var i;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;e&&(s=e.current);const r=(i=n==null?void 0:n[t])!==null&&i!==void 0?i:s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}function O1(t,e){const n=o3(t),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[n,s,()=>i.abort()]}function Qw(t){return!(t.pointerType==="touch"||D1())}function a3(t,e,n={}){const[i,s,r]=O1(t,n),o=a=>{if(!Qw(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=h=>{Qw(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return i.forEach(a=>{a.addEventListener("pointerenter",o,s)}),r}function aa(t,e){const n=`${e}PointerCapture`;if(t.target instanceof Element&&n in t.target&&t.pointerId!==void 0)try{t.target[n](t.pointerId)}catch{}}const N1=(t,e)=>e?t===e?!0:N1(t,e.parentElement):!1,Ay=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,l3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function c3(t){return l3.has(t.tagName)||t.tabIndex!==-1}const jo=new WeakSet;function Xw(t){return e=>{e.key==="Enter"&&t(e)}}function $d(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const u3=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Xw(()=>{if(jo.has(n))return;$d(n,"down");const s=Xw(()=>{$d(n,"up")}),r=()=>$d(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Jw(t){return Ay(t)&&!D1()}function h3(t,e,n={}){const[i,s,r]=O1(t,n),o=a=>{const l=a.currentTarget;if(!l||!Jw(a)||jo.has(l))return;jo.add(l),aa(a,"set");const c=e(l,a),u=(f,p)=>{l.removeEventListener("pointerup",h),l.removeEventListener("pointercancel",d),aa(f,"release"),!(!Jw(f)||!jo.has(l))&&(jo.delete(l),typeof c=="function"&&c(f,{success:p}))},h=f=>{(f.isTrusted?d3(f,l instanceof Element?l.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?u(f,!1):u(f,!(l instanceof Element)||N1(l,f.target))},d=f=>{u(f,!1)};l.addEventListener("pointerup",h,s),l.addEventListener("pointercancel",d,s),l.addEventListener("lostpointercapture",d,s)};return i.forEach(a=>{a=n.useGlobalTarget?window:a;let l=!1;a instanceof HTMLElement&&(l=!0,!c3(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0)),a.addEventListener("pointerdown",o,s),l&&a.addEventListener("focus",c=>u3(c,s),s)}),r}function d3(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}function f3(t){return t==="x"||t==="y"?Kt[t]?null:(Kt[t]=!0,()=>{Kt[t]=!1}):Kt.x||Kt.y?null:(Kt.x=Kt.y=!0,()=>{Kt.x=Kt.y=!1})}const L1=new Set(["width","height","top","left","right","bottom",...so]);let Oc;function p3(){Oc=void 0}const bn={now:()=>(Oc===void 0&&bn.set(ze.isProcessing||c5.useManualTiming?ze.timestamp:performance.now()),Oc),set:t=>{Oc=t,queueMicrotask(p3)}};function Ry(t,e){t.indexOf(e)===-1&&t.push(e)}function My(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Dy{constructor(){this.subscriptions=[]}add(e){return Ry(this.subscriptions,e),()=>My(this.subscriptions,e)}notify(e,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function F1(t,e){return e?t*(1e3/e):0}const Zw=30,m3=t=>!isNaN(parseFloat(t));class g3{constructor(e,n={}){this.version="12.4.10",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=bn.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=m3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Dy);const i=this.events[e].add(n);return e==="change"?()=>{i(),oe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zw);return F1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xa(t,e){return new g3(t,e)}function y3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Xa(n))}function _3(t,e){const n=Qa(t,e);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const o in r){const a=q5(r[o]);y3(t,o,a)}}function v3(t){return!!(Xe(t)&&t.add)}function Np(t,e){const n=t.getValue("willChange");if(v3(n))return n.add(e)}function V1(t){return t.props[m1]}const j1=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,w3=1e-7,x3=12;function b3(t,e,n,i,s){let r,o,a=0;do o=e+(n-e)/2,r=j1(o,i,s)-t,r>0?n=o:e=o;while(Math.abs(r)>w3&&++a<x3);return o}function xl(t,e,n,i){if(t===e&&n===i)return Pt;const s=r=>b3(r,0,1,t,n);return r=>r===0||r===1?r:j1(s(r),e,i)}const B1=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,z1=t=>e=>1-t(1-e),U1=xl(.33,1.53,.69,.99),Oy=z1(U1),W1=B1(Oy),H1=t=>(t*=2)<1?.5*Oy(t):.5*(2-Math.pow(2,-10*(t-1))),Ny=t=>1-Math.sin(Math.acos(t)),$1=z1(Ny),K1=B1(Ny),G1=t=>/^0[^.\s]+$/u.test(t);function S3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||G1(t):!0}const la=t=>Math.round(t*1e5)/1e5,Ly=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function E3(t){return t==null}const C3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fy=(t,e)=>n=>!!(typeof n=="string"&&C3.test(n)&&n.startsWith(t)||e&&!E3(n)&&Object.prototype.hasOwnProperty.call(n,e)),Y1=(t,e,n)=>i=>{if(typeof i!="string")return i;const[s,r,o,a]=i.match(Ly);return{[t]:parseFloat(s),[e]:parseFloat(r),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},T3=t=>Xn(0,255,t),Kd={...ro,transform:t=>Math.round(T3(t))},ys={test:Fy("rgb","red"),parse:Y1("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Kd.transform(t)+", "+Kd.transform(e)+", "+Kd.transform(n)+", "+la(qa.transform(i))+")"};function k3(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Lp={test:Fy("#"),parse:k3,transform:ys.transform},yr={test:Fy("hsl","hue"),parse:Y1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+xn.transform(la(e))+", "+xn.transform(la(n))+", "+la(qa.transform(i))+")"},Ye={test:t=>ys.test(t)||Lp.test(t)||yr.test(t),parse:t=>ys.test(t)?ys.parse(t):yr.test(t)?yr.parse(t):Lp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ys.transform(t):yr.transform(t)},P3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function I3(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ly))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(P3))===null||n===void 0?void 0:n.length)||0)>0}const q1="number",Q1="color",A3="var",R3="var(",ex="${}",M3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ja(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=e.replace(M3,l=>(Ye.test(l)?(i.color.push(r),s.push(Q1),n.push(Ye.parse(l))):l.startsWith(R3)?(i.var.push(r),s.push(A3),n.push(l)):(i.number.push(r),s.push(q1),n.push(parseFloat(l))),++r,ex)).split(ex);return{values:n,split:a,indexes:i,types:s}}function X1(t){return Ja(t).values}function J1(t){const{split:e,types:n}=Ja(t),i=e.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=e[o],s[o]!==void 0){const a=n[o];a===q1?r+=la(s[o]):a===Q1?r+=Ye.transform(s[o]):r+=s[o]}return r}}const D3=t=>typeof t=="number"?0:t;function O3(t){const e=X1(t);return J1(t)(e.map(D3))}const Ui={test:I3,parse:X1,createTransformer:J1,getAnimatableNone:O3},N3=new Set(["brightness","contrast","saturate","opacity"]);function L3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Ly)||[];if(!i)return t;const s=n.replace(i,"");let r=N3.has(e)?1:0;return i!==n&&(r*=100),e+"("+r+s+")"}const F3=/\b([a-z-]*)\(.*?\)/gu,Fp={...Ui,getAnimatableNone:t=>{const e=t.match(F3);return e?e.map(L3).join(" "):t}},V3={...vy,color:Ye,backgroundColor:Ye,outlineColor:Ye,fill:Ye,stroke:Ye,borderColor:Ye,borderTopColor:Ye,borderRightColor:Ye,borderBottomColor:Ye,borderLeftColor:Ye,filter:Fp,WebkitFilter:Fp},Vy=t=>V3[t];function Z1(t,e){let n=Vy(t);return n!==Fp&&(n=Ui),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const j3=new Set(["auto","none","0"]);function B3(t,e,n){let i=0,s;for(;i<t.length&&!s;){const r=t[i];typeof r=="string"&&!j3.has(r)&&Ja(r).values.length&&(s=t[i]),i++}if(s&&n)for(const r of e)t[r]=Z1(n,s)}const tx=t=>t===ro||t===L,nx=(t,e)=>parseFloat(t.split(", ")[e]),ix=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/u);if(s)return nx(s[1],e);{const r=i.match(/^matrix\((.+)\)$/u);return r?nx(r[1],t):0}},z3=new Set(["x","y","z"]),U3=so.filter(t=>!z3.has(t));function W3(t){const e=[];return U3.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const qr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ix(4,13),y:ix(5,14)};qr.translateX=qr.x;qr.translateY=qr.y;const Cs=new Set;let Vp=!1,jp=!1;function eP(){if(jp){const t=Array.from(Cs).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=W3(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,o])=>{var a;(a=i.getValue(r))===null||a===void 0||a.set(o)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}jp=!1,Vp=!1,Cs.forEach(t=>t.complete()),Cs.clear()}function tP(){Cs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(jp=!0)})}function H3(){tP(),eP()}class jy{constructor(e,n,i,s,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Cs.add(this),Vp||(Vp=!0,oe.read(tP),oe.resolveKeyframes(eP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;for(let r=0;r<e.length;r++)if(e[r]===null)if(r===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const l=i.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Cs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Cs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const nP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),$3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function K3(t){const e=$3.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}function iP(t,e,n=1){const[i,s]=K3(t);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const o=r.trim();return nP(o)?parseFloat(o):o}return _y(s)?iP(s,e,n+1):s}const sP=t=>e=>e.test(t),G3={test:t=>t==="auto",parse:t=>t},rP=[ro,L,xn,si,M5,R5,G3],sx=t=>rP.find(sP(t));class oP extends jy{constructor(e,n,i,s,r){super(e,n,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),_y(c))){const u=iP(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!L1.has(i)||e.length!==2)return;const[s,r]=e,o=sx(s),a=sx(r);if(o!==a)if(tx(o)&&tx(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let s=0;s<e.length;s++)S3(e[s])&&i.push(s);i.length&&B3(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qr[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const r=n.getValue(i);r&&r.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=qr[i](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const rx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ui.test(t)||t==="0")&&!t.startsWith("url("));function Y3(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function q3(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],o=rx(s,e),a=rx(r,e);return!o||!a?!1:Y3(t)||(n==="spring"||Py(n))&&i}const Q3=t=>t!==null;function jh(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(Q3),r=e&&n!=="loop"&&e%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const X3=40;class aP{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bn.now(),this.options={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>X3?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&H3(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=bn.now(),this.hasAttemptedResolve=!0;const{name:i,type:s,velocity:r,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!q3(e,i,s,r))if(o)this.options.duration=0;else{l&&l(jh(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ge=(t,e,n)=>t+(e-t)*n;function Gd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function J3({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let s=0,r=0,o=0;if(!e)s=r=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Gd(l,a,t+1/3),r=Gd(l,a,t),o=Gd(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function Hu(t,e){return n=>n>0?e:t}const Yd=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},Z3=[Lp,ys,yr],e$=t=>Z3.find(e=>e.test(t));function ox(t){const e=e$(t);if(!e)return!1;let n=e.parse(t);return e===yr&&(n=J3(n)),n}const ax=(t,e)=>{const n=ox(t),i=ox(e);if(!n||!i)return Hu(t,e);const s={...n};return r=>(s.red=Yd(n.red,i.red,r),s.green=Yd(n.green,i.green,r),s.blue=Yd(n.blue,i.blue,r),s.alpha=ge(n.alpha,i.alpha,r),ys.transform(s))},t$=(t,e)=>n=>e(t(n)),bl=(...t)=>t.reduce(t$),Bp=new Set(["none","hidden"]);function n$(t,e){return Bp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function i$(t,e){return n=>ge(t,e,n)}function By(t){return typeof t=="number"?i$:typeof t=="string"?_y(t)?Hu:Ye.test(t)?ax:o$:Array.isArray(t)?lP:typeof t=="object"?Ye.test(t)?ax:s$:Hu}function lP(t,e){const n=[...t],i=n.length,s=t.map((r,o)=>By(r)(r,e[o]));return r=>{for(let o=0;o<i;o++)n[o]=s[o](r);return n}}function s$(t,e){const n={...t,...e},i={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(i[s]=By(t[s])(t[s],e[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function r$(t,e){var n;const i=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;i[r]=l,s[o]++}return i}const o$=(t,e)=>{const n=Ui.createTransformer(e),i=Ja(t),s=Ja(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Bp.has(t)&&!s.values.length||Bp.has(e)&&!i.values.length?n$(t,e):bl(lP(r$(i,s),s.values),n):Hu(t,e)};function cP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ge(t,e,n):By(t)(t,e)}const a$=5;function uP(t,e,n){const i=Math.max(e-a$,0);return F1(n-t(i),e-i)}const xe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qd=.001;function l$({duration:t=xe.duration,bounce:e=xe.bounce,velocity:n=xe.velocity,mass:i=xe.mass}){let s,r,o=1-e;o=Xn(xe.minDamping,xe.maxDamping,o),t=Xn(xe.minDuration,xe.maxDuration,Wn(t)),o<1?(s=c=>{const u=c*o,h=u*t,d=u-n,f=zp(c,o),p=Math.exp(-h);return qd-d/f*p},r=c=>{const h=c*o*t,d=h*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-h),m=zp(Math.pow(c,2),o);return(-s(c)+qd>0?-1:1)*((d-f)*p)/m}):(s=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-qd+u*h},r=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=u$(s,r,a);if(t=Un(t),isNaN(l))return{stiffness:xe.stiffness,damping:xe.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const c$=12;function u$(t,e,n){let i=n;for(let s=1;s<c$;s++)i=i-t(i)/e(i);return i}function zp(t,e){return t*Math.sqrt(1-e*e)}const h$=["duration","bounce"],d$=["stiffness","damping","mass"];function lx(t,e){return e.some(n=>t[n]!==void 0)}function f$(t){let e={velocity:xe.velocity,stiffness:xe.stiffness,damping:xe.damping,mass:xe.mass,isResolvedFromDuration:!1,...t};if(!lx(t,d$)&&lx(t,h$))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,r=2*Xn(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:xe.mass,stiffness:s,damping:r}}else{const n=l$(t);e={...e,...n,mass:xe.mass},e.isResolvedFromDuration=!0}return e}function hP(t=xe.visualDuration,e=xe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=f$({...n,velocity:-Wn(n.velocity||0)}),p=d||0,m=c/(2*Math.sqrt(l*u)),_=o-r,g=Wn(Math.sqrt(l/u)),y=Math.abs(_)<5;i||(i=y?xe.restSpeed.granular:xe.restSpeed.default),s||(s=y?xe.restDelta.granular:xe.restDelta.default);let v;if(m<1){const w=zp(g,m);v=S=>{const E=Math.exp(-m*g*S);return o-E*((p+m*g*_)/w*Math.sin(w*S)+_*Math.cos(w*S))}}else if(m===1)v=w=>o-Math.exp(-g*w)*(_+(p+g*_)*w);else{const w=g*Math.sqrt(m*m-1);v=S=>{const E=Math.exp(-m*g*S),b=Math.min(w*S,300);return o-E*((p+m*g*_)*Math.sinh(b)+w*_*Math.cosh(b))/w}}const x={calculatedDuration:f&&h||null,next:w=>{const S=v(w);if(f)a.done=w>=h;else{let E=0;m<1&&(E=w===0?Un(p):uP(v,w,S));const b=Math.abs(E)<=i,P=Math.abs(o-S)<=s;a.done=b&&P}return a.value=a.done?o:S,a},toString:()=>{const w=Math.min(I1(x),Dp),S=A1(E=>x.next(w*E).value,w,30);return w+"ms "+S}};return x}function cx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],d={done:!1,value:h},f=b=>a!==void 0&&b<a||l!==void 0&&b>l,p=b=>a===void 0?l:l===void 0||Math.abs(a-b)<Math.abs(l-b)?a:l;let m=n*e;const _=h+m,g=o===void 0?_:o(_);g!==_&&(m=g-h);const y=b=>-m*Math.exp(-b/i),v=b=>g+y(b),x=b=>{const P=y(b),T=v(b);d.done=Math.abs(P)<=c,d.value=d.done?g:T};let w,S;const E=b=>{f(d.value)&&(w=b,S=hP({keyframes:[d.value,p(d.value)],velocity:uP(v,b,d.value),damping:s,stiffness:r,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:b=>{let P=!1;return!S&&w===void 0&&(P=!0,x(b),E(b)),w!==void 0&&b>=w?S.next(b-w):(!P&&x(b),d)}}}const p$=xl(.42,0,1,1),m$=xl(0,0,.58,1),dP=xl(.42,0,.58,1),g$=t=>Array.isArray(t)&&typeof t[0]!="number",y$={linear:Pt,easeIn:p$,easeInOut:dP,easeOut:m$,circIn:Ny,circInOut:K1,circOut:$1,backIn:Oy,backInOut:W1,backOut:U1,anticipate:H1},ux=t=>{if(Iy(t)){u1(t.length===4);const[e,n,i,s]=t;return xl(e,n,i,s)}else if(typeof t=="string")return y$[t];return t};function _$(t,e,n){const i=[],s=n||cP,r=t.length-1;for(let o=0;o<r;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Pt:e;a=bl(l,a)}i.push(a)}return i}function v$(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const r=t.length;if(u1(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=_$(e,i,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=Gr(t[h],t[h+1],u);return a[h](d)};return n?u=>c(Xn(t[0],t[r-1],u)):c}function w$(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=Gr(0,e,i);t.push(ge(n,1,s))}}function x$(t){const e=[0];return w$(e,t.length-1),e}function b$(t,e){return t.map(n=>n*e)}function S$(t,e){return t.map(()=>e||dP).splice(0,t.length-1)}function $u({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=g$(i)?i.map(ux):ux(i),r={done:!1,value:e[0]},o=b$(n&&n.length===e.length?n:x$(e),t),a=v$(o,e,{ease:Array.isArray(s)?s:S$(e,s)});return{calculatedDuration:t,next:l=>(r.value=a(l),r.done=l>=t,r)}}const E$=t=>{const e=({timestamp:n})=>t(n);return{start:()=>oe.update(e,!0),stop:()=>zi(e),now:()=>ze.isProcessing?ze.timestamp:bn.now()}},C$={decay:cx,inertia:cx,tween:$u,keyframes:$u,spring:hP},T$=t=>t/100;class zy extends aP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:s,keyframes:r}=this.options,o=(s==null?void 0:s.KeyframeResolver)||jy,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(r,a,n,i,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=this.options,a=Py(n)?n:C$[n]||$u;let l,c;a!==$u&&typeof e[0]!="number"&&(l=bl(T$,cP(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});r==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=I1(u));const{calculatedDuration:h}=u,d=h+s,f=d*(i+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:d,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=i;if(this.startTime===null)return r.next(0);const{delay:d,repeat:f,repeatType:p,repeatDelay:m,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let v=this.currentTime,x=r;if(f){const b=Math.min(this.currentTime,u)/h;let P=Math.floor(b),T=b%1;!T&&b>=1&&(T=1),T===1&&P--,P=Math.min(P,f+1),!!(P%2)&&(p==="reverse"?(T=1-T,m&&(T-=m/h)):p==="mirror"&&(x=o)),v=Xn(0,1,T)*h}const w=y?{done:!1,value:l[0]}:x.next(v);a&&(w.value=a(w.value));let{done:S}=w;!y&&c!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&s!==void 0&&(w.value=jh(l,this.options,s)),_&&_(w.value),E&&this.finish(),w}get duration(){const{resolved:e}=this;return e?Wn(e.calculatedDuration):0}get time(){return Wn(this.currentTime)}set time(e){e=Un(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Wn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=E$,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const k$=new Set(["opacity","clipPath","filter","transform"]);function P$(t,e,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=M1(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:i,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}const I$=dy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ku=10,A$=2e4;function R$(t){return Py(t.type)||t.type==="spring"||!R1(t.ease)}function M$(t,e){const n=new zy({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const s=[];let r=0;for(;!i.done&&r<A$;)i=n.sample(r),s.push(i.value),r+=Ku;return{times:void 0,keyframes:s,duration:r-Ku,ease:"linear"}}const fP={anticipate:H1,backInOut:W1,circInOut:K1};function D$(t){return t in fP}class hx extends aP{constructor(e){super(e);const{name:n,motionValue:i,element:s,keyframes:r}=this.options;this.resolver=new oP(r,(o,a)=>this.onKeyframesResolved(o,a),n,i,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:s,ease:r,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof r=="string"&&Wu()&&D$(r)&&(r=fP[r]),R$(this.options)){const{onComplete:h,onUpdate:d,motionValue:f,element:p,...m}=this.options,_=M$(e,m);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,s=_.times,r=_.ease,o="keyframes"}const u=P$(a.owner.current,l,e,{...this.options,duration:i,times:s,ease:r});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(qw(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(jh(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:s,type:o,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Wn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Wn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Un(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Pt;const{animation:i}=n;qw(i,e)}return Pt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:s,type:r,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:d,...f}=this.options,p=new zy({...f,keyframes:i,duration:s,type:r,ease:o,times:a,isGenerator:!0}),m=Un(this.time);c.setWithVelocity(p.sample(m-Ku).value,p.sample(m).value,Ku)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:s,repeatType:r,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return I$()&&i&&k$.has(i)&&!l&&!c&&!s&&r!=="mirror"&&o!==0&&a!=="inertia"}}const O$={type:"spring",stiffness:500,damping:25,restSpeed:10},N$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),L$={type:"keyframes",duration:.8},F$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V$=(t,{keyframes:e})=>e.length>2?L$:Qs.has(t)?t.startsWith("scale")?N$(e[1]):O$:F$;function j$({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Uy=(t,e,n,i={},s,r)=>o=>{const a=ky(i,t)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Un(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:r?void 0:s};j$(a)||(u={...u,...V$(t,u)}),u.duration&&(u.duration=Un(u.duration)),u.repeatDelay&&(u.repeatDelay=Un(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!r&&e.get()!==void 0){const d=jh(u.keyframes,a);if(d!==void 0)return oe.update(()=>{u.onUpdate(d),u.onComplete()}),new i3([])}return!r&&hx.supports(u)?new hx(u):new zy(u)};function B$({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function pP(t,e,{delay:n=0,transitionOverride:i,type:s}={}){var r;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const d=t.getValue(h,(r=t.latestValues[h])!==null&&r!==void 0?r:null),f=l[h];if(f===void 0||u&&B$(u,h))continue;const p={delay:n,...ky(o||{},h)};let m=!1;if(window.MotionHandoffAnimation){const g=V1(t);if(g){const y=window.MotionHandoffAnimation(g,h,oe);y!==null&&(p.startTime=y,m=!0)}}Np(t,h),d.start(Uy(h,d,f,t.shouldReduceMotion&&L1.has(h)?{type:!1}:p,t,m));const _=d.animation;_&&c.push(_)}return a&&Promise.all(c).then(()=>{oe.update(()=>{a&&_3(t,a)})}),c}function Up(t,e,n={}){var i;const s=Qa(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const o=s?()=>Promise.all(pP(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=r;return z$(t,e,u+c,h,d,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function z$(t,e,n=0,i=0,s=1,r){const o=[],a=(t.variantChildren.size-1)*i,l=s===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(t.variantChildren).sort(U$).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Up(c,e,{...r,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function U$(t,e){return t.sortNodePosition(e)}function W$(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>Up(t,r,n));i=Promise.all(s)}else if(typeof e=="string")i=Up(t,e,n);else{const s=typeof e=="function"?Qa(t,e,n.custom):e;i=Promise.all(pP(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function mP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const H$=py.length;function gP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?gP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<H$;n++){const i=py[n],s=t.props[i];(Ga(s)||s===!1)&&(e[i]=s)}return e}const $$=[...fy].reverse(),K$=fy.length;function G$(t){return e=>Promise.all(e.map(({animation:n,options:i})=>W$(t,n,i)))}function Y$(t){let e=G$(t),n=dx(),i=!0;const s=l=>(c,u)=>{var h;const d=Qa(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:p,...m}=d;c={...c,...m,...p}}return c};function r(l){e=l(t)}function o(l){const{props:c}=t,u=gP(t.parent)||{},h=[],d=new Set;let f={},p=1/0;for(let _=0;_<K$;_++){const g=$$[_],y=n[g],v=c[g]!==void 0?c[g]:u[g],x=Ga(v),w=g===l?y.isActive:null;w===!1&&(p=_);let S=v===u[g]&&v!==c[g]&&x;if(S&&i&&t.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...f},!y.isActive&&w===null||!v&&!y.prevProp||Fh(v)||typeof v=="boolean")continue;const E=q$(y.prevProp,v);let b=E||g===l&&y.isActive&&!S&&x||_>p&&x,P=!1;const T=Array.isArray(v)?v:[v];let M=T.reduce(s(g),{});w===!1&&(M={});const{prevResolvedValues:B={}}=y,ve={...B,...M},He=Y=>{b=!0,d.has(Y)&&(P=!0,d.delete(Y)),y.needsAnimating[Y]=!0;const R=t.getValue(Y);R&&(R.liveStyle=!1)};for(const Y in ve){const R=M[Y],N=B[Y];if(f.hasOwnProperty(Y))continue;let V=!1;Mp(R)&&Mp(N)?V=!mP(R,N):V=R!==N,V?R!=null?He(Y):d.add(Y):R!==void 0&&d.has(Y)?He(Y):y.protectedKeys[Y]=!0}y.prevProp=v,y.prevResolvedValues=M,y.isActive&&(f={...f,...M}),i&&t.blockInitialAnimation&&(b=!1),b&&(!(S&&E)||P)&&h.push(...T.map(Y=>({animation:Y,options:{type:g}})))}if(d.size){const _={};if(typeof c.initial!="boolean"){const g=Qa(t,Array.isArray(c.initial)?c.initial[0]:c.initial);g&&g.transition&&(_.transition=g.transition)}d.forEach(g=>{const y=t.getBaseTarget(g),v=t.getValue(g);v&&(v.liveStyle=!0),_[g]=y??null}),h.push({animation:_})}let m=!!h.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),i=!1,m?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(d=>{var f;return(f=d.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const d in n)n[d].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>n,reset:()=>{n=dx(),i=!0}}}function q$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!mP(e,t):!1}function ts(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dx(){return{animate:ts(!0),whileInView:ts(),whileHover:ts(),whileTap:ts(),whileDrag:ts(),whileFocus:ts(),exit:ts()}}class Qi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Q$ extends Qi{constructor(e){super(e),e.animationState||(e.animationState=Y$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Fh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let X$=0;class J$ extends Qi{constructor(){super(...arguments),this.id=X$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Z$={animation:{Feature:Q$},exit:{Feature:J$}};function Za(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Sl(t){return{point:{x:t.pageX,y:t.pageY}}}const e4=t=>e=>Ay(e)&&t(e,Sl(e));function _r(t,e,n,i){return Za(t,e,e4(n),i)}function yP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function t4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function n4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const _P=1e-4,i4=1-_P,s4=1+_P,vP=.01,r4=0-vP,o4=0+vP;function st(t){return t.max-t.min}function a4(t,e,n){return Math.abs(t-e)<=n}function fx(t,e,n,i=.5){t.origin=i,t.originPoint=ge(e.min,e.max,t.origin),t.scale=st(n)/st(e),t.translate=ge(n.min,n.max,t.origin)-t.originPoint,(t.scale>=i4&&t.scale<=s4||isNaN(t.scale))&&(t.scale=1),(t.translate>=r4&&t.translate<=o4||isNaN(t.translate))&&(t.translate=0)}function ca(t,e,n,i){fx(t.x,e.x,n.x,i?i.originX:void 0),fx(t.y,e.y,n.y,i?i.originY:void 0)}function px(t,e,n){t.min=n.min+e.min,t.max=t.min+st(e)}function l4(t,e,n){px(t.x,e.x,n.x),px(t.y,e.y,n.y)}function mx(t,e,n){t.min=e.min-n.min,t.max=t.min+st(e)}function ua(t,e,n){mx(t.x,e.x,n.x),mx(t.y,e.y,n.y)}const gx=()=>({translate:0,scale:1,origin:0,originPoint:0}),vr=()=>({x:gx(),y:gx()}),yx=()=>({min:0,max:0}),Ee=()=>({x:yx(),y:yx()});function Ot(t){return[t("x"),t("y")]}function Qd(t){return t===void 0||t===1}function Wp({scale:t,scaleX:e,scaleY:n}){return!Qd(t)||!Qd(e)||!Qd(n)}function cs(t){return Wp(t)||wP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wP(t){return _x(t.x)||_x(t.y)}function _x(t){return t&&t!=="0%"}function Gu(t,e,n){const i=t-n,s=e*i;return n+s}function vx(t,e,n,i,s){return s!==void 0&&(t=Gu(t,s,i)),Gu(t,n,i)+e}function Hp(t,e=0,n=1,i,s){t.min=vx(t.min,e,n,i,s),t.max=vx(t.max,e,n,i,s)}function xP(t,{x:e,y:n}){Hp(t.x,e.translate,e.scale,e.originPoint),Hp(t.y,n.translate,n.scale,n.originPoint)}const wx=.999999999999,xx=1.0000000000001;function c4(t,e,n,i=!1){const s=n.length;if(!s)return;e.x=e.y=1;let r,o;for(let a=0;a<s;a++){r=n[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&xr(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,xP(t,o)),i&&cs(r.latestValues)&&xr(t,r.latestValues))}e.x<xx&&e.x>wx&&(e.x=1),e.y<xx&&e.y>wx&&(e.y=1)}function wr(t,e){t.min=t.min+e,t.max=t.max+e}function bx(t,e,n,i,s=.5){const r=ge(t.min,t.max,s);Hp(t,e,n,r,i)}function xr(t,e){bx(t.x,e.x,e.scaleX,e.scale,e.originX),bx(t.y,e.y,e.scaleY,e.scale,e.originY)}function bP(t,e){return yP(n4(t.getBoundingClientRect(),e))}function u4(t,e,n){const i=bP(t,n),{scroll:s}=e;return s&&(wr(i.x,s.offset.x),wr(i.y,s.offset.y)),i}const Sx=(t,e)=>Math.abs(t-e);function h4(t,e){const n=Sx(t.x,e.x),i=Sx(t.y,e.y);return Math.sqrt(n**2+i**2)}class SP{constructor(e,n,{transformPagePoint:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Jd(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,d=h4(u.offset,{x:0,y:0})>=3;if(!h&&!d)return;const{point:f}=u,{timestamp:p}=ze;this.history.push({...f,timestamp:p});const{onStart:m,onMove:_}=this.handlers;h||(m&&m(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{if(this.index=Cx(u.currentTarget),u.target instanceof Element&&u.target.hasPointerCapture&&u.pointerId!==void 0)try{if(!u.target.hasPointerCapture(u.pointerId))return}catch{}this.lastMoveEvent=u,this.lastMoveEventInfo=Xd(h,this.transformPagePoint),oe.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{aa(u,"release"),this.end();const{onEnd:d,onSessionEnd:f,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Jd(u.type==="pointercancel"||u.type==="lostpointercapture"?this.lastMoveEventInfo:Xd(h,this.transformPagePoint),this.history);this.startEvent&&d&&d(u,m),f&&f(u,m)},!Ay(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i;const r=Sl(e),o=Xd(r,this.transformPagePoint),{point:a}=o,{timestamp:l}=ze;this.history=[{...a,timestamp:l}];const{onSessionStart:c}=n;c&&c(e,Jd(o,this.history)),aa(e,"set"),this.removeListeners=bl(_r(e.currentTarget,"pointermove",this.handlePointerMove),_r(e.currentTarget,"pointerup",this.handlePointerUp),_r(e.currentTarget,"pointercancel",this.handlePointerUp),_r(e.currentTarget,"lostpointercapture",(u,h)=>{Cx(u.currentTarget)!==this.index?aa(u,"set"):this.handlePointerUp(u,h)}))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zi(this.updatePoint)}}function Xd(t,e){return e?{point:e(t.point)}:t}function Ex(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jd({point:t},e){return{point:t,delta:Ex(t,EP(e)),offset:Ex(t,d4(e)),velocity:f4(e,.1)}}function d4(t){return t[0]}function EP(t){return t[t.length-1]}function f4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=EP(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>Un(e)));)n--;if(!i)return{x:0,y:0};const r=Wn(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Cx(t){return t.parentNode?Array.from(t.parentNode.children).indexOf(t):-1}function p4(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?ge(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?ge(n,t,i.max):Math.min(t,n)),t}function Tx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function m4(t,{top:e,left:n,bottom:i,right:s}){return{x:Tx(t.x,n,s),y:Tx(t.y,e,i)}}function kx(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function g4(t,e){return{x:kx(t.x,e.x),y:kx(t.y,e.y)}}function y4(t,e){let n=.5;const i=st(t),s=st(e);return s>i?n=Gr(e.min,e.max-i,t.min):i>s&&(n=Gr(t.min,t.max-s,e.min)),Xn(0,1,n)}function _4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const $p=.35;function v4(t=$p){return t===!1?t=0:t===!0&&(t=$p),{x:Px(t,"left","right"),y:Px(t,"top","bottom")}}function Px(t,e,n){return{min:Ix(t,e),max:Ix(t,n)}}function Ix(t,e){return typeof t=="number"?t:t[e]||0}const w4=new WeakMap;class x4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ee(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Sl(u).point)},r=(u,h)=>{const{drag:d,dragPropagation:f,onDragStart:p}=this.getProps();if(d&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=f3(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ot(_=>{let g=this.getAxisMotionValue(_).get()||0;if(xn.test(g)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[_];v&&(g=st(v)*(parseFloat(g)/100))}}this.originPoint[_]=g}),p&&oe.postRender(()=>p(u,h)),Np(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:p,onDrag:m}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:_}=h;if(f&&this.currentDirection===null){this.currentDirection=b4(_),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,_),this.updateAxis("y",h.point,_),this.visualElement.render(),m&&m(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Ot(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new SP(e,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&oe.postRender(()=>r(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:s}=this.getProps();if(!i||!cc(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=p4(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;n&&gr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=m4(s.layoutBox,n):this.constraints=!1,this.elastic=v4(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ot(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=_4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!gr(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=u4(i,s.root,this.visualElement.getTransformPagePoint());let o=g4(s.layout.layoutBox,r);if(n){const a=n(t4(o));this.hasMutatedConstraints=!!a,a&&(o=yP(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ot(u=>{if(!cc(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const d=s?200:1e6,f=s?40:1e7,p={type:"inertia",velocity:i?e[u]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Np(this.visualElement,e),i.start(Uy(e,i,0,n,this.visualElement,!1))}stopAnimation(){Ot(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ot(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ot(n=>{const{drag:i}=this.getProps();if(!cc(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];r.set(e[n]-ge(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!gr(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ot(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=y4({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ot(o=>{if(!cc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ge(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;w4.set(this.visualElement,this);const e=this.visualElement.current,n=_r(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();gr(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),oe.read(i);const o=Za(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ot(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=$p,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function cc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function b4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class S4 extends Qi{constructor(e){super(e),this.removeGroupControls=Pt,this.removeListeners=Pt,this.controls=new x4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ax=t=>(e,n)=>{t&&oe.postRender(()=>t(e,n))};class E4 extends Qi{constructor(){super(...arguments),this.removePointerDownListener=Pt}onPointerDown(e){this.session=new SP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:Ax(e),onStart:Ax(n),onMove:i,onEnd:(r,o)=>{delete this.session,s&&oe.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=_r(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ko={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(L.test(t))t=parseFloat(t);else return t;const n=Rx(t,e.target.x),i=Rx(t,e.target.y);return`${n}% ${i}%`}},C4={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,s=Ui.parse(t);if(s.length>5)return i;const r=Ui.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=ge(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),r(s)}};class T4 extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;A5(k4),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Nc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,s||e.layoutDependency!==n||n===void 0||e.isPresent!==r?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||oe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),gy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function CP(t){const[e,n]=l1(),i=k.useContext(ly);return C.jsx(T4,{...t,layoutGroup:i,switchLayoutGroup:k.useContext(g1),isPresent:e,safeToRemove:n})}const k4={borderRadius:{...ko,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ko,borderTopRightRadius:ko,borderBottomLeftRadius:ko,borderBottomRightRadius:ko,boxShadow:C4};function P4(t,e,n){const i=Xe(t)?t:Xa(t);return i.start(Uy("",i,e,n)),i.animation}function I4(t){return t instanceof SVGElement&&t.tagName!=="svg"}const A4=(t,e)=>t.depth-e.depth;class R4{constructor(){this.children=[],this.isDirty=!1}add(e){Ry(this.children,e),this.isDirty=!0}remove(e){My(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(A4),this.isDirty=!1,this.children.forEach(e)}}function M4(t,e){const n=bn.now(),i=({timestamp:s})=>{const r=s-n;r>=e&&(zi(i),t(r-e))};return oe.read(i,!0),()=>zi(i)}const TP=["TopLeft","TopRight","BottomLeft","BottomRight"],D4=TP.length,Mx=t=>typeof t=="string"?parseFloat(t):t,Dx=t=>typeof t=="number"||L.test(t);function O4(t,e,n,i,s,r){s?(t.opacity=ge(0,n.opacity!==void 0?n.opacity:1,N4(i)),t.opacityExit=ge(e.opacity!==void 0?e.opacity:1,0,L4(i))):r&&(t.opacity=ge(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<D4;o++){const a=`border${TP[o]}Radius`;let l=Ox(e,a),c=Ox(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Dx(l)===Dx(c)?(t[a]=Math.max(ge(Mx(l),Mx(c),i),0),(xn.test(c)||xn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ge(e.rotate||0,n.rotate||0,i))}function Ox(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const N4=kP(0,.5,$1),L4=kP(.5,.95,Pt);function kP(t,e,n){return i=>i<t?0:i>e?1:n(Gr(t,e,i))}function Nx(t,e){t.min=e.min,t.max=e.max}function Dt(t,e){Nx(t.x,e.x),Nx(t.y,e.y)}function Lx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Fx(t,e,n,i,s){return t-=e,t=Gu(t,1/n,i),s!==void 0&&(t=Gu(t,1/s,i)),t}function F4(t,e=0,n=1,i=.5,s,r=t,o=t){if(xn.test(e)&&(e=parseFloat(e),e=ge(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ge(r.min,r.max,i);t===r&&(a-=e),t.min=Fx(t.min,e,n,a,s),t.max=Fx(t.max,e,n,a,s)}function Vx(t,e,[n,i,s],r,o){F4(t,e[n],e[i],e[s],e.scale,r,o)}const V4=["x","scaleX","originX"],j4=["y","scaleY","originY"];function jx(t,e,n,i){Vx(t.x,e,V4,n?n.x:void 0,i?i.x:void 0),Vx(t.y,e,j4,n?n.y:void 0,i?i.y:void 0)}function Bx(t){return t.translate===0&&t.scale===1}function PP(t){return Bx(t.x)&&Bx(t.y)}function zx(t,e){return t.min===e.min&&t.max===e.max}function B4(t,e){return zx(t.x,e.x)&&zx(t.y,e.y)}function Ux(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function IP(t,e){return Ux(t.x,e.x)&&Ux(t.y,e.y)}function Wx(t){return st(t.x)/st(t.y)}function Hx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class z4{constructor(){this.members=[]}add(e){Ry(this.members,e),e.scheduleRender()}remove(e){if(My(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function U4(t,e,n){let i="";const s=t.x.translate/e.x,r=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:d,skewX:f,skewY:p}=n;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),d&&(i+=`rotateY(${d}deg) `),f&&(i+=`skewX(${f}deg) `),p&&(i+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Zd=["","X","Y","Z"],W4={visibility:"hidden"},$x=1e3;let H4=0;function ef(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function AP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=V1(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",oe,!(s||r))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&AP(i)}function RP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=H4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(G4),this.nodes.forEach(J4),this.nodes.forEach(Z4),this.nodes.forEach(Y4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new R4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Dy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=I4(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=M4(d,250),Nc.hasAnimatedSinceResize&&(Nc.hasAnimatedSinceResize=!1,this.nodes.forEach(Gx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||s6,{onLayoutAnimationStart:_,onLayoutAnimationComplete:g}=u.getProps(),y=!this.targetLayout||!IP(this.targetLayout,p),v=!d&&f;if(this.options.layoutRoot||this.resumeFrom||v||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const x={...ky(m,"layout"),onPlay:_,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||Gx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(e6),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&AP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kx);return}this.isUpdating||this.nodes.forEach(Q4),this.isUpdating=!1,this.nodes.forEach(X4),this.nodes.forEach($4),this.nodes.forEach(K4),this.clearAllSnapshots();const a=bn.now();ze.delta=Xn(0,1e3/60,a-ze.timestamp),ze.timestamp=a,ze.isProcessing=!0,Hd.update.process(ze),Hd.preRender.process(ze),Hd.render.process(ze),ze.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(q4),this.sharedNodes.forEach(t6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,oe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){oe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!st(this.snapshot.measuredBox.x)&&!st(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ee(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!PP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||cs(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),r6(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ee();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(o6))){const{scroll:u}=this.root;u&&(wr(l.x,u.offset.x),wr(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Ee();if(Dt(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;u!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&Dt(l,o),wr(l.x,h.offset.x),wr(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Ee();Dt(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&xr(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),cs(u.latestValues)&&xr(l,u.latestValues)}return cs(this.latestValues)&&xr(l,this.latestValues),l}removeTransform(o){const a=Ee();Dt(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!cs(c.latestValues))continue;Wp(c.latestValues)&&c.updateSnapshot();const u=Ee(),h=c.measurePageBox();Dt(u,h),jx(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return cs(this.latestValues)&&jx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ze.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=ze.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ee(),this.relativeTargetOrigin=Ee(),ua(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Dt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ee(),this.targetWithTransforms=Ee()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),l4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dt(this.target,this.layout.layoutBox),xP(this.target,this.targetDelta)):Dt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ee(),this.relativeTargetOrigin=Ee(),ua(this.relativeTargetOrigin,this.target,f.target),Dt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Wp(this.parent.latestValues)||wP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ze.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Dt(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;c4(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ee());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Lx(this.prevProjectionDelta.x,this.projectionDelta.x),Lx(this.prevProjectionDelta.y,this.projectionDelta.y)),ca(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!Hx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vr(),this.projectionDelta=vr(),this.projectionDeltaWithTransform=vr()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=vr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Ee(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,_=this.getStack(),g=!_||_.members.length<=1,y=!!(m&&!g&&this.options.crossfade===!0&&!this.path.some(i6));this.animationProgress=0;let v;this.mixTargetDelta=x=>{const w=x/1e3;Yx(h.x,o.x,w),Yx(h.y,o.y,w),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ua(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n6(this.relativeTarget,this.relativeTargetOrigin,d,w),v&&B4(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Ee()),Dt(v,this.relativeTarget)),m&&(this.animationValues=u,O4(u,c,this.latestValues,w,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=oe.update(()=>{Nc.hasAnimatedSinceResize=!0,this.currentAnimation=P4(0,$x,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($x),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&MP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ee();const h=st(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=st(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Dt(a,l),xr(a,u),ca(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new z4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&ef("z",o,c,this.animationValues);for(let u=0;u<Zd.length;u++)ef(`rotate${Zd[u]}`,o,c,this.animationValues),ef(`skew${Zd[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return W4;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Dc(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Dc(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!cs(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=U4(this.projectionDeltaWithTransform,this.treeScale,d),u&&(c.transform=u(d,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Ya){if(d[m]===void 0)continue;const{correct:_,applyTo:g,isCSSVariable:y}=Ya[m],v=c.transform==="none"?d[m]:_(d[m],h);if(g){const x=g.length;for(let w=0;w<x;w++)c[g[w]]=v}else y?this.options.visualElement.renderState.vars[m]=v:c[m]=v}return this.options.layoutId&&(c.pointerEvents=h===this?Dc(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Kx),this.root.sharedNodes.clear()}}}function $4(t){t.updateLayout()}function K4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=t.layout,{animationType:r}=t.options,o=n.source!==t.layout.source;r==="size"?Ot(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=st(d);d.min=i[h].min,d.max=d.min+f}):MP(r,n.layoutBox,i)&&Ot(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=st(i[h]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const a=vr();ca(a,i,n.layoutBox);const l=vr();o?ca(l,t.applyTransform(s,!0),n.measuredBox):ca(l,i,n.layoutBox);const c=!PP(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const p=Ee();ua(p,n.layoutBox,d.layoutBox);const m=Ee();ua(m,i,f.layoutBox),IP(p,m)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function G4(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Y4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function q4(t){t.clearSnapshot()}function Kx(t){t.clearMeasurements()}function Q4(t){t.isLayoutDirty=!1}function X4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Gx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function J4(t){t.resolveTargetDelta()}function Z4(t){t.calcProjection()}function e6(t){t.resetSkewAndRotation()}function t6(t){t.removeLeadSnapshot()}function Yx(t,e,n){t.translate=ge(e.translate,0,n),t.scale=ge(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qx(t,e,n,i){t.min=ge(e.min,n.min,i),t.max=ge(e.max,n.max,i)}function n6(t,e,n,i){qx(t.x,e.x,n.x,i),qx(t.y,e.y,n.y,i)}function i6(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const s6={duration:.45,ease:[.4,0,.1,1]},Qx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Xx=Qx("applewebkit/")&&!Qx("chrome/")?Math.round:Pt;function Jx(t){t.min=Xx(t.min),t.max=Xx(t.max)}function r6(t){Jx(t.x),Jx(t.y)}function MP(t,e,n){return t==="position"||t==="preserve-aspect"&&!a4(Wx(e),Wx(n),.2)}function o6(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const a6=RP({attachResizeListener:(t,e)=>Za(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tf={current:void 0},DP=RP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tf.current){const t=new a6({});t.mount(window),t.setOptions({layoutScroll:!0}),tf.current=t}return tf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),l6={pan:{Feature:E4},drag:{Feature:S4,ProjectionNode:DP,MeasureLayout:CP}};function Zx(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,r=i[s];r&&oe.postRender(()=>r(e,Sl(e)))}class c6 extends Qi{mount(){const{current:e}=this.node;e&&(this.unmount=a3(e,(n,i)=>(Zx(this.node,i,"Start"),s=>Zx(this.node,s,"End"))))}unmount(){}}class u6 extends Qi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bl(Za(this.node.current,"focus",()=>this.onFocus()),Za(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eb(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),r=i[s];r&&oe.postRender(()=>r(e,Sl(e)))}class h6 extends Qi{mount(){const{current:e}=this.node;e&&(this.unmount=h3(e,(n,i)=>(eb(this.node,i,"Start"),(s,{success:r})=>eb(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kp=new WeakMap,nf=new WeakMap,d6=t=>{const e=Kp.get(t.target);e&&e(t)},f6=t=>{t.forEach(d6)};function p6({root:t,...e}){const n=t||document;nf.has(n)||nf.set(n,{});const i=nf.get(n),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(f6,{root:t,...e})),i[s]}function m6(t,e,n){const i=p6(e);return Kp.set(t,n),i.observe(t),()=>{Kp.delete(t),i.unobserve(t)}}const g6={some:0,all:1};class y6 extends Qi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:g6[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=c?u:h;d&&d(l)};return m6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_6(e,n))&&this.startObserver()}unmount(){}}function _6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const v6={inView:{Feature:y6},tap:{Feature:h6},focus:{Feature:u6},hover:{Feature:c6}},w6={layout:{ProjectionNode:DP,MeasureLayout:CP}},Gp={current:null},OP={current:!1};function x6(){if(OP.current=!0,!!hy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gp.current=t.matches;t.addListener(e),e()}else Gp.current=!1}const b6=[...rP,Ye,Ui],S6=t=>b6.find(sP(t)),E6=new WeakMap;function C6(t,e,n){for(const i in e){const s=e[i],r=n[i];if(Xe(s))t.addValue(i,s);else if(Xe(r))t.addValue(i,Xa(s,{owner:t}));else if(r!==s)if(t.hasValue(i)){const o=t.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(i);t.addValue(i,Xa(o!==void 0?o:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const tb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class T6{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=bn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,oe.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Vh(n),this.isVariantNode=p1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&Xe(p)&&p.set(l[f],!1)}}mount(e){this.current=e,E6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),OP.current||x6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zi(this.notifyUpdate),zi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Qs.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&oe.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),r(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Yr){const n=Yr[e];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ee()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<tb.length;i++){const s=tb[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=e[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=C6(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Xa(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(nP(s)||G1(s))?s=parseFloat(s):!S6(s)&&Ui.test(n)&&(s=Z1(e,n)),this.setBaseTarget(e,Xe(s)?s.get():s)),Xe(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const o=Cy(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Xe(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Dy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class NP extends T6{constructor(){super(...arguments),this.KeyframeResolver=oP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xe(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function k6(t){return window.getComputedStyle(t)}class P6 extends NP{constructor(){super(...arguments),this.type="html",this.renderInstance=C1}readValueFromInstance(e,n){if(Qs.has(n)){const i=Vy(n);return i&&i.default||0}else{const i=k6(e),s=(yy(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return bP(e,n)}build(e,n,i){wy(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Ty(e,n,i)}}class I6 extends NP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ee,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&E1(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qs.has(n)){const i=Vy(n);return i&&i.default||0}return n=T1.has(n)?n:my(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return P1(e,n,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&oe.postRender(this.updateDimensions)}build(e,n,i){Sy(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,s){k1(e,n,i,s)}mount(e){this.isSVGTag=Ey(e.tagName),super.mount(e)}}const A6=(t,e)=>by(t)?new I6(e):new P6(e,{allowProjection:t!==k.Fragment}),R6=e3({...Z$,...v6,...l6,...w6},A6),nb=g5(R6);function M6({isOpen:t,onClose:e,children:n}){const i=k.useRef(null);return k.useEffect(()=>{const s=r=>{i.current&&!i.current.contains(r.target)&&e()};return t&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[t,e]),C.jsx(l5,{children:t&&C.jsx(nb.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:C.jsxs(nb.div,{ref:i,className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md relative",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:[C.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Close",children:"×"}),n]})})})}var Yp={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */(function(t,e){(function(n,i,s){var r=function(a,l,c){c=o.extend({},o.options,c);var u=o.runValidations(a,l,c);if(u.some(function(h){return o.isPromise(h.error)}))throw new Error("Use validate.async if you want support for promises");return r.processValidationResults(u,c)},o=r;o.extend=function(a){return[].slice.call(arguments,1).forEach(function(l){for(var c in l)a[c]=l[c]}),a},o.extend(r,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var a=o.format("%{major}.%{minor}.%{patch}",o.version);return o.isEmpty(o.version.metadata)||(a+="+"+o.version.metadata),a}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(a,l,c){var u=[],h,d,f,p,m,_,g;(o.isDomElement(a)||o.isJqueryElement(a))&&(a=o.collectFormValues(a));for(h in l){f=o.getDeepObjectValue(a,h),p=o.result(l[h],f,a,h,c,l);for(d in p){if(m=o.validators[d],!m)throw g=o.format("Unknown validator %{name}",{name:d}),new Error(g);_=p[d],_=o.result(_,f,a,h,c,l),_&&u.push({attribute:h,value:f,validator:d,globalOptions:c,attributes:a,options:_,error:m.call(m,f,_,h,a,c)})}}return u},processValidationResults:function(a,l){a=o.pruneEmptyErrors(a,l),a=o.expandMultipleErrors(a,l),a=o.convertErrorMessages(a,l);var c=l.format||"grouped";if(typeof o.formatters[c]=="function")a=o.formatters[c](a);else throw new Error(o.format("Unknown format %{format}",l));return o.isEmpty(a)?void 0:a},async:function(a,l,c){c=o.extend({},o.async.options,c);var u=c.wrapErrors||function(d){return d};c.cleanAttributes!==!1&&(a=o.cleanAttributes(a,l));var h=o.runValidations(a,l,c);return new o.Promise(function(d,f){o.waitForResults(h).then(function(){var p=o.processValidationResults(h,c);p?f(new u(p,c,a,l)):d(a)},function(p){f(p)})})},single:function(a,l,c){return c=o.extend({},o.single.options,c,{format:"flat",fullMessages:!1}),o({single:a},{single:l},c)},waitForResults:function(a){return a.reduce(function(l,c){return o.isPromise(c.error)?l.then(function(){return c.error.then(function(u){c.error=u||null})}):l},new o.Promise(function(l){l()}))},result:function(a){var l=[].slice.call(arguments,1);return typeof a=="function"&&(a=a.apply(null,l)),a},isNumber:function(a){return typeof a=="number"&&!isNaN(a)},isFunction:function(a){return typeof a=="function"},isInteger:function(a){return o.isNumber(a)&&a%1===0},isBoolean:function(a){return typeof a=="boolean"},isObject:function(a){return a===Object(a)},isDate:function(a){return a instanceof Date},isDefined:function(a){return a!=null},isPromise:function(a){return!!a&&o.isFunction(a.then)},isJqueryElement:function(a){return a&&o.isString(a.jquery)},isDomElement:function(a){return!a||!a.querySelectorAll||!a.querySelector?!1:o.isObject(document)&&a===document?!0:typeof HTMLElement=="object"?a instanceof HTMLElement:a&&typeof a=="object"&&a!==null&&a.nodeType===1&&typeof a.nodeName=="string"},isEmpty:function(a){var l;if(!o.isDefined(a))return!0;if(o.isFunction(a))return!1;if(o.isString(a))return o.EMPTY_STRING_REGEXP.test(a);if(o.isArray(a))return a.length===0;if(o.isDate(a))return!1;if(o.isObject(a)){for(l in a)return!1;return!0}return!1},format:o.extend(function(a,l){return o.isString(a)?a.replace(o.format.FORMAT_REGEXP,function(c,u,h){return u==="%"?"%{"+h+"}":String(l[h])}):a},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(a){return o.isNumber(a)?a*100%1===0?""+a:parseFloat(Math.round(a*100)/100).toFixed(2):o.isArray(a)?a.map(function(l){return o.prettify(l)}).join(", "):o.isObject(a)?o.isDefined(a.toString)?a.toString():JSON.stringify(a):(a=""+a,a.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(l,c,u){return""+c+" "+u.toLowerCase()}).toLowerCase())},stringifyValue:function(a,l){var c=l&&l.prettify||o.prettify;return c(a)},isString:function(a){return typeof a=="string"},isArray:function(a){return{}.toString.call(a)==="[object Array]"},isHash:function(a){return o.isObject(a)&&!o.isArray(a)&&!o.isFunction(a)},contains:function(a,l){return o.isDefined(a)?o.isArray(a)?a.indexOf(l)!==-1:l in a:!1},unique:function(a){return o.isArray(a)?a.filter(function(l,c,u){return u.indexOf(l)==c}):a},forEachKeyInKeypath:function(a,l,c){if(o.isString(l)){var u="",h,d=!1;for(h=0;h<l.length;++h)switch(l[h]){case".":d?(d=!1,u+="."):(a=c(a,u,!1),u="");break;case"\\":d?(d=!1,u+="\\"):d=!0;break;default:d=!1,u+=l[h];break}return c(a,u,!0)}},getDeepObjectValue:function(a,l){if(o.isObject(a))return o.forEachKeyInKeypath(a,l,function(c,u){if(o.isObject(c))return c[u]})},collectFormValues:function(a,l){var c={},u,h,d,f,p,m;if(o.isJqueryElement(a)&&(a=a[0]),!a)return c;for(l=l||{},f=a.querySelectorAll("input[name], textarea[name]"),u=0;u<f.length;++u)if(d=f.item(u),!o.isDefined(d.getAttribute("data-ignored"))){var _=d.name.replace(/\./g,"\\\\.");m=o.sanitizeFormValue(d.value,l),d.type==="number"?m=m?+m:null:d.type==="checkbox"?d.attributes.value?d.checked||(m=c[_]||null):m=d.checked:d.type==="radio"&&(d.checked||(m=c[_]||null)),c[_]=m}for(f=a.querySelectorAll("select[name]"),u=0;u<f.length;++u)if(d=f.item(u),!o.isDefined(d.getAttribute("data-ignored"))){if(d.multiple){m=[];for(h in d.options)p=d.options[h],p&&p.selected&&m.push(o.sanitizeFormValue(p.value,l))}else{var g=typeof d.options[d.selectedIndex]<"u"?d.options[d.selectedIndex].value:"";m=o.sanitizeFormValue(g,l)}c[d.name]=m}return c},sanitizeFormValue:function(a,l){return l.trim&&o.isString(a)&&(a=a.trim()),l.nullify!==!1&&a===""?null:a},capitalize:function(a){return o.isString(a)?a[0].toUpperCase()+a.slice(1):a},pruneEmptyErrors:function(a){return a.filter(function(l){return!o.isEmpty(l.error)})},expandMultipleErrors:function(a){var l=[];return a.forEach(function(c){o.isArray(c.error)?c.error.forEach(function(u){l.push(o.extend({},c,{error:u}))}):l.push(c)}),l},convertErrorMessages:function(a,l){l=l||{};var c=[],u=l.prettify||o.prettify;return a.forEach(function(h){var d=o.result(h.error,h.value,h.attribute,h.options,h.attributes,h.globalOptions);if(!o.isString(d)){c.push(h);return}d[0]==="^"?d=d.slice(1):l.fullMessages!==!1&&(d=o.capitalize(u(h.attribute))+" "+d),d=d.replace(/\\\^/g,"^"),d=o.format(d,{value:o.stringifyValue(h.value,l)}),c.push(o.extend({},h,{error:d}))}),c},groupErrorsByAttribute:function(a){var l={};return a.forEach(function(c){var u=l[c.attribute];u?u.push(c):l[c.attribute]=[c]}),l},flattenErrorsToArray:function(a){return a.map(function(l){return l.error}).filter(function(l,c,u){return u.indexOf(l)===c})},cleanAttributes:function(a,l){function c(d,f,p){return o.isObject(d[f])?d[f]:d[f]=p?!0:{}}function u(d){var f={},p;for(p in d)d[p]&&o.forEachKeyInKeypath(f,p,c);return f}function h(d,f){if(!o.isObject(d))return d;var p=o.extend({},d),m,_;for(_ in d)m=f[_],o.isObject(m)?p[_]=h(p[_],m):m||delete p[_];return p}return!o.isObject(l)||!o.isObject(a)?{}:(l=u(l),h(a,l))},exposeModule:function(a,l,c,u,h){c?(u&&u.exports&&(c=u.exports=a),c.validate=a):(l.validate=a,a.isFunction(h)&&h.amd&&h([],function(){return a}))},warn:function(a){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+a)},error:function(a){typeof console<"u"&&console.error&&console.error("[validate.js] "+a)}}),r.validators={presence:function(a,l){if(l=o.extend({},this.options,l),l.allowEmpty!==!1?!o.isDefined(a):o.isEmpty(a))return l.message||this.message||"can't be blank"},length:function(a,l,c){if(o.isDefined(a)){l=o.extend({},this.options,l);var u=l.is,h=l.maximum,d=l.minimum,f=l.tokenizer||function(g){return g},p,m=[];a=f(a);var _=a.length;if(!o.isNumber(_))return l.message||this.notValid||"has an incorrect length";if(o.isNumber(u)&&_!==u&&(p=l.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",m.push(o.format(p,{count:u}))),o.isNumber(d)&&_<d&&(p=l.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",m.push(o.format(p,{count:d}))),o.isNumber(h)&&_>h&&(p=l.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",m.push(o.format(p,{count:h}))),m.length>0)return l.message||m}},numericality:function(a,l,c,u,h){if(o.isDefined(a)){l=o.extend({},this.options,l);var d=[],f,p,m={greaterThan:function(x,w){return x>w},greaterThanOrEqualTo:function(x,w){return x>=w},equalTo:function(x,w){return x===w},lessThan:function(x,w){return x<w},lessThanOrEqualTo:function(x,w){return x<=w},divisibleBy:function(x,w){return x%w===0}},_=l.prettify||h&&h.prettify||o.prettify;if(o.isString(a)&&l.strict){var g="^-?(0|[1-9]\\d*)";if(l.onlyInteger||(g+="(\\.\\d+)?"),g+="$",!new RegExp(g).test(a))return l.message||l.notValid||this.notValid||this.message||"must be a valid number"}if(l.noStrings!==!0&&o.isString(a)&&!o.isEmpty(a)&&(a=+a),!o.isNumber(a))return l.message||l.notValid||this.notValid||this.message||"is not a number";if(l.onlyInteger&&!o.isInteger(a))return l.message||l.notInteger||this.notInteger||this.message||"must be an integer";for(f in m)if(p=l[f],o.isNumber(p)&&!m[f](a,p)){var y="not"+o.capitalize(f),v=l[y]||this[y]||this.message||"must be %{type} %{count}";d.push(o.format(v,{count:p,type:_(f)}))}if(l.odd&&a%2!==1&&d.push(l.notOdd||this.notOdd||this.message||"must be odd"),l.even&&a%2!==0&&d.push(l.notEven||this.notEven||this.message||"must be even"),d.length)return l.message||d}},datetime:o.extend(function(a,l){if(!o.isFunction(this.parse)||!o.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(o.isDefined(a)){l=o.extend({},this.options,l);var c,u=[],h=l.earliest?this.parse(l.earliest,l):NaN,d=l.latest?this.parse(l.latest,l):NaN;if(a=this.parse(a,l),isNaN(a)||l.dateOnly&&a%864e5!==0)return c=l.notValid||l.message||this.notValid||"must be a valid date",o.format(c,{value:arguments[0]});if(!isNaN(h)&&a<h&&(c=l.tooEarly||l.message||this.tooEarly||"must be no earlier than %{date}",c=o.format(c,{value:this.format(a,l),date:this.format(h,l)}),u.push(c)),!isNaN(d)&&a>d&&(c=l.tooLate||l.message||this.tooLate||"must be no later than %{date}",c=o.format(c,{date:this.format(d,l),value:this.format(a,l)}),u.push(c)),u.length)return o.unique(u)}},{parse:null,format:null}),date:function(a,l){return l=o.extend({},l,{dateOnly:!0}),o.validators.datetime.call(o.validators.datetime,a,l)},format:function(a,l){(o.isString(l)||l instanceof RegExp)&&(l={pattern:l}),l=o.extend({},this.options,l);var c=l.message||this.message||"is invalid",u=l.pattern,h;if(o.isDefined(a)&&(!o.isString(a)||(o.isString(u)&&(u=new RegExp(l.pattern,l.flags)),h=u.exec(a),!h||h[0].length!=a.length)))return c},inclusion:function(a,l){if(o.isDefined(a)&&(o.isArray(l)&&(l={within:l}),l=o.extend({},this.options,l),!o.contains(l.within,a))){var c=l.message||this.message||"^%{value} is not included in the list";return o.format(c,{value:a})}},exclusion:function(a,l){if(o.isDefined(a)&&(o.isArray(l)&&(l={within:l}),l=o.extend({},this.options,l),!!o.contains(l.within,a))){var c=l.message||this.message||"^%{value} is restricted";return o.isString(l.within[a])&&(a=l.within[a]),o.format(c,{value:a})}},email:o.extend(function(a,l){l=o.extend({},this.options,l);var c=l.message||this.message||"is not a valid email";if(o.isDefined(a)&&(!o.isString(a)||!this.PATTERN.exec(a)))return c},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(a,l,c,u,h){if(o.isDefined(a)){o.isString(l)&&(l={attribute:l}),l=o.extend({},this.options,l);var d=l.message||this.message||"is not equal to %{attribute}";if(o.isEmpty(l.attribute)||!o.isString(l.attribute))throw new Error("The attribute must be a non empty string");var f=o.getDeepObjectValue(u,l.attribute),p=l.comparator||function(_,g){return _===g},m=l.prettify||h&&h.prettify||o.prettify;if(!p(a,f,l,c,u))return o.format(d,{attribute:m(l.attribute)})}},url:function(a,l){if(o.isDefined(a)){l=o.extend({},this.options,l);var c=l.message||this.message||"is not a valid url",u=l.schemes||this.schemes||["http","https"],h=l.allowLocal||this.allowLocal||!1,d=l.allowDataUrl||this.allowDataUrl||!1;if(!o.isString(a))return c;var f="^(?:(?:"+u.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",p="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(h?p+="?":f+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",f+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+p+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",d){var m="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",_="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",g="data:(?:"+m+")?(?:;base64)?,"+_;f="(?:"+f+")|(?:^"+g+"$)"}var y=new RegExp(f,"i");if(!y.exec(a))return c}},type:o.extend(function(a,l,c,u,h){if(o.isString(l)&&(l={type:l}),!!o.isDefined(a)){var d=o.extend({},this.options,l),f=d.type;if(!o.isDefined(f))throw new Error("No type was specified");var p;if(o.isFunction(f)?p=f:p=this.types[f],!o.isFunction(p))throw new Error("validate.validators.type.types."+f+" must be a function.");if(!p(a,d,c,u,h)){var m=l.message||this.messages[f]||this.message||d.message||(o.isFunction(f)?"must be of the correct type":"must be of type %{type}");return o.isFunction(m)&&(m=m(a,l,c,u,h)),o.format(m,{attribute:o.prettify(c),type:f})}}},{types:{object:function(a){return o.isObject(a)&&!o.isArray(a)},array:o.isArray,integer:o.isInteger,number:o.isNumber,string:o.isString,date:o.isDate,boolean:o.isBoolean},messages:{}})},r.formatters={detailed:function(a){return a},flat:o.flattenErrorsToArray,grouped:function(a){var l;a=o.groupErrorsByAttribute(a);for(l in a)a[l]=o.flattenErrorsToArray(a[l]);return a},constraint:function(a){var l;a=o.groupErrorsByAttribute(a);for(l in a)a[l]=a[l].map(function(c){return c.validator}).sort();return a}},r.exposeModule(r,this,n,i,s)}).call(HP,e,t,null)})(Yp,Yp.exports);var D6=Yp.exports;const O6=ub(D6),N6={"auth/invalid-email":"Invalid email address.","auth/user-disabled":"This user account has been disabled.","auth/user-not-found":"User not found.","auth/wrong-password":"Incorrect password.","auth/email-already-in-use":"Email address is already in use.","auth/weak-password":"Password should be at least 6 characters.","auth/operation-not-allowed":"Email/password accounts are not enabled.","auth/missing-email":"Email is required","auth/invalid-credential":"Incorrect email or password."};function L6(t){return console.log(t),N6[t]||"An unexpected error occurred."}const F6={email:{presence:{allowEmpty:!1,message:"is required"},email:{message:"is not valid"}},password:{presence:{allowEmpty:!1,message:"is required"},length:{minimum:6,message:"must be at least 6 characters"}}};function V6({onClose:t}){const[e,n]=k.useState({email:"",password:""}),[i,s]=k.useState(!1),[r,o]=k.useState(null),[a,l]=k.useState(null),c=h=>{n({...e,[h.target.name]:h.target.value})},u=async h=>{h.preventDefault(),l(null);const d=O6(e,F6);if(o(d||null),!d)try{i?await G2(Mu,e.email,e.password):await Y2(Mu,e.email,e.password),t()}catch(f){l(L6(f.code))}};return C.jsxs("div",{children:[C.jsx("h2",{className:"text-2xl font-bold mb-4",children:i?"Sign Up":"Sign In"}),a&&C.jsx("p",{className:"text-red-500 mb-4",children:a}),C.jsxs("form",{onSubmit:u,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),C.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${r!=null&&r.email?"border-red-500":"border-gray-300"}`}),(r==null?void 0:r.email)&&C.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email[0]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),C.jsx("input",{type:"password",id:"password",name:"password",value:e.password,onChange:c,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${r!=null&&r.password?"border-red-500":"border-gray-300"}`}),(r==null?void 0:r.password)&&C.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.password[0]})]}),C.jsx("button",{type:"submit",className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:i?"Sign Up":"Sign In"})]}),C.jsx("div",{className:"mt-4 text-center",children:i?C.jsxs("p",{children:["Already have an account?"," ",C.jsx("button",{onClick:()=>s(!1),className:"text-indigo-600 hover:text-indigo-800 focus:outline-none",children:"Sign In"})]}):C.jsxs("p",{children:["Don't have an account?"," ",C.jsx("button",{onClick:()=>s(!0),className:"text-indigo-600 hover:text-indigo-800 focus:outline-none",children:"Sign Up"})]})})]})}function j6(){var E;const{currentUser:t}=n5(),[e,n]=k.useState(!1),[i,s]=k.useState({word:"Apple",phonetic:"/ˈæpəl/",EnglishDefinition:["","A common, round fruit produced by the tree Malus domestica, cultivated in temperate climates."],exampleSentences:["","I like apples.","Apples are good for health."]}),[r,o]=k.useState({}),a=(b,P)=>{o(T=>{const M=(T[b]||0)+P;return{...T,[b]:M}})},[l,c]=k.useState(new Set),u=b=>{c(P=>new Set([...P,b]))},[h,d]=k.useState({}),f=b=>{d(P=>{const T=(P[b]||0)+1;return{...P,[b]:T}})};let p=!1;k.useEffect(()=>{(async()=>{if(t)try{if(p)return;p=!0,console.log("login currentUser",t);const P=wp(new Date,"yyyy-MM-dd"),T=await EB(t.uid,P);if(T){c(()=>new Set(Object.keys(T.words)));const M=Object.keys(T.words).length,B=r[P]||0;M>B&&a(P,M-B)}b0(t.uid,15).then(M=>{M&&d(()=>M)})}catch(P){console.error("Error fetching data:",P)}else console.log("login currentUser",t)})()},[t]),k.useEffect(()=>{},[l]);const m=async b=>{if(vB(b)){wB(b);return}const P=await bB(b);P?(s(P),f(b),l.has(b)||(a(wp(new Date,"yyyy-MM-dd"),1),u(b)),console.log("Word found",l,h,r),t&&t.uid&&(SB(t.uid,b),b0(t.uid,15).then(T=>{T&&d(()=>T)}))):(console.log("Word not found"),w("Sorry, the word was not found."))},_=b=>{b.preventDefault()},[g,y]=k.useState(!1),v=()=>{console.log("currentUser",t,t==null?void 0:t.email)},x=()=>{y(!1)};function w(b){const P=document.getElementById("toast-container"),T=document.getElementById("toast-message");if(!P||!T){console.error("Toast container or message element not found!");return}T.classList.remove("fade-out"),T.style.opacity="1",T.classList.add("bg-blue-400"),T.textContent=b,P.style.display="block",T.offsetHeight,T.classList.add("fade-out"),setTimeout(()=>{T.classList.remove("fade-out"),T.classList.remove("bg-blue-400"),P.style.display="none"},3e3)}const S=async()=>{try{await J2(Mu),w("Signed out successfully.")}catch(b){console.error("Error signing out:",b)}};return C.jsxs("div",{className:"min-h-screen bg-primary py-6 flex flex-col items-center justify-start",children:[C.jsx("header",{className:"bg-blue-500 text-white p-4 rounded-md shadow-md mb-8 w-[90%] mobile:w-[90%] md:w-[80%] max-w-4xl",children:C.jsx("nav",{className:"bg-blue-500 text-white p-4 w-full",children:C.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx(wR,{className:"h-6 w-6 mr-2"}),C.jsx("span",{className:"text-xl font-bold",children:"English Dictionary"})]}),C.jsxs("ul",{className:"flex space-x-6",children:[C.jsxs("li",{children:[(E=t==null?void 0:t.email)==null?void 0:E.split("@")[0]," "]}),C.jsx("li",{children:C.jsx("a",{href:"#statistics",className:"hover:text-gray-300",children:"Statistics"})}),C.jsx("li",{children:C.jsx("button",{onClick:v,className:"hover:text-gray-300",type:"button",children:"About"})}),C.jsx("li",{children:t?C.jsx("button",{onClick:S,className:"hover:text-gray-300",children:"Logout"}):C.jsx("button",{onClick:()=>n(!0),className:"hover:text-gray-300",children:"Login / Sign Up"})})]})]})})}),C.jsx(M6,{isOpen:e,onClose:()=>n(!1),children:C.jsx(V6,{onClose:()=>n(!1)})}),C.jsx("div",{id:"toast-container",children:C.jsx("div",{id:"toast-message"})}),C.jsx("form",{onSubmit:_,className:"flex-grow flex items-center justify-center w-[90%] mobile:w-[90%] md:w-[80%] flex-1",children:C.jsx("div",{className:"max-w-4/5 w-full py-12",children:C.jsx(CR,{onSearch:m})})}),C.jsxs("div",{className:"w-[90%] mobile:w-[90%] md:w-[80%] max-w-4/5 flex flex-col mb-8 mt-4 overflow-auto",children:[C.jsx(CB,{word:i.word,phonetic:i.phonetic,EnglishDefinitions:i.EnglishDefinition.length>0?i.EnglishDefinition:[""],exampleSentences:i.exampleSentences.length>0?i.exampleSentences:[""],onSearch:m}),C.jsx("div",{id:"statistics",children:C.jsx(t5,{todayWords:l,wordSearchCounts:h,dailyWordCounts:r,onSearch:m})})]}),g&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:C.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[90%] mobile:w-[90%] md:w-[80%] max-w-md",children:[C.jsx("h2",{className:"text-lg font-semibold text-blue-500 mb-4",children:"About"}),C.jsx("p",{children:"This is a fun English dictionary app for personal use."}),C.jsxs("p",{children:["More details email ",C.jsx("a",{href:"mailto:zzhmail01@gmail.com",className:"text-blue-500 hover:underline",children:"zzhmail01@gmail.com"})," "]}),C.jsx("button",{onClick:x,type:"button",className:"px-4 py-2 mt-8 bg-blue-500 text-white rounded-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 mx-auto block",children:"Close"})]})})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yu.apply(this,arguments)}var _s;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_s||(_s={}));const ib="popstate";function B6(t){t===void 0&&(t={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return qp("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:FP(s)}return U6(e,n,null,t)}function LP(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function z6(){return Math.random().toString(36).substr(2,8)}function sb(t,e){return{usr:t.state,key:t.key,idx:e}}function qp(t,e,n,i){return n===void 0&&(n=null),Yu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?VP(e):e,{state:n,key:e&&e.key||i||z6()})}function FP(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function VP(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function U6(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=_s.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Yu({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=_s.Pop;let _=u(),g=_==null?null:_-c;c=_,l&&l({action:a,location:m.location,delta:g})}function d(_,g){a=_s.Push;let y=qp(m.location,_,g);n&&n(y,_),c=u()+1;let v=sb(y,c),x=m.createHref(y);try{o.pushState(v,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(x)}r&&l&&l({action:a,location:m.location,delta:1})}function f(_,g){a=_s.Replace;let y=qp(m.location,_,g);n&&n(y,_),c=u();let v=sb(y,c),x=m.createHref(y);o.replaceState(v,"",x),r&&l&&l({action:a,location:m.location,delta:0})}function p(_){let g=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof _=="string"?_:FP(_);return y=y.replace(/ $/,"%20"),LP(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let m={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ib,h),l=_,()=>{s.removeEventListener(ib,h),l=null}},createHref(_){return e(s,_)},createURL:p,encodeLocation(_){let g=p(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:f,go(_){return o.go(_)}};return m}var rb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rb||(rb={}));function W6(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const jP=["post","put","patch","delete"];new Set(jP);const H6=["get",...jP];new Set(H6);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qp(){return Qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qp.apply(this,arguments)}const $6=k.createContext(null),BP=k.createContext(null);function K6(){return k.useContext(BP)!=null}function G6(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Y6(t){let{basename:e="/",children:n=null,location:i,navigationType:s=_s.Pop,navigator:r,static:o=!1,future:a}=t;K6()&&LP(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:r,static:o,future:Qp({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=VP(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=i,m=k.useMemo(()=>{let _=W6(u,l);return _==null?null:{location:{pathname:_,search:h,hash:d,state:f,key:p},navigationType:s}},[l,u,h,d,f,p,s]);return m==null?null:k.createElement($6.Provider,{value:c},k.createElement(BP.Provider,{children:n,value:m}))}new Promise(()=>{});/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const q6="6";try{window.__reactRouterVersion=q6}catch{}const Q6="startTransition",ob=oI[Q6];function X6(t){let{basename:e,children:n,future:i,window:s}=t,r=k.useRef();r.current==null&&(r.current=B6({window:s,v5Compat:!0}));let o=r.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=k.useCallback(h=>{c&&ob?ob(()=>l(h)):l(h)},[l,c]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>G6(i),[i]),k.createElement(Y6,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}var ab;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ab||(ab={}));var lb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lb||(lb={}));function J6(){return C.jsx(wt.StrictMode,{children:C.jsx(X6,{basename:"/EnglishPersonalDict",children:C.jsx(i5,{children:C.jsx(j6,{})})})})}const cb=document.getElementById("root");cb&&SE(cb).render(C.jsx(J6,{}));export{HP as c,ub as g};
